This file is a merged representation of the entire codebase, combining all repository files into a single document.
Generated by Repomix on: 2025-11-28 18:31:30

# File Summary

## Purpose:

This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.

## File Format:

The content is organized as follows:
1. This summary section
2. Repository information
3. Repository structure
4. Multiple file entries, each consisting of:
   a. A header with the file path (## File: path/to/file)
   b. The full contents of the file in a code block

## Usage Guidelines:

- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.

## Notes:

- Some files may have been excluded based on .gitignore rules and Repomix's
  configuration.
- Binary files are not included in this packed representation. Please refer to
  the Repository Structure section for a complete list of file paths, including
  binary files.

## Additional Information:

For more information about Repomix, visit: https://github.com/andersonby/python-repomix


# Repository Structure

```
.gitignore
ai_md_files_demo
  nb_ai_context_all_docs_and_codes.md
examples
  AiMdGenerator_example.py
git_nb_ai_context.py
nb_ai_context
  ai_md_generator.py
  contrib
    about.md
    gen_github_proj_ai_md.py
  __init__.py
pub_pypi_nb_ai_context.py
pyproject.toml
README.md
repomix-output.md
tests
  ai_codes
    demo_init_extraction.py
    test_file_content_backquotes.py
    test_init_extraction.py
  ai_docs
    CHANGELOG_init_extraction.md
    complete_docstring_extraction.md
    init_extraction_feature.md
    t.md
    UPDATE_SUMMARY.md
```

# Repository Files


## .gitignore

```text
# Byte-compiled / optimized / DLL files
__pycache__/
*.py[codz]
*$py.class

# C extensions
*.so

# Distribution / packaging
.Python
build/
develop-eggs/
dist/
downloads/
eggs/
.eggs/
lib/
lib64/
parts/
sdist/
var/
wheels/
share/python-wheels/
*.egg-info/
.installed.cfg
*.egg
MANIFEST

# PyInstaller
#  Usually these files are written by a python script from a template
#  before PyInstaller builds the exe, so as to inject date/other infos into it.
*.manifest
*.spec

# Installer logs
pip-log.txt
pip-delete-this-directory.txt

# Unit test / coverage reports
htmlcov/
.tox/
.nox/
.coverage
.coverage.*
.cache
nosetests.xml
coverage.xml
*.cover
*.py.cover
.hypothesis/
.pytest_cache/
cover/

# Translations
*.mo
*.pot

# Django stuff:
*.log
local_settings.py
db.sqlite3
db.sqlite3-journal

# Flask stuff:
instance/
.webassets-cache

# Scrapy stuff:
.scrapy

# Sphinx documentation
docs/_build/

# PyBuilder
.pybuilder/
target/

# Jupyter Notebook
.ipynb_checkpoints

# IPython
profile_default/
ipython_config.py

# pyenv
#   For a library or package, you might want to ignore these files since the code is
#   intended to run in multiple environments; otherwise, check them in:
# .python-version

# pipenv
#   According to pypa/pipenv#598, it is recommended to include Pipfile.lock in version control.
#   However, in case of collaboration, if having platform-specific dependencies or dependencies
#   having no cross-platform support, pipenv may install dependencies that don't work, or not
#   install all needed dependencies.
#Pipfile.lock

# UV
#   Similar to Pipfile.lock, it is generally recommended to include uv.lock in version control.
#   This is especially recommended for binary packages to ensure reproducibility, and is more
#   commonly ignored for libraries.
#uv.lock

# poetry
#   Similar to Pipfile.lock, it is generally recommended to include poetry.lock in version control.
#   This is especially recommended for binary packages to ensure reproducibility, and is more
#   commonly ignored for libraries.
#   https://python-poetry.org/docs/basic-usage/#commit-your-poetrylock-file-to-version-control
#poetry.lock
#poetry.toml

# pdm
#   Similar to Pipfile.lock, it is generally recommended to include pdm.lock in version control.
#   pdm recommends including project-wide configuration in pdm.toml, but excluding .pdm-python.
#   https://pdm-project.org/en/latest/usage/project/#working-with-version-control
#pdm.lock
#pdm.toml
.pdm-python
.pdm-build/

# pixi
#   Similar to Pipfile.lock, it is generally recommended to include pixi.lock in version control.
#pixi.lock
#   Pixi creates a virtual environment in the .pixi directory, just like venv module creates one
#   in the .venv directory. It is recommended not to include this directory in version control.
.pixi

# PEP 582; used by e.g. github.com/David-OConnor/pyflow and github.com/pdm-project/pdm
__pypackages__/

# Celery stuff
celerybeat-schedule
celerybeat.pid

# SageMath parsed files
*.sage.py

# Environments
.env
.envrc
.venv
env/
venv/
ENV/
env.bak/
venv.bak/

# Spyder project settings
.spyderproject
.spyproject

# Rope project settings
.ropeproject

# mkdocs documentation
/site

# mypy
.mypy_cache/
.dmypy.json
dmypy.json

# Pyre type checker
.pyre/

# pytype static type analyzer
.pytype/

# Cython debug symbols
cython_debug/

# PyCharm
#  JetBrains specific template is maintained in a separate JetBrains.gitignore that can
#  be found at https://github.com/github/gitignore/blob/main/Global/JetBrains.gitignore
#  and can be added to the global gitignore or merged into this file.  For a more nuclear
#  option (not recommended) you can uncomment the following to ignore the entire idea folder.
#.idea/

# Abstra
# Abstra is an AI-powered process automation framework.
# Ignore directories containing user credentials, local state, and settings.
# Learn more at https://abstra.io/docs
.abstra/

# Visual Studio Code
#  Visual Studio Code specific template is maintained in a separate VisualStudioCode.gitignore 
#  that can be found at https://github.com/github/gitignore/blob/main/Global/VisualStudioCode.gitignore
#  and can be added to the global gitignore or merged into this file. However, if you prefer, 
#  you could uncomment the following to ignore the entire vscode folder
# .vscode/

# Ruff stuff:
.ruff_cache/

# PyPI configuration file
.pypirc

# Cursor
#  Cursor is an AI-powered code editor. `.cursorignore` specifies files/directories to
#  exclude from AI features like autocomplete and code analysis. Recommended for sensitive data
#  refer to https://docs.cursor.com/context/ignore-files
.cursorignore
.cursorindexingignore

# Marimo
marimo/_static/
marimo/_lsp/
__marimo__/


markdown_gen_files_git_ignore/
```

## ai_md_files_demo/nb_ai_context_all_docs_and_codes.md

``````markdown
ï»¿# markdown content namespace: nb_ai_context project summary 



- `nb_ai_context` is a powerful ai llm context gennerator library ,it is uesd for ai llm and rag
- `AiMdGenerator(...)` is the main class to create ai context for llm.


## ğŸ“‹ nb_ai_context most core source files metadata (Entry Points)


ä»¥ä¸‹æ˜¯é¡¹ç›® nb_ai_context æœ€æ ¸å¿ƒçš„å…¥å£æ–‡ä»¶çš„ç»“æ„åŒ–å…ƒæ•°æ®ï¼Œå¸®åŠ©å¿«é€Ÿç†è§£é¡¹ç›®æ¶æ„ï¼š



### the project nb_ai_context most core source code files as follows: 
- `nb_ai_context/__init__.py`
- `nb_ai_context/ai_md_generator.py`
- `nb_ai_context/contrib/gen_github_proj_ai_md.py`


### ğŸ“„ Python File Metadata: `nb_ai_context/__init__.py`

#### ğŸ“¦ Imports

- `from nb_path import NbPath`
- `from ai_md_generator import AiMdGenerator`
- `from contrib.gen_github_proj_ai_md import gen_github_proj_docs_and_codes_ai_md`
- `from contrib.gen_github_proj_ai_md import gen_github_proj_all_dirs_ai_md`


---




### ğŸ“„ Python File Metadata: `nb_ai_context/ai_md_generator.py`

#### ğŸ“¦ Imports

- `import typing`
- `import os`
- `import fnmatch`
- `import ast`
- `from nb_path import NbPath`
- `import astor`

#### ğŸ›ï¸ Classes (1)

##### ğŸ“Œ `class AiMdGenerator(NbPath)`
*Line: 10*

**Docstring:**
`````
An extremely powerful context generator born for AI collaboration.

This class is designed to revolutionize how developers interact with Large Language
Models (LLMs). It intelligently merges multiple project source files into a single,
well-structured, and context-rich Markdown file, providing the AI with a perfect
and comprehensive project snapshot.

The benefits for large AI models are immense:
1.  **Provides a God's-eye View**: Through a file manifest, clear file boundaries,
    and relative paths, the AI can easily construct the project's overall
    architecture and understand file dependencies and relationships, rather than
    fumbling in the dark.
2.  **Ensures Information Integrity and Accuracy**: The AI receives complete,
    unabridged source file content, avoiding the chaos, omissions, or context
    loss caused by manual copy-pasting. This enables it to provide more precise
    analysis and suggestions.
3.  **Enhances Security**: The built-in `use_gitignore` feature is a critical
    security barrier. It automatically ignores files containing sensitive
    information (like API keys or database passwords) such as `.env` or local
    configs, allowing you to share code without fear of accidental leaks.

Its core methods, `merge_from_files` and `merge_from_dir`, offer extreme
flexibility. Combined with the elegant chainable calls of `nb_path`, creating a
high-quality AI context is transformed from a tedious, error-prone manual task
into a single, delightful line of code.

Example:
    >>> # Imagine you want an AI to review your entire project
    >>> project_name = "my_project"
    >>> project_summary = '''
    ... This is an excellent Python project that demonstrates best practices.
    ... It includes comprehensive documentation and well-structured code.
    ... '''
    >>> 
    >>> (
    ...     AiMdGenerator("project_context_for_ai.md")
    ...     .set_project_propery(project_name=project_name, project_root="/path/to/your/project")
    ...     .clear_text()  # Clear the old file
    ...     .add_project_summary(
    ...         project_summary=project_summary,
    ...         # Extract metadata (without full source) from core files first
    ...         most_core_source_code_file_list=[
    ...             "src/main.py",
    ...             "src/api.py",
    ...             "src/models.py",
    ...         ]
    ...     )
    ...     .auto_merge_from_python_project_some_files()  # Auto-include README, setup.py, etc.
    ...     .merge_from_dir(
    ...         relative_dir_name="src", # The main source code directory
    ...         as_title="Project Source Code",
    ...         use_gitignore=True,  # Automatically use .gitignore rules
    ...         should_include_suffixes=[".py", ".md"], # Only include specified file types
    ...         include_ast_metadata=True,  # Include AST metadata for Python files
    ...     )
    ...     .merge_from_dir(
    ...         relative_dir_name="tests", # The tests directory
    ...         as_title="Project Tests",
    ...         use_gitignore=True,
    ...         should_include_suffixes=[".py"],
    ...         excluded_dir_name_list=["tests/temp_files"],
    ...         include_ast_metadata=True,
    ...     )
    ... )
`````

**Public Methods (7):**
- `def set_project_propery(self, project_name: str, project_root: typing.Union[os.PathLike, str]) -> 'AiMdGenerator'`
  - *Sets the project name for the current markdown file.*
- `def add_project_summary(self, project_summary: str, most_core_source_code_file_list: typing.List[str] = None, project_root: typing.Union[os.PathLike, str] = None) -> 'AiMdGenerator'`
  - **Docstring:**
  `````
  Adds a project summary to the current markdown file.
  
  Args:
      project_summary: é¡¹ç›®æ¦‚è¿°æ–‡æœ¬
      project_root: é¡¹ç›®æ ¹ç›®å½•ï¼ˆå¦‚æœæä¾›äº† most_core_source_code_file_listï¼‰
      most_core_source_code_file_list: æœ€æ ¸å¿ƒçš„æºç æ–‡ä»¶åˆ—è¡¨ï¼ˆç›¸å¯¹è·¯å¾„ï¼‰
                                       åªæå–è¿™äº›æ–‡ä»¶çš„ AST å…ƒæ•°æ®ï¼Œä¸åŒ…å«å®Œæ•´æºç 
  
  Example:
      >>> (
      ...     AiMdGenerator("output.md")
      ...     .set_project_name("my_project")
      ...     .clear_text()
      ...     .add_project_summary(
      ...         project_summary="è¿™æ˜¯ä¸€ä¸ªä¼˜ç§€çš„é¡¹ç›®...",
      ...         project_root="/path/to/project",
      ...         most_core_source_code_file_list=["src/main.py", "src/api.py"],
      ...     )
      ... )
  `````
- `def auto_merge_from_python_project_some_files(self, project_root: typing.Union[os.PathLike, str] = None) -> 'AiMdGenerator'`
  - *è‡ªåŠ¨åˆå¹¶é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ readme.md æˆ–è€…ReADME.md ä»¥åŠsetup.py å’Œ pyproject.toml ï¼Œå¦‚æœæœ‰å°±æ·»åŠ *
- `def merge_from_files(self, relative_file_name_list: typing.List[str], as_title: str, project_root: typing.Union[os.PathLike, str] = None) -> 'AiMdGenerator'`
  - **Docstring:**
  `````
  Merges the content of the given files into the current markdown file.
  the current markdown file will be used to upload to ai model for code review and learning.
  `````
- `def merge_from_dir(self, relative_dir_name: str, as_title: str, project_root: typing.Union[os.PathLike, str] = None, should_include_suffixes: typing.List[str] = [], excluded_dir_name_list: typing.List[str] = [], excluded_file_name_list: typing.List[str] = [], use_gitignore: bool = True, dry_run: bool = False, include_ast_metadata: bool = True) -> 'AiMdGenerator'`
  - *Merges the content of the given directory into the current file.*
- `def merge_dir_of_package_examples(self)`
  - *åˆå¹¶åŒ…çš„examplesç›®å½•åˆ°å½“å‰markdownæ–‡ä»¶*
- `def merge_from_files_with_metadata(self, relative_file_name_list: typing.List[str], as_title: str, project_root: typing.Union[os.PathLike, str] = None, include_ast_metadata: bool = True, include_file_text: bool = True) -> 'AiMdGenerator'`
  - **Docstring:**
  `````
  åˆå¹¶æ–‡ä»¶å†…å®¹åˆ° Markdownï¼Œå¯¹äº Python æ–‡ä»¶ä¼šé¢å¤–ç”Ÿæˆ AST å…ƒæ•°æ®
  
  Args:
      project_root: é¡¹ç›®æ ¹ç›®å½•
      relative_file_name_list: ç›¸å¯¹æ–‡ä»¶è·¯å¾„åˆ—è¡¨
      as_title: æ ‡é¢˜
      include_ast_metadata: æ˜¯å¦åŒ…å« AST å…ƒæ•°æ®ï¼ˆä»…å¯¹ .py æ–‡ä»¶ï¼‰
      include_file_text: æ˜¯å¦åŒ…å«å®Œæ•´æ–‡ä»¶æºç ï¼ˆFalse æ—¶åªæ˜¾ç¤ºå…ƒæ•°æ®ï¼‰
  `````

**Class Variables (1):**
- `suffix__lang_map = {'.py': 'python', '.md': 'markdown', '.txt': 'text...`


---




### ğŸ“„ Python File Metadata: `nb_ai_context/contrib/gen_github_proj_ai_md.py`

#### ğŸ“ Module Docstring

`````
Generate tutorials and code from any GitHub project into a markdown file for AI context

Download GitHub project zip file
https://codeload.github.com/fastapi/sqlmodel/zip/refs/heads/main
https://codeload.github.com/fastapi/sqlmodel/zip/refs/tags/0.0.25

Unzip the file
Generate markdown file
`````

#### ğŸ“¦ Imports

- `import typing`
- `from nb_path import NbPath`
- `from nb_ai_context import AiMdGenerator`
- `import re`

#### ğŸ”§ Public Functions (3)

- `def extract_repo_name(github_url)`
  - *Line: 18*

- `def gen_github_proj_docs_and_codes_ai_md(github_zip_url: str, output_md_path: str, docs_dir_name: str, codes_dir_name: str, readme_file: str, should_include_suffixes: list = None, excluded_dir_name_list: typing.List[str] = [], excluded_file_name_list: typing.List[str] = [])`
  - *Line: 27*
  - **Docstring:**
  `````
  Generate a Markdown document containing README, tutorials, and source code from a GitHub repository URL
  
  Args:
      github_zip_url: GitHub repository zip download link
                     Example: https://codeload.github.com/fastapi/sqlmodel/zip/refs/heads/main
      output_md_path: Output Markdown file path
      readme_file: README file name, default is "README.md"
      docs_dir_name: Documentation directory name, e.g. "docs"
      codes_dir_name: Source code directory name, e.g. "sqlmodel"
      should_include_suffixes: List of file extensions to include,
                              By default includes ['.py', '.java', '.go', '.md', '.html']
  `````

- `def gen_github_proj_all_dirs_ai_md(github_zip_url: str, output_md_path: str, should_include_suffixes: list = None, excluded_dir_name_list: typing.List[str] = [], excluded_file_name_list: typing.List[str] = [])`
  - *Line: 99*
  - *ç”Ÿæˆgithubçš„é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶åˆ°markdownï¼Œ*


---


# markdown content namespace: nb_ai_context Project Root Dir Some Files 


## File Tree


`````

â”œâ”€â”€ README.md
â””â”€â”€ pyproject.toml

`````

---


## Included Files


- `README.md`

- `pyproject.toml`


---


--- **start of file: README.md** --- 

`````markdown
# nb_ai_context

[![PyPI version](https://img.shields.io/pypi/v/nb_ai_context.svg)](https://pypi.org/project/nb_ai_context/)
[![Python versions](https://img.shields.io/pypi/pyversions/nb_ai_context.svg)](https://pypi.org/project/nb_ai_context/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

ğŸš€ **æå…¶å¼ºå¤§çš„ AI ä¸Šä¸‹æ–‡ç”Ÿæˆå™¨** - å°†ä»»æ„ IT é¡¹ç›®åˆå¹¶ç”Ÿæˆä¸º1ä¸ªç»“æ„åŒ– Markdown æ–‡æ¡£ï¼Œæ–¹ä¾¿ä¸€æ¬¡ä¸Šä¼ ç»™aiå¤§æ¨¡å‹æˆ–è€…ragçŸ¥è¯†åº“ã€‚  

**`nb_ai_context` ç”Ÿæˆçš„markdownæ–‡ä»¶ ä¼ ç»™  `google ai studio` ï¼Œç”Ÿæˆä»£ç è´¨é‡å’Œå‡†ç¡®ç‡ï¼Œè¿œè¿œåŠæ‰“åœ¨ `cursor` `trae` `qoder` `gemini-code-assit` ç­‰ai ideä¸­å†™ä»£ç ã€‚**

<pre style="color: red;font-weight: bold;background-color:yellow;padding: 10px;border-radius: 5px;font-size: 16px;">
æœ¬äººå®æµ‹ï¼š
å°† nb_ai_context å¯¹é¡¹ç›®æ•™ç¨‹+æºç ç”Ÿæˆçš„å•ä¸ªmarkdownæ–‡ä»¶ ä¼ ç»™ `google ai studio` ç½‘é¡µç‰ˆ
çš„1000kä¸Šä¸‹æ–‡+gemini 3.0pro å¤§æ¨¡å‹ï¼Œå†æé—®è®©geminiå†™ä»£ç ï¼Œä»£ç ç”Ÿæˆçš„å‡†ç¡®ç‡å’Œè´¨é‡è¿œè¿œåŠæ‰“åœ¨ 
cursor trae qoderç­‰ai ideæˆ–gemini-code-assitç­‰ ç¼–ç¨‹æ’ä»¶ é‡Œé¢æé—®å†™ä»£ç ã€‚

 `google ai studio` ä¼˜ç‚¹æ˜¯1000kä¸Šä¸‹æ–‡ä»¥åŠå…è´¹ã€‚å”¯ä¸€ç¼ºç‚¹æ˜¯ä»–åœ¨ç½‘é¡µç”Ÿæˆä»£ç ï¼Œè€Œä¸æ˜¯ç›´æ¥æ“ä½œ
 ä¿®æ”¹ä½ çš„æœ¬åœ°ä»£ç æ–‡ä»¶ã€‚

 `nb_ai_context` ç”Ÿæˆçš„markdownä¸¢ç»™`google ai studio`å®Œçˆ†cursor traeç­‰ideä¸­å†™ä»£ç  
 ä¸»è¦åŸå› æ˜¯ï¼š  
`google ai studio` ç½‘é¡µç‰ˆæ˜¯å…¨é‡é˜…è¯»æ¨ç†ä½ ä¸Šä¼ çš„æ–‡ä»¶ï¼Œè€Œ aiç¼–ç¨‹ide å¯¹é•¿æ•™ç¨‹æˆ–è€…æºç ï¼Œ
ai agentè¯•å›¾é‡‡å–å…³é”®å­—æœç´¢åŒ¹é…å†æŠ•å–‚ä¸Šä¸‹æ–‡ç»™aiå¤§æ¨¡å‹ï¼Œï¼ˆæœ‰æ—¶å€™æ¨¡ç³Šæœç´¢çš„å…³é”®å­—å‹æ ¹æœä¸åˆ°å†…å®¹ï¼Œ
å› ä¸ºaié€ å‡ºæ¥çš„å…³é”®å­—ä¸æ˜¯å®Œå®Œå…¨å…¨çš„åŒ¹é…ä½ çš„å‡½æ•°åå­—æˆ–è€…æ•™ç¨‹å†…å®¹ï¼Œæ‰€ä»¥å°±æœä¸åˆ°ï¼Œ
ä¾‹å¦‚è¿‘ä¹‰è¯ï¼Œä½ ä»£ç ç”¨åˆ«çš„å•è¯è¡¨ç¤ºï¼Œaiå´ç”¨è‡ªå·±çš„å•è¯æ¥è¡¨ç¤ºï¼Œé å…³é”®å­—å‹æ ¹å°±æœä¸åˆ°å†…å®¹ï¼Œagentå’‹æŠ•å–‚aiå¤§æ¨¡å‹ï¼Ÿï¼‰
ai ide è¿™ç§æ–¹å¼ç®€ç›´æ˜¯ç®¡ä¸­çª¥è±¹ ä¸€å¶éšœç›®ä¸è§æ³°å±±ã€‚

æœ€æ ¹æœ¬åŸå› è¿˜æ˜¯ï¼š  
ai ide ä¸ºäº†å‡å°‘æˆæœ¬ï¼Œé˜²æ­¢tokenæ¶ˆè€—å¤§ï¼Œä¸ä¼šå…¨é‡æŠŠæºç æ•™ç¨‹å–‚ç»™aiå¤§æ¨¡å‹ï¼Œä¸ç„¶çš„é ç”¨æˆ·äº¤çš„é‚£20ç¾å…ƒçš„æœˆä¼šå‘˜ï¼Œ
cursorè¦äºå¾—è£¤è¡©æ²¡å¾—ç©¿ã€‚100ä¸‡ tokensä¸Šä¸‹æ–‡è¾“å…¥ï¼Œcalude gemini gpt ä»·æ ¼å¤§çº¦æ˜¯3ç¾å…ƒï¼Œç›¸å½“äº20å…ƒäººæ°‘å¸ï¼Œ
å¦‚æœé—®ä¸€æ¬¡å°±20å…ƒäººæ°‘å¸ï¼Œcursoræ¯ä¸ªæœˆç»™ä½ ç”¨8æ¬¡å°±è¦å¼€å§‹äºè¡€æœ¬äº†ï¼Œ(å¦å¤–tokensè¾“å‡ºä»·æ ¼è¿œé«˜äºè¾“å…¥ä»·æ ¼ï¼‰ï¼Œ
ç°åœ¨cursorè¿˜ç»™ä½ æ¯æœˆç”¨500æ¬¡ï¼Œé‚£ä»–åªèƒ½ä»èŠ‚çº¦tokensä¸‹æ‰‹äº†ï¼Œå…·ä½“è¡¨ç°å°±æ˜¯cursorä¸å…¨é‡æŠŠæ‰€æœ‰æ•™ç¨‹å’Œæºç 
å‘ç»™aiå¤§æ¨¡å‹æ¨ç†ã€‚

`nb_ai_context` å¯¹å¤§å‹ç¼–ç¨‹é¡¹ç›®çš„æ•ˆæœå°¤ä¸ºçªå‡ºï¼Œè¿œè¿œåŠæ‰“ cursor trae qoder gemini-code-assit ç­‰ai ideä¸­å†™ä»£ç ã€‚
</pre>

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ¯ ä¸ºä»€ä¹ˆéœ€è¦ nb_ai_contextï¼Ÿ

å½“ä½ æƒ³è®© AI å¤§æ¨¡å‹ï¼ˆå¦‚ ChatGPTã€Claudeï¼‰ç†è§£ä½ çš„æ•´ä¸ªé¡¹ç›®æ—¶ï¼Œæ‰‹åŠ¨å¤åˆ¶ç²˜è´´ä»£ç æ—¢ç¹çåˆå®¹æ˜“å‡ºé”™ã€‚`nb_ai_context` å½»åº•è§£å†³äº†è¿™ä¸ªç—›ç‚¹ï¼š

- âœ… **è‡ªåŠ¨åŒ–åˆå¹¶** - ä¸€é”®å°†æ•´ä¸ªé¡¹ç›®åˆå¹¶ä¸ºå•ä¸ª Markdown æ–‡ä»¶
- âœ… **ç»“æ„åŒ–è¾“å‡º** - åŒ…å«æ–‡ä»¶æ ‘ã€æ–‡ä»¶è¾¹ç•Œã€ç›¸å¯¹è·¯å¾„ï¼ŒAI èƒ½å®Œç¾ç†è§£é¡¹ç›®æ¶æ„
- âœ… **æ™ºèƒ½å…ƒæ•°æ®æå–** - å¯¹ Python é¡¹ç›®æä¾› AST è¯­æ³•æ ‘è§£æï¼Œè‡ªåŠ¨ç”Ÿæˆç±»ã€å‡½æ•°ã€æ–¹æ³•ç­¾å
- âœ… **å®‰å…¨å¯é ** - å†…ç½® `.gitignore` æ”¯æŒï¼Œè‡ªåŠ¨æ’é™¤æ•æ„Ÿä¿¡æ¯ï¼ˆAPI å¯†é’¥ã€.env æ–‡ä»¶ç­‰ï¼‰
- âœ… **çµæ´»å¯æ§** - æ”¯æŒæ–‡ä»¶è¿‡æ»¤ã€ç›®å½•æ’é™¤ã€è‡ªå®šä¹‰æ–‡ä»¶ç±»å‹
- âœ… **GitHub é¡¹ç›®æ”¯æŒ** - ç›´æ¥ä» GitHub zip ä¸‹è½½åœ°å€ç”Ÿæˆæ–‡æ¡£

### ğŸ’¡ **å…³é”®ä¼˜åŠ¿å¯¹æ¯”**
| æ–¹æ¡ˆ | ä¸Šä¸‹æ–‡å®Œæ•´æ€§ | Token æ¶ˆè€— | å®‰å…¨æ€§ | æˆæœ¬ |
|------|--------------|------------|--------|------|
| **Cursor/trae/qoder** | âŒ åˆ†æ®µé˜…è¯» | âš ï¸ é«˜ | âš ï¸ éœ€æ‰‹åŠ¨è¿‡æ»¤ | ğŸ’° ä»˜è´¹æ¬¡æ•°é™åˆ¶ |
| **æ‰‹åŠ¨å¤åˆ¶ç²˜è´´** | âŒ æ˜“é—æ¼ | âŒ æé«˜ | âŒ æ˜“æ³„éœ²æ•æ„Ÿä¿¡æ¯ | â° è€—æ—¶ |
| **nb_ai_context** | âœ… å®Œæ•´ç»“æ„åŒ– | âœ… AST å…ƒæ•°æ®ä¼˜åŒ– | âœ… è‡ªåŠ¨ `.gitignore` | ğŸ†“ å…è´¹å·¥å…· |



### ğŸ å¯¹ AI å¤§æ¨¡å‹çš„å·¨å¤§ä»·å€¼

1. **æä¾›ä¸Šå¸è§†è§’** ğŸ“
   - æ¸…æ™°çš„æ–‡ä»¶æ ‘å’Œæ–‡ä»¶è¾¹ç•Œ
   - å®Œæ•´çš„ç›¸å¯¹è·¯å¾„ä¿¡æ¯
   - AI èƒ½è½»æ¾æ„å»ºé¡¹ç›®çš„æ•´ä½“æ¶æ„å›¾

2. **ç¡®ä¿ä¿¡æ¯å®Œæ•´æ€§** ğŸ“š
   - æœªç»åˆ å‡çš„å®Œæ•´æºç 
   - é¿å…æ‰‹åŠ¨å¤åˆ¶å¯¼è‡´çš„æ ¼å¼æ··ä¹±
   - é›¶ä¸Šä¸‹æ–‡ç¼ºå¤±ï¼ŒAI åˆ†ææ›´ç²¾å‡†

3. **å¢å¼ºå®‰å…¨æ€§** ğŸ”’
   - è‡ªåŠ¨éµå¾ª `.gitignore` è§„åˆ™
   - é˜²æ­¢æ•æ„Ÿä¿¡æ¯æ³„éœ²
   - æ”¾å¿ƒåˆ†äº«ä»£ç ç»™ AI

4. **Python é¡¹ç›®ä¸“å±ä¼˜åŒ–** ğŸ
   - AST è¯­æ³•æ ‘è§£æ
   - è‡ªåŠ¨æå–ç±»ã€å‡½æ•°ã€æ–¹æ³•ç­¾å
   - å‚æ•°ç±»å‹ã€è¿”å›å€¼ã€è£…é¥°å™¨ä¸€ç›®äº†ç„¶

## ğŸ“¦ å®‰è£…

```bash
pip install nb_ai_context
```

**ä¾èµ–é¡¹ï¼š**
- Python >= 3.7
- nb_path
- nb_log

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¤ºä¾‹ 1ï¼šä¸ºæœ¬åœ° Python é¡¹ç›®ç”Ÿæˆ AI ä¸Šä¸‹æ–‡

```python
from nb_ai_context import AiMdGenerator

project_name = "my_awesome_project"
project_root = r"D:\codes\my_awesome_project"

project_summary = f"""
- `{project_name}` æ˜¯ä¸€ä¸ªä¼˜ç§€çš„ Python Web åº”ç”¨
- ä½¿ç”¨ FastAPI æ¡†æ¶
- åŒ…å«å®Œæ•´çš„ç”¨æˆ·è®¤è¯å’Œæƒé™ç®¡ç†
"""

(
    AiMdGenerator(rf"D:\ai_docs\{project_name}_for_ai.md")
    .set_project_propery(project_name=project_name, project_root=project_root)
    .clear_text()  # æ¸…ç©ºæ—§å†…å®¹
    .add_project_summary(
        project_summary=project_summary,
        # æ ¸å¿ƒæ–‡ä»¶åˆ—è¡¨ï¼ˆåªæå–å…ƒæ•°æ®ï¼Œä¸åŒ…å«å®Œæ•´æºç ï¼‰
        most_core_source_code_file_list=[
            "src/main.py",
            "src/api.py",
            "src/models.py",
        ],
    )
    .auto_merge_from_python_project_some_files()  # è‡ªåŠ¨åŒ…å« README.mdã€setup.pyã€pyproject.toml
    .merge_from_dir(
        relative_dir_name="src",
        as_title=f"{project_name} æºä»£ç ",
        use_gitignore=True,  # ä½¿ç”¨ .gitignore è§„åˆ™
        should_include_suffixes=[".py", ".md"],  # åªåŒ…å«æŒ‡å®šæ–‡ä»¶ç±»å‹
        include_ast_metadata=True,  # åŒ…å« AST å…ƒæ•°æ®
    )
    .merge_from_dir(
        relative_dir_name="tests",
        as_title=f"{project_name} æµ‹è¯•ä»£ç ",
        use_gitignore=True,
        should_include_suffixes=[".py"],
        excluded_dir_name_list=["tests/temp"],  # æ’é™¤ç‰¹å®šç›®å½•
        include_ast_metadata=True,
    )
    .show_textfile_info()  # æ˜¾ç¤ºç”Ÿæˆçš„æ–‡ä»¶ä¿¡æ¯
)
```

### ç¤ºä¾‹ 2ï¼šä» GitHub é¡¹ç›®ç”Ÿæˆ AI æ–‡æ¡£

```python
from nb_ai_context import gen_github_proj_docs_and_codes_ai_md
from nb_path import NbPath

# ç”Ÿæˆ SQLModel é¡¹ç›®çš„æ–‡æ¡£å’Œä»£ç 
gen_github_proj_docs_and_codes_ai_md(
    github_zip_url="https://codeload.github.com/fastapi/sqlmodel/zip/refs/heads/main",
    output_md_path=r"D:\ai_docs\sqlmodel_all_docs_and_codes.md",
    readme_file="README.md",
    docs_dir_name="docs",  # æ–‡æ¡£ç›®å½•
    codes_dir_name="sqlmodel",  # æºç ç›®å½•
    should_include_suffixes=[".py", ".md"],
    excluded_dir_name_list=["tests", "__pycache__"],
    excluded_file_name_list=["test_*.py"],
)
```

### ç¤ºä¾‹ 3ï¼šç”Ÿæˆ GitHub é¡¹ç›®çš„æ‰€æœ‰æ–‡ä»¶

```python
from nb_ai_context import gen_github_proj_all_dirs_ai_md

# ç”Ÿæˆæ•´ä¸ªé¡¹ç›®çš„æ‰€æœ‰æ–‡ä»¶
gen_github_proj_all_dirs_ai_md(
    github_zip_url="https://codeload.github.com/fastapi/sqlmodel/zip/refs/heads/main",
    output_md_path=r"D:\ai_docs\sqlmodel_all_files.md",
    should_include_suffixes=[".py", ".md", ".html"],
    excluded_dir_name_list=["node_modules", ".git", "__pycache__"],
)
```


## ä¸ºä»€ä¹ˆè¦è¿™ä¸ª nb_ai_context ï¼Ÿè„±äº†è£¤å­æ”¾å±ï¼Ÿè®©cusror trae å»é˜…è¯»é¡¹ç›®çš„æºç å’Œæ•™ç¨‹ï¼Œè¿˜èƒ½åœ¨ideé‡Œé¢ç”Ÿæˆä»£ç ï¼Œè¿™ä¸æ›´é¦™å—ï¼Ÿ(é¢„åˆ¤è´¨ç–‘)

- 1. æœ‰æ—¶å€™æ˜¯éideç¯å¢ƒé—®é¡¹ç›®çš„ç”¨æ³•

- 2. cursor å¤ªè´µäº†ï¼Œç»å¸¸æé—®cursoræµªè´¹å®è´µæ¬¡æ•°ï¼Œè¦æŠŠå®è´µæ¬¡æ•°ç•™ç»™çœŸæ­£çš„ä»£ç ç”Ÿæˆï¼Œè€Œä¸æ˜¯æé—®ã€‚
     cursor trae å­˜åœ¨ä¸Šä¸‹æ–‡å¤ªçŸ­ï¼Œè°ƒæ•™æˆä¸ç§¯æé˜…è¯»å…¨é‡æºç å’Œæ•™ç¨‹ç­‰é—®é¢˜ã€‚

- 3. å¯ä»¥ä½œä¸º rag åœ¨çº¿çŸ¥è¯†åº“ä½¿ç”¨ï¼Œè®©aiå¤§æ¨¡å‹é˜…è¯»ç”Ÿæˆçš„markdownï¼Œç„¶åå›ç­”é—®é¢˜ã€‚

- 4. å¯ä»¥æŠŠç”Ÿæˆçš„markdownä¸¢ç»™å…è´¹ä¸”ä¸Šä¸‹æ–‡æ— æ•Œé«˜è¾¾1000k çš„ `google ai studio` å»é˜…è¯»ï¼Œclaude gptæ‰256k tokenï¼Œå›½å†…å¤§æ¨¡å‹æ‰128k tokenï¼Œå‹æ ¹ä¸å¤Ÿç”¨ï¼Œ  
     åªæœ‰  google ai studio + gemini 3.0pro æ‰èƒ½å®Œæ•´é˜…è¯»é¡¹ç›®æºç åŠ æ•™ç¨‹ï¼Œå¹¶ä¸”å…è´¹ä½¿ç”¨ã€‚ 

- 5. `google ai studio` å¯¹äº4M ä»¥å†…çš„æ–‡ä»¶ï¼Œå¯ä»¥ä¸€æ¬¡æ€§å…¨é‡é˜…è¯»å…¨æ–‡+æ¨ç†ï¼Œå¹¶ä¸”å…è´¹ä½¿ç”¨ã€‚
     ä¸€èˆ¬ä¸‰æ–¹åŒ…é¡¹ç›®çš„æºç åŠ æ•™ç¨‹è¿œæ²¡æœ‰è¾¾åˆ°4Mã€‚
     å¦‚æœæ˜¯ç”¨æˆ·è‡ªå·±çš„çœŸå®é¡¹ç›®è€Œéæ¡†æ¶æˆ–è€…ä¸‰æ–¹åŒ…é¡¹ç›®ï¼Œé¡¹ç›®ä¸­å¯èƒ½åŒ…å«å¤§é‡å†™æ³•æ¨¡å¼éå¸¸é‡å¤çš„éœ€æ±‚ä»£ç ï¼Œä»£ç åŠ æ•™ç¨‹åŠ èµ·æ¥å¯èƒ½ä¼šè¶…è¿‡4Mï¼Œä½†æ˜¯ ç”¨æˆ·é¡¹ç›®æ ¸å¿ƒå…¬å…±å…¥å£å‡½æ•°å’Œç±»çš„ç”¨æ³•çš„æºç  + æ•™ç¨‹ ç»å¯¹ä¸è¶…è¿‡1Mã€‚

- 6. `nb_ai_context` æ”¯æŒæŒ‰æ–‡ä»¶å¤¹åˆå¹¶å’Œè¿‡æ»¤éœ€è¦åˆå¹¶çš„æ–‡ä»¶ï¼Œå¹¶ä¸”`nb_ai_context` æ”¯æŒ `ast` è§£æ ä»»ä½•pythonæ–‡ä»¶çš„ ç±» å‡½æ•° å…¥å‚ æ³¨é‡Š ç­‰ å…ƒä¿¡æ¯ï¼Œå¤§å¹…å‡å°‘tokenæ¶ˆè€—ï¼Œè®©aiæŠ“ä½é‡ç‚¹ã€‚  
     `AiMdGenerator.add_project_summary(most_core_source_code_file_list=[...])` æ”¯æŒæ·»åŠ é¡¹ç›®æ¦‚è¿°å’Œæ ¸å¿ƒæ–‡ä»¶å…ƒæ•°æ®ï¼Œè®©aiå¿«é€ŸæŠ“ä½é‡ç‚¹ã€‚  
     ä¸ç®¡é¡¹ç›®å¤šå¤æ‚æœ‰å‡ ç™¾ä¸ªclassç±»å’Œæ¨¡å—ï¼Œä½†çœŸæ­£èƒ½ä½œä¸ºå…¬å…±ä½¿ç”¨å…¥å£çš„æ¨¡å—ä¸€èˆ¬ä¸ä¼šè¶…è¿‡10ä¸ªã€‚  
     ä¾‹å¦‚ `funboost` é¡¹ç›® `python`æ–‡ä»¶é«˜è¾¾å‡ ç™¾ä¸ªï¼Œä½†çœŸæ­£èƒ½ä½œä¸ºæ¡†æ¶ä½¿ç”¨ç”¨æˆ·çº§åˆ«çš„å…¬å…±ä½¿ç”¨å…¥å£çš„pythonæ–‡ä»¶ä¹Ÿå°±ä¸‰å››ä¸ªï¼Œå…¶ä»–çš„pythonæ–‡ä»¶å‹æ ¹æ²¡æœºä¼šè¢«ç»ˆç«¯ç”¨æˆ·ç›´æ¥importå¹¶ä½¿ç”¨ã€‚


- 10. æœ€æœ€ä¸»è¦çš„åŸå› ï¼ï¼ï¼ cursor trae å†…ç½®çš„å¤§æ¨¡å‹éƒ½ä¸ä¹–ä¹–é˜…è¯»æ‰€æœ‰æºç å’Œæ•™ç¨‹ï¼Œå³ä½¿ä½ æ˜ç¡®å‘å‡ºæŒ‡ä»¤å¼ºè¿«ä»–é˜…è¯»æ‰€æœ‰æ•™ç¨‹å’Œæºç ï¼Œä»–ä¹Ÿä¼šå·æ‡’ä¸è¯»ï¼Œåªè¯»éƒ¨åˆ†ä»£ç ï¼Œå¯¼è‡´å¹»è§‰ç‡æé«˜ã€‚
      ä¸ºä»€ä¹ˆ cursor trae é‡Œé¢çš„å¤§æ¨¡å‹ä¸å…¨é‡é˜…è¯»å‘¢ï¼Œå› ä¸ºä»–æ—©å°±é¢„åˆ¤äº†æœ‰æµæ°“ç©å®¶æ¶æ„æ»¥ç”¨å¤§æ¨¡å‹ç®—åŠ›ï¼Œ å¦‚æœä½ è®©cursor + claude é˜…è¯»cç›˜ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œcursorå’Œclaude ä¼šè¿™ä¹ˆä¹–å—ï¼Ÿ
      cç›˜ä¸‹çš„æ–‡æœ¬æ–‡ä»¶é«˜è¾¾å‡ ç™¾äº¿è¡Œï¼Œå¦‚æœè¯»å®Œä¸€æ¬¡å°±ä¼šæ¶ˆè€—ä»·å€¼å‡ åä¸‡ç¾å…ƒçš„tokensï¼Œå¤§æ¨¡å‹å‚å•†äºå¾—è£¤è¡©æ²¡å¾—ç©¿ï¼Œä½ æ‰20ç¾å…ƒçš„åŒ…æœˆä¼šå‘˜ï¼Œcursorå’Œclaudeå‚å®¶ä¸è¢«ä½ è–…ç§ƒå™œçš®ï¼Ÿ
      æ‰€ä»¥ä¸ç®¡ç”¨æˆ·æ€ä¹ˆå¼ºè¿«cursor  traeå»é˜…è¯»æ‰€æœ‰æºç å’Œæ•™ç¨‹ï¼Œcursor å’Œ claude å’Œtraeéƒ½ä¸ä¼šå¬ä½ çš„è¯ã€‚

- 11. trae å’Œ cursor è¢«è°ƒæ•™é™åˆ¶äº†ï¼Œ traeä¸€æ¬¡æœ€å¤šé˜…è¯»200è¡Œï¼Œqoderä¸€æ¬¡æœ€å¤šé˜…è¯»1000è¡Œï¼Œå¯¹è¶…é•¿æ•™ç¨‹ï¼Œéœ€è¦åˆ†å¤šæ¬¡é˜…è¯»ï¼Œå¯¼è‡´å¹»è§‰ç‡æé«˜ï¼Œä½ è®©è¿™ç§ ai ide + å¤§æ¨¡å‹å»æ€»ç»“ é¡¹ç›®çš„ä¸­å¿ƒæ€æƒ³éå¸¸ä¸é è°±ã€‚ 
      å¹¶ä¸”åˆ†æ®µé˜…è¯»äº¤äº’æ¬¡æ•°é«˜è¾¾å‡ åæ¬¡ï¼Œå¤ªè´¹ç­‰å¾…æ—¶é—´äº†ã€‚
      å¹¶ä¸” ai ideé‡Œé¢é˜…è¯»é•¿æ–‡ä»¶ä¼šåˆ†æ‰¹é˜…è¯»ç›´åˆ°20æ¬¡å°±ä¼šè‡ªåŠ¨åœæ­¢ï¼Œä¾‹å¦‚æ–‡ä»¶æœ‰10000è¡Œï¼Œtraeä¸€æ¬¡é˜…è¯»200è¡Œï¼Œéœ€è¦50æ¬¡äº¤äº’ï¼Œä½†ai ideè®¾ç½®äº†æœ€å¤šäº¤äº’20æ¬¡å°±ä¼šè‡ªåŠ¨åœæ­¢ï¼›è¿™æ˜¯å› ä¸ºæ‹…å¿ƒæµæ°“æ¶æ„ç”¨æˆ·è®©ä»–é˜…è¯»1äº¿è¡Œçš„æ–‡ä»¶å¯¼è‡´è‡ªå·±è¡€äºï¼Œæ‰€ä»¥æœ€å¤šåˆ†æ®µé˜…è¯»20æ¬¡å°±ä¼šåœæ­¢ã€‚

- 12. è§£å†³ 10å’Œ11çš„ç—›ç‚¹é—®é¢˜ï¼Œ åªæœ‰ `google ai studio` æ‰èƒ½åšåˆ° ï¼Œ æˆ–è€…ä½¿ç”¨ragä¹Ÿå‹‰å¼ºå¯ä»¥ã€‚
      æŠŠæ–‡æ¡£ä¸Šä¼ ç»™ `google ai studio` ç½‘é¡µç‰ˆçš„1000kä¸Šä¸‹æ–‡çš„gemini pro è¿™ç§æ–¹å¼æœ€å¼ºï¼Œ å…¶æ¬¡æ˜¯ `rag`æ–¹å¼ã€‚
      å¯¹ 4Mä»¥å†…çš„æ–‡æ¡£ï¼ˆå¤§çº¦å°±æ˜¯1000k tokensï¼‰ï¼Œ æ¨èä½¿ç”¨  `google ai studio`ï¼Œä¸è¦ä½¿ç”¨ `rag` æ–¹å¼ã€‚
      è¶…è¿‡4Mæ–‡æ¡£çš„ä¸Šä¸‹æ–‡ï¼Œçªç ´äº†gemini 1000k token ä¸Šé™ï¼Œæ— æ³•ä½¿ç”¨ï¼Œæ­¤æ—¶éœ€è¦ä½¿ç”¨ `rag`æ–¹å¼ã€‚

- 13. ä¸€äº›ç½‘å€ï¼š
       google ai studio ç½‘å€  [https://aistudio.google.com/](https://aistudio.google.com/)    
       æ™ºè°±æ¸…è¨€ aiæ™ºèƒ½ä½“ç½‘å€ï¼Œå¯ä»¥æ”¯æŒå…è´¹rag  [chatglm.cn/main/gdetail/69168f75e8e6a00da25f55cc?lang=zh](chatglm.cn/main/gdetail/69168f75e8e6a00da25f55cc?lang=zh)    
       è…¾è®¯imaçŸ¥è¯†åº“ [ima.qq.com](https://ima.qq.com/)    



## ğŸ“– æ ¸å¿ƒ API è¯¦è§£

### AiMdGenerator ç±»

`AiMdGenerator` æ˜¯æ ¸å¿ƒç±»ï¼Œç»§æ‰¿è‡ª `NbPath`ï¼Œæ”¯æŒä¼˜é›…çš„é“¾å¼è°ƒç”¨ã€‚

#### ä¸»è¦æ–¹æ³•

##### 1. `set_project_propery(project_name, project_root)`
è®¾ç½®é¡¹ç›®åç§°å’Œæ ¹ç›®å½•ï¼ˆå¿…é¡»é¦–å…ˆè°ƒç”¨ï¼‰

```python
.set_project_propery(
    project_name="my_project",
    project_root=r"D:\codes\my_project"
)
```

##### 2. `add_project_summary(project_summary, most_core_source_code_file_list)`
æ·»åŠ é¡¹ç›®æ¦‚è¿°å’Œæ ¸å¿ƒæ–‡ä»¶å…ƒæ•°æ®

```python
.add_project_summary(
    project_summary="é¡¹ç›®æè¿°...",
    most_core_source_code_file_list=[
        "src/main.py",  # åªæå–è¿™äº›æ–‡ä»¶çš„ AST å…ƒæ•°æ®ï¼Œä¸åŒ…å«å®Œæ•´æºç 
        "src/api.py",
    ]
)
```

##### 3. `auto_merge_from_python_project_some_files()`
è‡ªåŠ¨åˆå¹¶é¡¹ç›®æ ¹ç›®å½•çš„å…³é”®æ–‡ä»¶ï¼ˆREADME.mdã€setup.pyã€pyproject.tomlï¼‰

```python
.auto_merge_from_python_project_some_files()
```

##### 4. `merge_from_files(relative_file_name_list, as_title)`
åˆå¹¶æŒ‡å®šæ–‡ä»¶åˆ—è¡¨

```python
.merge_from_files(
    relative_file_name_list=["docs/intro.md", "docs/api.md"],
    as_title="é¡¹ç›®æ–‡æ¡£"
)
```

##### 5. `merge_from_dir()` â­ æœ€å¼ºå¤§çš„æ–¹æ³•
åˆå¹¶æ•´ä¸ªç›®å½•çš„æ–‡ä»¶

```python
.merge_from_dir(
    relative_dir_name="src",           # ç›¸å¯¹ç›®å½•å
    as_title="æºä»£ç ",                  # ç« èŠ‚æ ‡é¢˜
    should_include_suffixes=[".py"],   # åŒ…å«çš„æ–‡ä»¶ç±»å‹
    excluded_dir_name_list=[],         # æ’é™¤çš„ç›®å½•åˆ—è¡¨
    excluded_file_name_list=[],        # æ’é™¤çš„æ–‡ä»¶åˆ—è¡¨
    use_gitignore=True,                # ä½¿ç”¨ .gitignore è§„åˆ™
    include_ast_metadata=True,         # åŒ…å« Python AST å…ƒæ•°æ®
)
```

**å‚æ•°è¯´æ˜ï¼š**
- `relative_dir_name`: ç›¸å¯¹äºé¡¹ç›®æ ¹ç›®å½•çš„è·¯å¾„
- `as_title`: åœ¨ç”Ÿæˆçš„ Markdown ä¸­çš„ç« èŠ‚æ ‡é¢˜
- `should_include_suffixes`: åªåŒ…å«è¿™äº›åç¼€çš„æ–‡ä»¶ï¼ˆç•™ç©ºåˆ™åŒ…å«æ‰€æœ‰æ–‡æœ¬æ–‡ä»¶ï¼‰
- `excluded_dir_name_list`: è¦æ’é™¤çš„ç›®å½•åˆ—è¡¨
- `excluded_file_name_list`: è¦æ’é™¤çš„æ–‡ä»¶åˆ—è¡¨
- `use_gitignore`: æ˜¯å¦éµå¾ª `.gitignore` è§„åˆ™ï¼ˆå¼ºçƒˆæ¨èå¼€å¯ï¼‰
- `include_ast_metadata`: å¯¹ Python æ–‡ä»¶æ˜¯å¦ç”Ÿæˆ AST å…ƒæ•°æ®
- `dry_run`: é¢„è§ˆæ¨¡å¼ï¼Œåªæ˜¾ç¤ºå°†è¦åŒ…å«çš„æ–‡ä»¶ï¼Œä¸å®é™…ç”Ÿæˆ

##### 6. `merge_from_files_with_metadata()`
å¸¦å…ƒæ•°æ®çš„æ–‡ä»¶åˆå¹¶ï¼ˆæ›´é«˜çº§çš„æ§åˆ¶ï¼‰

```python
.merge_from_files_with_metadata(
    relative_file_name_list=["src/main.py"],
    as_title="æ ¸å¿ƒä»£ç ",
    include_ast_metadata=True,   # æ˜¯å¦åŒ…å« AST å…ƒæ•°æ®
    include_file_text=True,      # æ˜¯å¦åŒ…å«å®Œæ•´æºç 
)
```

##### 7. `show_textfile_info()`
æ˜¾ç¤ºç”Ÿæˆæ–‡ä»¶çš„ç»Ÿè®¡ä¿¡æ¯

```python
.show_textfile_info()  # æ‰“å°æ–‡ä»¶å¤§å°ã€è¡Œæ•°ç­‰ä¿¡æ¯
```

### GitHub é¡¹ç›®å¤„ç†å‡½æ•°

#### `gen_github_proj_docs_and_codes_ai_md()`
ç”Ÿæˆ GitHub é¡¹ç›®çš„ READMEã€æ–‡æ¡£å’Œæºç 

```python
from nb_ai_context import gen_github_proj_docs_and_codes_ai_md

gen_github_proj_docs_and_codes_ai_md(
    github_zip_url="https://codeload.github.com/owner/repo/zip/refs/heads/main",
    output_md_path="output.md",
    readme_file="README.md",
    docs_dir_name="docs",
    codes_dir_name="src",
    should_include_suffixes=[".py", ".md"],
    excluded_dir_name_list=["tests"],
    excluded_file_name_list=["test_*.py"],
)
```

#### `gen_github_proj_all_dirs_ai_md()`
ç”Ÿæˆ GitHub é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶

```python
from nb_ai_context import gen_github_proj_all_dirs_ai_md

gen_github_proj_all_dirs_ai_md(
    github_zip_url="https://codeload.github.com/owner/repo/zip/refs/heads/main",
    output_md_path="output_all.md",
    should_include_suffixes=[".py", ".java", ".go", ".md"],
    excluded_dir_name_list=["node_modules", ".git"],
)
```

## ğŸ Python AST å…ƒæ•°æ®æå–

å¯¹äº Python æ–‡ä»¶ï¼Œ`nb_ai_context` ä¼šè‡ªåŠ¨æå–ä»¥ä¸‹å…ƒæ•°æ®ï¼š

### æå–å†…å®¹
- âœ… **æ¨¡å—æ–‡æ¡£å­—ç¬¦ä¸²**
- âœ… **å¯¼å…¥è¯­å¥** (import / from import)
- âœ… **ç±»å®šä¹‰**
  - ç±»åã€ç»§æ‰¿å…³ç³»ã€è£…é¥°å™¨
  - ç±»æ–‡æ¡£å­—ç¬¦ä¸²
  - å…¬æœ‰æ–¹æ³•ï¼ˆå«å‚æ•°ç±»å‹ã€è¿”å›å€¼ã€è£…é¥°å™¨ï¼‰
  - å±æ€§ (@property)
  - ç±»å˜é‡
- âœ… **é¡¶çº§å‡½æ•°**
  - å‡½æ•°ç­¾åï¼ˆå‚æ•°ç±»å‹ã€é»˜è®¤å€¼ã€è¿”å›å€¼ï¼‰
  - è£…é¥°å™¨
  - æ–‡æ¡£å­—ç¬¦ä¸²
  - å¼‚æ­¥å‡½æ•°æ ‡è¯†

### å…ƒæ•°æ®ç¤ºä¾‹è¾“å‡º

```markdown
### ğŸ“„ Python File Metadata: `src/main.py`

#### ğŸ“ Module Docstring
```
è¿™æ˜¯ä¸»æ¨¡å—ï¼ŒåŒ…å«åº”ç”¨çš„å…¥å£ç‚¹
```

#### ğŸ“¦ Imports
- `import os`
- `from typing import List, Optional`
- `from fastapi import FastAPI`

#### ğŸ›ï¸ Classes (2)

##### ğŸ“Œ `class UserService(BaseService)`
*Line: 15*

**Docstring:**
```
ç”¨æˆ·æœåŠ¡ç±»ï¼Œå¤„ç†ç”¨æˆ·ç›¸å…³çš„ä¸šåŠ¡é€»è¾‘
```

**Public Methods (3):**
- `def get_user(user_id: int) -> Optional[User]`
  - *è·å–ç”¨æˆ·ä¿¡æ¯*
- `async def create_user(name: str, email: str) -> User`
  - *åˆ›å»ºæ–°ç”¨æˆ·*
- `def update_user(user_id: int, **kwargs) -> bool`

**Properties (1):**
- `@property user_count -> int`

#### ğŸ”§ Public Functions (2)
- `async def startup_event() -> None`
  - *Line: 120*
  - *åº”ç”¨å¯åŠ¨äº‹ä»¶å¤„ç†*
```

## ğŸ¨ ç”Ÿæˆçš„ Markdown ç»“æ„

ç”Ÿæˆçš„ Markdown æ–‡æ¡£ç»“æ„æ¸…æ™°ï¼ŒåŒ…å«ï¼š

```markdown
# markdown content namespace: é¡¹ç›®æ¦‚è¿°

é¡¹ç›®æè¿°...

## ğŸ“‹ Core Source Files Metadata (Entry Points)
æ ¸å¿ƒæ–‡ä»¶çš„ AST å…ƒæ•°æ®ï¼ˆä¸å«æºç ï¼‰

---

# markdown content namespace: é¡¹ç›®æ ¹ç›®å½•æ–‡ä»¶

## File Tree
```
â”œâ”€â”€ README.md
â”œâ”€â”€ setup.py
â””â”€â”€ pyproject.toml
```

## Included Files
- `README.md`
- `setup.py`
- `pyproject.toml`

---

--- **start of file: README.md** ---
ï¼ˆæ–‡ä»¶å†…å®¹ï¼‰
--- **end of file: README.md** ---

---

# markdown content namespace: æºä»£ç 

## File Tree
ï¼ˆæ–‡ä»¶æ ‘ï¼‰

## Included Files
ï¼ˆæ–‡ä»¶åˆ—è¡¨ï¼‰

--- **start of file: src/main.py** ---

### ğŸ“„ Python File Metadata: `src/main.py`
ï¼ˆAST å…ƒæ•°æ®ï¼‰

```python
ï¼ˆå®Œæ•´æºç ï¼‰
```

--- **end of file: src/main.py** ---
```

## ğŸ”§ é«˜çº§ç”¨æ³•

### 1. é¢„è§ˆæ¨¡å¼ï¼ˆDry Runï¼‰

```python
(
    AiMdGenerator("output.md")
    .set_project_propery("my_project", r"D:\codes\my_project")
    .merge_from_dir(
        relative_dir_name="src",
        as_title="æºä»£ç ",
        dry_run=True,  # åªé¢„è§ˆï¼Œä¸å®é™…ç”Ÿæˆ
    )
)
```

### 2. åªæå–å…ƒæ•°æ®ï¼Œä¸åŒ…å«æºç 

```python
(
    AiMdGenerator("output.md")
    .set_project_propery("my_project", r"D:\codes\my_project")
    .merge_from_files_with_metadata(
        relative_file_name_list=["src/main.py"],
        as_title="æ ¸å¿ƒä»£ç æ¶æ„",
        include_ast_metadata=True,  # åŒ…å«å…ƒæ•°æ®
        include_file_text=False,    # ä¸åŒ…å«æºç 
    )
)
```

### 3. æ”¯æŒçš„æ–‡ä»¶ç±»å‹

`AiMdGenerator` æ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€çš„è¯­æ³•é«˜äº®ï¼š

```python
suffix__lang_map = {
    ".py": "python",
    ".java": "java",
    ".go": "go",
    ".js": "javascript",
    ".ts": "typescript",
    ".jsx": "javascript",
    ".tsx": "typescript",
    ".vue": "vue",
    ".php": "php",
    ".c": "c",
    ".cpp": "cpp",
    ".cs": "csharp",
    ".sql": "sql",
    ".sh": "shell",
    ".ps1": "powershell",
    ".md": "markdown",
    ".json": "json",
    ".yaml": "yaml",
    ".xml": "xml",
    ".html": "html",
    ".css": "css",
    # ... æ›´å¤š
}
```

## ğŸ¯ å®é™…åº”ç”¨åœºæ™¯

### 1. AI ä»£ç å®¡æŸ¥
ç”Ÿæˆå®Œæ•´é¡¹ç›®ä¸Šä¸‹æ–‡ï¼Œè®© AI å…¨é¢å®¡æŸ¥ä»£ç è´¨é‡ã€å®‰å…¨æ¼æ´ã€æ€§èƒ½é—®é¢˜ã€‚

### 2. æŠ€æœ¯æ–‡æ¡£ç”Ÿæˆ
å¿«é€Ÿä¸ºæ–°å›¢é˜Ÿæˆå‘˜ç”Ÿæˆé¡¹ç›®æ¦‚è§ˆæ–‡æ¡£ï¼Œé…åˆ AI è§£é‡Šä»£ç é€»è¾‘ã€‚

### 3. çŸ¥è¯†åº“æ„å»º
å°†é¡¹ç›®å†…å®¹å¯¼å…¥ RAG çŸ¥è¯†åº“ï¼Œå®ç°æ™ºèƒ½ä»£ç æœç´¢å’Œé—®ç­”ã€‚

### 4. é¡¹ç›®è¿ç§»å’Œé‡æ„
è®© AI ç†è§£æ•´ä¸ªé¡¹ç›®åï¼Œæä¾›é‡æ„å»ºè®®æˆ–è¿ç§»åˆ°æ–°æ¡†æ¶ã€‚

### 5. å­¦ä¹ å¼€æºé¡¹ç›®
ä¸‹è½½ GitHub é¡¹ç›®åç”Ÿæˆç»“æ„åŒ–æ–‡æ¡£ï¼Œé…åˆ AI å¿«é€Ÿç†è§£é¡¹ç›®æ¶æ„ã€‚

## ğŸ”’ å®‰å…¨æ€§

### `.gitignore` æ”¯æŒ

è®¾ç½® `use_gitignore=True` æ—¶ï¼Œä¼šè‡ªåŠ¨éµå¾ªé¡¹ç›®çš„ `.gitignore` è§„åˆ™ï¼š

```python
.merge_from_dir(
    relative_dir_name="src",
    use_gitignore=True,  # è‡ªåŠ¨æ’é™¤ .envã€*.log ç­‰æ•æ„Ÿæ–‡ä»¶
)
```

### è‡ªåŠ¨æ’é™¤
- è‡ªåŠ¨æ’é™¤ä»¥ `.` å¼€å¤´çš„éšè—ç›®å½•ï¼ˆå¦‚ `.git`ã€`.venv`ï¼‰
- æ”¯æŒæ‰‹åŠ¨æ’é™¤ç‰¹å®šç›®å½•å’Œæ–‡ä»¶

## ğŸ“Š æ€§èƒ½ç‰¹æ€§

- âœ… é«˜æ•ˆçš„æ–‡ä»¶éå†å’Œè¿‡æ»¤
- âœ… æ™ºèƒ½æ–‡æœ¬æ–‡ä»¶æ£€æµ‹
- âœ… æ”¯æŒå¤§å‹é¡¹ç›®ï¼ˆæ•°åƒä¸ªæ–‡ä»¶ï¼‰
- âœ… é“¾å¼è°ƒç”¨ï¼Œä»£ç ç®€æ´ä¼˜é›…

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ”— ç›¸å…³é“¾æ¥

- **GitHub**: https://github.com/ydf0509/nb_ai_context
- **PyPI**: https://pypi.org/project/nb_ai_context/
- **Issues**: https://github.com/ydf0509/nb_ai_context/issues

## ğŸ’¡ å¸¸è§é—®é¢˜

### Q: ç”Ÿæˆçš„ Markdown æ–‡ä»¶å¤ªå¤§æ€ä¹ˆåŠï¼Ÿ
A: ä½¿ç”¨ `should_include_suffixes` é™åˆ¶æ–‡ä»¶ç±»å‹ï¼Œæˆ–ä½¿ç”¨ `excluded_dir_name_list` æ’é™¤ä¸é‡è¦çš„ç›®å½•ï¼ˆå¦‚ `node_modules`ã€`venv`ï¼‰ã€‚

### Q: å¦‚ä½•åªç”Ÿæˆä»£ç ç»“æ„ï¼Œä¸åŒ…å«æºç ï¼Ÿ
A: ä½¿ç”¨ `merge_from_files_with_metadata()` æ–¹æ³•ï¼Œè®¾ç½® `include_file_text=False`ã€‚

### Q: æ”¯æŒå“ªäº›ç¼–ç¨‹è¯­è¨€ï¼Ÿ
A: æ‰€æœ‰æ–‡æœ¬æ–‡ä»¶éƒ½æ”¯æŒï¼Œä½† Python æ–‡ä»¶æœ‰ç‰¹æ®Šçš„ AST å…ƒæ•°æ®æå–æ”¯æŒã€‚



## ğŸŒŸ Star History

å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ª Star â­ï¸ï¼

---

**nb_ai_context** - è®© AI çœŸæ­£ç†è§£ä½ çš„ä»£ç  ğŸš€

`````

--- **end of file: README.md** --- 

---


--- **start of file: pyproject.toml** --- 

`````text
[build-system]
requires = ["setuptools>=45", "wheel", "setuptools_scm[toml]>=6.2"]
build-backend = "setuptools.build_meta"

[project]
name = "nb_ai_context"
version = "1.5"
description = "éå¸¸å¼ºåŠ›çš„å¯¹ä»»æ„ité¡¹ç›®ç”Ÿæˆaiä¸Šä¸‹æ–‡å•ä¸ªmarkdownæ–‡æ¡£ï¼Œä¸¢ç»™å¤§æ¨¡å‹æˆ–è€…çŸ¥è¯†åº“ï¼Œéå¸¸å¼ºåŠ›ï¼Œå¤§æ¨¡å‹å¹»è§‰å¤§å¹…åº¦å‡å°‘ã€‚å°¤å…¶æ˜¯å¯¹pythoné¡¹ç›®è¿˜æœ‰ä¸“é—¨çš„astè¯­æ³•æ ‘è§£æ"
keywords = ["ai", "ai context", "llm", "rag", "python","ast","ast metadata","ai context generator","markdown"]
authors = [
    {name = "ydf0509", email = "ydf0509@xxx.com"},
]
license = {text = "MIT"}
readme = "README.md"
requires-python = ">=3.7"
classifiers = [
    "Development Status :: 3 - Alpha",
    "Intended Audience :: Developers",
    "License :: OSI Approved :: MIT License",
    "Programming Language :: Python :: 3",
    "Programming Language :: Python :: 3.7",
    "Programming Language :: Python :: 3.8",
    "Programming Language :: Python :: 3.9",
    "Programming Language :: Python :: 3.10",
    "Programming Language :: Python :: 3.11",
    "Programming Language :: Python :: 3.12",
    "Programming Language :: Python :: 3.13",
    "Programming Language :: Python :: 3.14",
]
dependencies = [
    "typing_extensions>=3.7; python_version < '3.8'",
    "nb_path",
    "nb_log",
]

[project.optional-dependencies]
test = [
    "pytest>=6.0",
    "pytest-asyncio>=0.14",
]
dev = [
    "black>=21.0",
    "flake8>=3.8",
    "mypy>=0.812",
]

[project.urls]
Homepage = "https://github.com/ydf0509/nb_ai_context"
Repository = "https://github.com/ydf0509/nb_ai_context"
Issues = "https://github.com/ydf0509/nb_ai_context/issues"

[tool.setuptools.packages.find]
where = ["."]
include = ["nb_ai_context*"]

[tool.setuptools.package-data]
nb_ai_context = ["py.typed", "contrib/README.md"]

`````

--- **end of file: pyproject.toml** --- 

---

# markdown content namespace: nb_ai_context examples 


## File Tree


`````

â””â”€â”€ examples
    â””â”€â”€ AiMdGenerator_example.py

`````

---


## Included Files


- `examples/AiMdGenerator_example.py`


---


--- **start of file: examples/AiMdGenerator_example.py** --- 


### ğŸ“„ Python File Metadata: `examples/AiMdGenerator_example.py`

#### ğŸ“¦ Imports

- `from nb_ai_context import AiMdGenerator`


---

`````python
from nb_ai_context import AiMdGenerator


project_name = "nb_ai_context"
project_root = rf"D:\codes\{project_name}"

project_summary = f"""
- `{project_name}` is a powerful ai llm context gennerator library ,it is uesd for ai llm and rag
- `AiMdGenerator(...)` is the main class to create ai context for llm.
"""


(
    AiMdGenerator(
        rf"D:\codes\nb_ai_context\ai_md_files_demo\{project_name}_all_docs_and_codes.md"
    )
    .set_project_propery(project_name=project_name, project_root=project_root)
    .ensure_parent()
    .clear_text()
    .add_project_summary(
        project_summary=project_summary,
        most_core_source_code_file_list=[
            "nb_ai_context/__init__.py",
            "nb_ai_context/ai_md_generator.py",
            "nb_ai_context/contrib/gen_github_proj_ai_md.py",
        ],
    )
    .auto_merge_from_python_project_some_files()
    .show_textfile_info()
    .merge_from_dir(
        relative_dir_name='examples',
        use_gitignore=True,
        as_title=f"{project_name} examples",
        # åªåŒ…å« .py å’Œ .md æ–‡ä»¶
        should_include_suffixes=[".py", ".md"],
        # æ’é™¤ __pycache__ ç›®å½•å’Œç‰¹å®šçš„æµ‹è¯•æ–‡ä»¶
        excluded_dir_name_list=[],
        include_ast_metadata=True,
    )
    .merge_from_dir(
        relative_dir_name=project_name,
        use_gitignore=True,
        as_title=f"{project_name} codes",
        # åªåŒ…å« .py å’Œ .md æ–‡ä»¶
        should_include_suffixes=[".py", ".md"],
        # æ’é™¤ __pycache__ ç›®å½•å’Œç‰¹å®šçš„æµ‹è¯•æ–‡ä»¶
        excluded_dir_name_list=[],
        include_ast_metadata=True,
    )
    .show_textfile_info()
)

`````

--- **end of file: examples/AiMdGenerator_example.py** --- 

---

# markdown content namespace: nb_ai_context codes 


## File Tree


`````

â””â”€â”€ nb_ai_context
    â”œâ”€â”€ __init__.py
    â”œâ”€â”€ ai_md_generator.py
    â””â”€â”€ contrib
        â”œâ”€â”€ about.md
        â””â”€â”€ gen_github_proj_ai_md.py

`````

---


## Included Files


- `nb_ai_context/ai_md_generator.py`

- `nb_ai_context/__init__.py`

- `nb_ai_context/contrib/about.md`

- `nb_ai_context/contrib/gen_github_proj_ai_md.py`


---


--- **start of file: nb_ai_context/ai_md_generator.py** --- 


### ğŸ“„ Python File Metadata: `nb_ai_context/ai_md_generator.py`

#### ğŸ“¦ Imports

- `import typing`
- `import os`
- `import fnmatch`
- `import ast`
- `from nb_path import NbPath`
- `import astor`

#### ğŸ›ï¸ Classes (1)

##### ğŸ“Œ `class AiMdGenerator(NbPath)`
*Line: 10*

**Docstring:**
`````
An extremely powerful context generator born for AI collaboration.

This class is designed to revolutionize how developers interact with Large Language
Models (LLMs). It intelligently merges multiple project source files into a single,
well-structured, and context-rich Markdown file, providing the AI with a perfect
and comprehensive project snapshot.

The benefits for large AI models are immense:
1.  **Provides a God's-eye View**: Through a file manifest, clear file boundaries,
    and relative paths, the AI can easily construct the project's overall
    architecture and understand file dependencies and relationships, rather than
    fumbling in the dark.
2.  **Ensures Information Integrity and Accuracy**: The AI receives complete,
    unabridged source file content, avoiding the chaos, omissions, or context
    loss caused by manual copy-pasting. This enables it to provide more precise
    analysis and suggestions.
3.  **Enhances Security**: The built-in `use_gitignore` feature is a critical
    security barrier. It automatically ignores files containing sensitive
    information (like API keys or database passwords) such as `.env` or local
    configs, allowing you to share code without fear of accidental leaks.

Its core methods, `merge_from_files` and `merge_from_dir`, offer extreme
flexibility. Combined with the elegant chainable calls of `nb_path`, creating a
high-quality AI context is transformed from a tedious, error-prone manual task
into a single, delightful line of code.

Example:
    >>> # Imagine you want an AI to review your entire project
    >>> project_name = "my_project"
    >>> project_summary = '''
    ... This is an excellent Python project that demonstrates best practices.
    ... It includes comprehensive documentation and well-structured code.
    ... '''
    >>> 
    >>> (
    ...     AiMdGenerator("project_context_for_ai.md")
    ...     .set_project_propery(project_name=project_name, project_root="/path/to/your/project")
    ...     .clear_text()  # Clear the old file
    ...     .add_project_summary(
    ...         project_summary=project_summary,
    ...         # Extract metadata (without full source) from core files first
    ...         most_core_source_code_file_list=[
    ...             "src/main.py",
    ...             "src/api.py",
    ...             "src/models.py",
    ...         ]
    ...     )
    ...     .auto_merge_from_python_project_some_files()  # Auto-include README, setup.py, etc.
    ...     .merge_from_dir(
    ...         relative_dir_name="src", # The main source code directory
    ...         as_title="Project Source Code",
    ...         use_gitignore=True,  # Automatically use .gitignore rules
    ...         should_include_suffixes=[".py", ".md"], # Only include specified file types
    ...         include_ast_metadata=True,  # Include AST metadata for Python files
    ...     )
    ...     .merge_from_dir(
    ...         relative_dir_name="tests", # The tests directory
    ...         as_title="Project Tests",
    ...         use_gitignore=True,
    ...         should_include_suffixes=[".py"],
    ...         excluded_dir_name_list=["tests/temp_files"],
    ...         include_ast_metadata=True,
    ...     )
    ... )
`````

**Public Methods (7):**
- `def set_project_propery(self, project_name: str, project_root: typing.Union[os.PathLike, str]) -> 'AiMdGenerator'`
  - *Sets the project name for the current markdown file.*
- `def add_project_summary(self, project_summary: str, most_core_source_code_file_list: typing.List[str] = None, project_root: typing.Union[os.PathLike, str] = None) -> 'AiMdGenerator'`
  - **Docstring:**
  `````
  Adds a project summary to the current markdown file.
  
  Args:
      project_summary: é¡¹ç›®æ¦‚è¿°æ–‡æœ¬
      project_root: é¡¹ç›®æ ¹ç›®å½•ï¼ˆå¦‚æœæä¾›äº† most_core_source_code_file_listï¼‰
      most_core_source_code_file_list: æœ€æ ¸å¿ƒçš„æºç æ–‡ä»¶åˆ—è¡¨ï¼ˆç›¸å¯¹è·¯å¾„ï¼‰
                                       åªæå–è¿™äº›æ–‡ä»¶çš„ AST å…ƒæ•°æ®ï¼Œä¸åŒ…å«å®Œæ•´æºç 
  
  Example:
      >>> (
      ...     AiMdGenerator("output.md")
      ...     .set_project_name("my_project")
      ...     .clear_text()
      ...     .add_project_summary(
      ...         project_summary="è¿™æ˜¯ä¸€ä¸ªä¼˜ç§€çš„é¡¹ç›®...",
      ...         project_root="/path/to/project",
      ...         most_core_source_code_file_list=["src/main.py", "src/api.py"],
      ...     )
      ... )
  `````
- `def auto_merge_from_python_project_some_files(self, project_root: typing.Union[os.PathLike, str] = None) -> 'AiMdGenerator'`
  - *è‡ªåŠ¨åˆå¹¶é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ readme.md æˆ–è€…ReADME.md ä»¥åŠsetup.py å’Œ pyproject.toml ï¼Œå¦‚æœæœ‰å°±æ·»åŠ *
- `def merge_from_files(self, relative_file_name_list: typing.List[str], as_title: str, project_root: typing.Union[os.PathLike, str] = None) -> 'AiMdGenerator'`
  - **Docstring:**
  `````
  Merges the content of the given files into the current markdown file.
  the current markdown file will be used to upload to ai model for code review and learning.
  `````
- `def merge_from_dir(self, relative_dir_name: str, as_title: str, project_root: typing.Union[os.PathLike, str] = None, should_include_suffixes: typing.List[str] = [], excluded_dir_name_list: typing.List[str] = [], excluded_file_name_list: typing.List[str] = [], use_gitignore: bool = True, dry_run: bool = False, include_ast_metadata: bool = True) -> 'AiMdGenerator'`
  - *Merges the content of the given directory into the current file.*
- `def merge_dir_of_package_examples(self)`
  - *åˆå¹¶åŒ…çš„examplesç›®å½•åˆ°å½“å‰markdownæ–‡ä»¶*
- `def merge_from_files_with_metadata(self, relative_file_name_list: typing.List[str], as_title: str, project_root: typing.Union[os.PathLike, str] = None, include_ast_metadata: bool = True, include_file_text: bool = True) -> 'AiMdGenerator'`
  - **Docstring:**
  `````
  åˆå¹¶æ–‡ä»¶å†…å®¹åˆ° Markdownï¼Œå¯¹äº Python æ–‡ä»¶ä¼šé¢å¤–ç”Ÿæˆ AST å…ƒæ•°æ®
  
  Args:
      project_root: é¡¹ç›®æ ¹ç›®å½•
      relative_file_name_list: ç›¸å¯¹æ–‡ä»¶è·¯å¾„åˆ—è¡¨
      as_title: æ ‡é¢˜
      include_ast_metadata: æ˜¯å¦åŒ…å« AST å…ƒæ•°æ®ï¼ˆä»…å¯¹ .py æ–‡ä»¶ï¼‰
      include_file_text: æ˜¯å¦åŒ…å«å®Œæ•´æ–‡ä»¶æºç ï¼ˆFalse æ—¶åªæ˜¾ç¤ºå…ƒæ•°æ®ï¼‰
  `````

**Class Variables (1):**
- `suffix__lang_map = {'.py': 'python', '.md': 'markdown', '.txt': 'text...`


---

`````python
import typing
import os
import fnmatch
import ast

from nb_path import NbPath

FILE_CONTENT_BACKQUOTES = "`````"  # ä¸ç”¨åä¸‰å¼•å·æ˜¯ä¸ºäº†é¿å…ä¸è¢«åˆå¹¶çš„æœ¬èº«å°±æ˜¯.mdæ–‡ä»¶çš„é‡Œé¢çš„åä¸‰å¼•å·å†²çªï¼Œå¯¼è‡´æ–‡ä»¶å—æå‰åˆ¤æ–­ç»“æŸ

class AiMdGenerator(NbPath):
    """
    An extremely powerful context generator born for AI collaboration.

    This class is designed to revolutionize how developers interact with Large Language
    Models (LLMs). It intelligently merges multiple project source files into a single,
    well-structured, and context-rich Markdown file, providing the AI with a perfect
    and comprehensive project snapshot.

    The benefits for large AI models are immense:
    1.  **Provides a God's-eye View**: Through a file manifest, clear file boundaries,
        and relative paths, the AI can easily construct the project's overall
        architecture and understand file dependencies and relationships, rather than
        fumbling in the dark.
    2.  **Ensures Information Integrity and Accuracy**: The AI receives complete,
        unabridged source file content, avoiding the chaos, omissions, or context
        loss caused by manual copy-pasting. This enables it to provide more precise
        analysis and suggestions.
    3.  **Enhances Security**: The built-in `use_gitignore` feature is a critical
        security barrier. It automatically ignores files containing sensitive
        information (like API keys or database passwords) such as `.env` or local
        configs, allowing you to share code without fear of accidental leaks.

    Its core methods, `merge_from_files` and `merge_from_dir`, offer extreme
    flexibility. Combined with the elegant chainable calls of `nb_path`, creating a
    high-quality AI context is transformed from a tedious, error-prone manual task
    into a single, delightful line of code.

    Example:
        >>> # Imagine you want an AI to review your entire project
        >>> project_name = "my_project"
        >>> project_summary = '''
        ... This is an excellent Python project that demonstrates best practices.
        ... It includes comprehensive documentation and well-structured code.
        ... '''
        >>> 
        >>> (
        ...     AiMdGenerator("project_context_for_ai.md")
        ...     .set_project_propery(project_name=project_name, project_root="/path/to/your/project")
        ...     .clear_text()  # Clear the old file
        ...     .add_project_summary(
        ...         project_summary=project_summary,
        ...         # Extract metadata (without full source) from core files first
        ...         most_core_source_code_file_list=[
        ...             "src/main.py",
        ...             "src/api.py",
        ...             "src/models.py",
        ...         ]
        ...     )
        ...     .auto_merge_from_python_project_some_files()  # Auto-include README, setup.py, etc.
        ...     .merge_from_dir(
        ...         relative_dir_name="src", # The main source code directory
        ...         as_title="Project Source Code",
        ...         use_gitignore=True,  # Automatically use .gitignore rules
        ...         should_include_suffixes=[".py", ".md"], # Only include specified file types
        ...         include_ast_metadata=True,  # Include AST metadata for Python files
        ...     )
        ...     .merge_from_dir(
        ...         relative_dir_name="tests", # The tests directory
        ...         as_title="Project Tests",
        ...         use_gitignore=True,
        ...         should_include_suffixes=[".py"],
        ...         excluded_dir_name_list=["tests/temp_files"],
        ...         include_ast_metadata=True,
        ...     )
        ... )
    """

    """cn description
    ä¸€ä¸ªæå…¶å¼ºå¤§çš„ã€ä¸º AI åä½œè€Œç”Ÿçš„ä¸Šä¸‹æ–‡ç”Ÿæˆå™¨ã€‚

    æ­¤ç±»æ—¨åœ¨å½»åº•æ”¹å˜å¼€å‘è€…ä¸å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰çš„äº¤äº’æ–¹å¼ã€‚å®ƒèƒ½å¤Ÿæ™ºèƒ½åœ°å°†å¤šä¸ªé¡¹ç›®æºæ–‡ä»¶
    åˆå¹¶æˆä¸€ä¸ªç»“æ„æ¸…æ™°ã€ä¸Šä¸‹æ–‡ä¸°å¯Œçš„å•ä¸€ Markdown æ–‡ä»¶ï¼Œä»è€Œä¸º AI æä¾›ä¸€ä¸ªå®Œç¾ã€å…¨é¢çš„é¡¹ç›®å¿«ç…§ã€‚

    å¯¹ AI å¤§æ¨¡å‹çš„å¥½å¤„æ˜¯å·¨å¤§çš„ï¼š
    1.  **æä¾›ä¸Šå¸è§†è§’**ï¼šé€šè¿‡æ–‡ä»¶æ¸…å•ã€æ¸…æ™°çš„æ–‡ä»¶è¾¹ç•Œå’Œç›¸å¯¹è·¯å¾„ï¼ŒAI èƒ½å¤Ÿè½»æ¾æ„å»ºå‡ºé¡¹ç›®çš„
        æ•´ä½“æ¶æ„ï¼Œç†è§£æ–‡ä»¶é—´çš„ä¾èµ–å’Œå¼•ç”¨å…³ç³»ï¼Œè€Œä¸æ˜¯ç›²äººæ‘¸è±¡ã€‚
    2.  **ç¡®ä¿ä¿¡æ¯çš„å®Œæ•´ä¸å‡†ç¡®**ï¼šAI å¾—åˆ°çš„æ˜¯æœªç»åˆ å‡çš„ã€å®Œæ•´çš„æºæ–‡ä»¶å†…å®¹ï¼Œé¿å…äº†å› æ‰‹åŠ¨
        å¤åˆ¶ç²˜è´´å¯¼è‡´çš„æ ¼å¼æ··ä¹±ã€å†…å®¹é—æ¼æˆ–ä¸Šä¸‹æ–‡ç¼ºå¤±ï¼Œä»è€Œèƒ½ç»™å‡ºæ›´ç²¾å‡†çš„åˆ†æå’Œå»ºè®®ã€‚
    3.  **æå‡å®‰å…¨æ€§**ï¼šå†…ç½®çš„ `use_gitignore` åŠŸèƒ½æ˜¯ä¸€é“å…³é”®çš„å®‰å…¨å±éšœã€‚å®ƒèƒ½è‡ªåŠ¨å¿½ç•¥
        `.env`ã€æœ¬åœ°é…ç½®ç­‰åŒ…å«æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚ API å¯†é’¥ã€æ•°æ®åº“å¯†ç ï¼‰çš„æ–‡ä»¶ï¼Œè®©ä½ åœ¨åˆ†äº«ä»£ç 
        æ—¶æ— éœ€æ‹…å¿ƒæ„å¤–æ³„éœ²ç§˜å¯†ã€‚

    å…¶æ ¸å¿ƒæ–¹æ³• `merge_from_files` å’Œ `merge_from_dir` æä¾›äº†æé«˜çš„çµæ´»æ€§ï¼Œç»“åˆ `nb_path`
    ä¼˜é›…çš„é“¾å¼è°ƒç”¨ï¼Œä½¿å¾—åˆ›å»ºä¸€ä¸ªé«˜è´¨é‡çš„ AI ä¸Šä¸‹æ–‡ä»ç¹çã€æ˜“é”™çš„æ‰‹å·¥åŠ³åŠ¨ï¼Œå˜æˆäº†ä¸€è¡Œ
    èµå¿ƒæ‚¦ç›®çš„ä»£ç ã€‚

    """

    suffix__lang_map = {
        ".py": "python",
        ".md": "markdown",
        ".txt": "text",
        ".json": "json",
        ".yaml": "yaml",
        ".yml": "yaml",
        ".xml": "xml",
        ".html": "html",
        ".css": "css",
        ".js": "javascript",
        ".ts": "typescript",
        ".jsx": "javascript",
        ".tsx": "typescript",
        ".vue": "vue",
        ".php": "php",
        ".java": "java",
        ".c": "c",
        ".cpp": "cpp",
        ".h": "h",
        ".hpp": "hpp",
        ".cs": "csharp",
        ".vb": "vb",
        ".sql": "sql",
        ".bat": "batch",
        ".sh": "shell",
        ".ps1": "powershell",
        ".psm1": "powershell",
        ".psd1": "powershell",
        ".pssc": "powershell",
        ".psscx": "powershell",
    }

    def set_project_propery(self, project_name: str, project_root: typing.Union[os.PathLike, str] ) -> "AiMdGenerator":
        """Sets the project name for the current markdown file."""
        self.project_name = project_name
        self.project_root = project_root
        return self
    
    def _check_project_name(self) -> "AiMdGenerator":
        """Checks if the project name is set."""
        if not hasattr(self, 'project_name'):
            raise ValueError("Project name is not set. Please call set_project_name() first.")
        return self

    def add_project_summary(
        self, 
        project_summary: str, 
        most_core_source_code_file_list: typing.List[str] = None,
        project_root: typing.Union[os.PathLike, str] = None,
    ) -> "AiMdGenerator":
        """
        Adds a project summary to the current markdown file.
        
        Args:
            project_summary: é¡¹ç›®æ¦‚è¿°æ–‡æœ¬
            project_root: é¡¹ç›®æ ¹ç›®å½•ï¼ˆå¦‚æœæä¾›äº† most_core_source_code_file_listï¼‰
            most_core_source_code_file_list: æœ€æ ¸å¿ƒçš„æºç æ–‡ä»¶åˆ—è¡¨ï¼ˆç›¸å¯¹è·¯å¾„ï¼‰
                                             åªæå–è¿™äº›æ–‡ä»¶çš„ AST å…ƒæ•°æ®ï¼Œä¸åŒ…å«å®Œæ•´æºç 
        
        Example:
            >>> (
            ...     AiMdGenerator("output.md")
            ...     .set_project_name("my_project")
            ...     .clear_text()
            ...     .add_project_summary(
            ...         project_summary="è¿™æ˜¯ä¸€ä¸ªä¼˜ç§€çš„é¡¹ç›®...",
            ...         project_root="/path/to/project",
            ...         most_core_source_code_file_list=["src/main.py", "src/api.py"],
            ...     )
            ... )
        """
        self._check_project_name()
        project_root =  project_root or self.project_root 
        str_list = [f"# markdown content namespace: {self.project_name} project summary \n\n"]
        str_list.append(project_summary)
        # str_list.append("\n---\n\n")
        
        # å¦‚æœæä¾›äº†æ ¸å¿ƒæ–‡ä»¶åˆ—è¡¨ï¼Œæå–å®ƒä»¬çš„å…ƒæ•°æ®ï¼ˆä¸åŒ…å«æºç ï¼‰
        if most_core_source_code_file_list and project_root:
            # str_list.append("\n---\n\n")
            str_list.append(f"\n## ğŸ“‹ {self.project_name} most core source files metadata (Entry Points)\n\n")
            str_list.append(f"ä»¥ä¸‹æ˜¯é¡¹ç›® {self.project_name} æœ€æ ¸å¿ƒçš„å…¥å£æ–‡ä»¶çš„ç»“æ„åŒ–å…ƒæ•°æ®ï¼Œå¸®åŠ©å¿«é€Ÿç†è§£é¡¹ç›®æ¶æ„ï¼š\n\n")
            most_core_source_code_file_list_str = ''
            for relative_file_name in most_core_source_code_file_list:
                most_core_source_code_file_list_str += f"- `{relative_file_name}`\n"
            str_list.append(f'\n### the project {self.project_name} most core source code files as follows: \n{most_core_source_code_file_list_str}')
            
            
            project_root_path = NbPath(project_root).resolve()
            
            for relative_file_name in most_core_source_code_file_list:
                file = (project_root_path / relative_file_name).resolve()
                if not file.exists():
                    raise FileNotFoundError(f"File {file} not found.")

                if file.is_file() and file.is_text() and file.suffix == ".py":
                    relative_file_name_posix = file.relative_to(project_root_path).as_posix()
                    
                    self.logger.info(f"æå–æ ¸å¿ƒæ–‡ä»¶å…ƒæ•°æ®ï¼ˆæ— æºç ï¼‰: {relative_file_name_posix}")
                    
                    # åªæå–å…ƒæ•°æ®ï¼Œä¸åŒ…å«æºç 
                    metadata = self._parse_python_file_ast(file)
                    metadata_md = self._format_py_metadata_as_markdown(metadata, relative_file_name_posix)
                    str_list.append(metadata_md)
                    str_list.append("\n")
        
        self.append_text('\n'.join(str_list))
        return self

    def _generate_markdown_header(self, as_title: str, file_text_list: list) -> list:
        """ç”ŸæˆåŒ…å«æ–‡ä»¶æ ‘å’Œæ–‡ä»¶åˆ—è¡¨çš„ Markdown å¤´éƒ¨"""
        str_list = [f"# markdown content namespace: {as_title} \n\n"]

        # 1. ç”Ÿæˆæ–‡ä»¶æ ‘
        str_list.append("## File Tree\n\n")
        str_list.append(f"{FILE_CONTENT_BACKQUOTES}\n")
        tree = {}
        sorted_paths = sorted([item[1] for item in file_text_list])
        for path in sorted_paths:
            parts = path.split('/')
            current_level = tree
            for part in parts:
                if part not in current_level:
                    current_level[part] = {}
                current_level = current_level[part]

        def format_tree(node, prefix=""):
            lines = []
            entries = sorted(node.keys())
            for i, entry in enumerate(entries):
                connector = "â”œâ”€â”€ " if i < len(entries) - 1 else "â””â”€â”€ "
                lines.append(f"{prefix}{connector}{entry}")
                if node[entry]:
                    extension = "â”‚   " if i < len(entries) - 1 else "    "
                    lines.extend(format_tree(node[entry], prefix + extension))
            return lines

        str_list.extend(format_tree(tree))
        str_list.append(f"\n{FILE_CONTENT_BACKQUOTES}\n\n---\n\n")

        # 2. ç”Ÿæˆæ–‡ä»¶åˆ—è¡¨
        str_list.append("## Included Files\n\n")
        for _, relative_file_name_posix, _, _ in file_text_list:
            str_list.append(f"- `{relative_file_name_posix}`\n")
        str_list.append("\n---\n\n")

        return str_list

    def auto_merge_from_python_project_some_files(self, project_root: typing.Union[os.PathLike, str] = None) -> 'AiMdGenerator':
        """è‡ªåŠ¨åˆå¹¶é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ readme.md æˆ–è€…ReADME.md ä»¥åŠsetup.py å’Œ pyproject.toml ï¼Œå¦‚æœæœ‰å°±æ·»åŠ """
        self._check_project_name()
        project_root =  project_root or self.project_root
        file_merge_list = []
        
        # å®šä¹‰è¦æŸ¥æ‰¾çš„æ ¹ç›®å½•æ–‡ä»¶
        root_files_to_check = [
            "README.md",
            # "readme.md",
            "setup.py",
            "pyproject.toml"
        ]
        
        # æ£€æŸ¥æ¯ä¸ªæ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨åˆ™æ·»åŠ åˆ°åˆå¹¶åˆ—è¡¨ä¸­
        project_root_path = NbPath(project_root).resolve()
        for filename in root_files_to_check:
            file_path = project_root_path / filename
            if file_path.is_file() and file_path.is_text():
                file_merge_list.append(filename)
                
        self.merge_from_files(file_merge_list, f"{self.project_name} Project Root Dir Some Files",project_root, )
        return self

    def merge_from_files(
        self,
        relative_file_name_list: typing.List[str],
        as_title: str,
        project_root: typing.Union[os.PathLike, str] = None,
    ) -> "AiMdGenerator":
        """Merges the content of the given files into the current markdown file.
        the current markdown file will be used to upload to ai model for code review and learning.
        """
        self._check_project_name()
        project_root =  project_root or self.project_root
        file_text_list = []
        project_root_path = NbPath(project_root).resolve()
        for relative_file_name in relative_file_name_list:
            file = (project_root_path / relative_file_name).resolve()
            if not file.exists():
                raise FileNotFoundError(f"File {file} not found.")
            if file.is_file() and file.is_text():
                relative_file_name_posix = file.relative_to(
                    project_root_path
                ).as_posix()
                try:
                    text = file.read_text()
                except Exception as e:
                    self.logger.error(f"Error reading file {file}: {e}")
                    text = ""
                file_text_list.append(
                    [file, relative_file_name_posix, file.suffix, text]
                )
                self.logger.debug(f"need merged file: {file}")
            else:
                raise ValueError(f"File {file} is not a text file.")
        str_list = []
        if file_text_list:
            # è°ƒç”¨æ–°å‡½æ•°ç”Ÿæˆå¤´éƒ¨
            str_list.extend(self._generate_markdown_header(as_title, file_text_list))


        for file, relative_file_name_posix, suffix, text in file_text_list:
            # 2. Remove the debug print statement.
            # print(f'file: {file}, relative_file_name_posix: {relative_file_name_posix}, suffix: {suffix}, text: {text}')
            str_list.append(f"--- **start of file: {relative_file_name_posix}** --- \n")
            # 3. Handle .md files separately to ensure their content is rendered correctly.
            #    Other file types are wrapped in code blocks.
            # if suffix == ".md":
            #     str_list.append(text + "\n")
            # else:
            #     lang = self.suffix__lang_map.get(suffix, "text")
            #     str_list.append(f"{FILE_CONTENT_BACKQUOTES}{lang}\n{text}\n{FILE_CONTENT_BACKQUOTES}\n")
            lang = self.suffix__lang_map.get(suffix, "text")
            str_list.append(f"{FILE_CONTENT_BACKQUOTES}{lang}\n{text}\n{FILE_CONTENT_BACKQUOTES}\n")

            str_list.append(f"--- **end of file: {relative_file_name_posix}** --- \n")
            str_list.append("---\n\n")

        # with self.open(mode="a", encoding="utf-8") as f:
        #     f.write("\n".join(str_list))
        self.append_text('\n'.join(str_list))
        self.ensure_utf8_bom()
        return self
        
        
    def merge_from_dir(
        self,
        relative_dir_name: str,
        as_title: str,
        project_root: typing.Union[os.PathLike, str] = None,
        should_include_suffixes: typing.List[str] = [],
        excluded_dir_name_list: typing.List[str] = [],
        excluded_file_name_list: typing.List[str] = [],
        use_gitignore: bool = True,
        dry_run: bool = False,
        include_ast_metadata: bool = True,
    ) -> "AiMdGenerator":
        """Merges the content of the given directory into the current file."""
        project_root =  project_root or self.project_root
        project_root_path = NbPath(project_root).resolve()
        target_dir_path = (project_root_path / relative_dir_name).resolve()
        if not target_dir_path.exists():
            raise FileNotFoundError(f"Directory {target_dir_path} not found.")

        # Use sets for efficient lookups
        excluded_dir_paths = {
            (project_root_path / d).resolve() for d in excluded_dir_name_list
        }
        excluded_file_paths = {
            (project_root_path / f).resolve() for f in excluded_file_name_list
        }

        ignore_patterns = []
        if use_gitignore:
            try:
                gitignore_path = project_root_path.find_git_root() / ".gitignore"
                if gitignore_path.is_file():
                    self.logger.debug(f"Using .gitignore rules from: {gitignore_path}")
                    with open(gitignore_path, "r", encoding="utf-8") as f:
                        for line in f:
                            line = line.strip()
                            if line and not line.startswith("#"):
                                # Gitignore patterns always use forward slashes.
                                # We will compare against the posix version of the relative path
                                # for cross-platform reliability.
                                ignore_patterns.append(line)
            except FileNotFoundError:
                self.logger.warning("use_gitignore is True, but no .git/ or .gitignore file found.")

        relative_paths_to_include = []
        for path_obj in target_dir_path.rglob("*"):
            # Automatically exclude directories starting with a dot at the project root
            try:
                first_part = path_obj.relative_to(project_root_path).parts[0]
                if first_part.startswith('.'):
                    continue
            except (ValueError, IndexError):
                continue
            # Check if the path is within any of the excluded directories
            is_in_excluded_dir = any(
                path_obj == excluded_dir or excluded_dir in path_obj.parents
                for excluded_dir in excluded_dir_paths
            )
            if is_in_excluded_dir:
                continue

            # Check if the path matches any gitignore patterns.
            # Convert the relative path to a posix-style string for reliable matching.
            relative_to_root = path_obj.relative_to(project_root_path)
            relative_posix_path = relative_to_root.as_posix()
            # Use fnmatch for robust gitignore-style pattern matching.
            is_ignored = False
            for p in ignore_patterns:
                # If a pattern does not contain a slash, it matches in any directory.
                # e.g., 'test_git_ignore1.py' should match 'nb_path/example_dir/test_git_ignore1.py'
                if '/' not in p.strip('/'):
                    p_glob = f"**/{p.strip('/')}"
                else:
                    p_glob = p
                if fnmatch.fnmatch(relative_posix_path, p_glob) or fnmatch.fnmatch(relative_posix_path, p):
                    is_ignored = True
                    break
            if is_ignored:
                self.logger.debug(f"Ignoring {relative_to_root} due to .gitignore rule.")
                continue

            if path_obj.is_file():
                # Check if the file itself is excluded
                if path_obj.resolve() in excluded_file_paths:
                    continue
                # Check if the file is a text file
                if not path_obj.is_text():
                    continue
                # Check if the suffix is in the inclusion list (if the list is not empty)
                if (
                    should_include_suffixes
                    and path_obj.suffix not in should_include_suffixes
                ):
                    continue
                relative_paths_to_include.append(
                    path_obj.relative_to(project_root_path).as_posix()
                )

        if dry_run:
            print("\n--- [DRY RUN] AiMdGenerator Execution Plan ---")
            print(f"\nâœ… {len(relative_paths_to_include)} files would be INCLUDED in '{self.name}':")
            for p in sorted(relative_paths_to_include):
                print(f"  - {p}")
            print("\n--- End of DRY RUN ---")
            return self
        else:
            # ä½¿ç”¨å¸¦å…ƒæ•°æ®çš„æ–¹æ³•
            return self.merge_from_files_with_metadata(
                 
                relative_paths_to_include, 
                as_title,
                project_root=project_root,
                include_ast_metadata=include_ast_metadata
            )

    def merge_dir_of_package_examples(self):
        """åˆå¹¶åŒ…çš„examplesç›®å½•åˆ°å½“å‰markdownæ–‡ä»¶"""
        self._check_project_name()
        self.merge_from_dir(
            relative_dir_name=self.project_name,
            use_gitignore=True,
            as_title=f"{self.project_name} codes",
            # åªåŒ…å« .py å’Œ .md æ–‡ä»¶
            should_include_suffixes=[".py", ".md"],
            # æ’é™¤ __pycache__ ç›®å½•å’Œç‰¹å®šçš„æµ‹è¯•æ–‡ä»¶
            excluded_dir_name_list=[],
        ).merge_from_dir(
            relative_dir_name="examples",
            use_gitignore=True,
            as_title=f"{self.project_name} examples",
            # åªåŒ…å« .py å’Œ .md æ–‡ä»¶
            should_include_suffixes=[".py", ".md"],
            # æ’é™¤ __pycache__ ç›®å½•å’Œç‰¹å®šçš„æµ‹è¯•æ–‡ä»¶
            excluded_dir_name_list=[],
            include_ast_metadata=False,
        )
        return self

    def _ast_to_source(self, node) -> str:
        """å°† AST èŠ‚ç‚¹è½¬æ¢ä¸ºæºä»£ç å­—ç¬¦ä¸²ï¼Œå…¼å®¹ Python 3.7+"""
        if node is None:
            return ""
        try:
            # Python 3.9+ æ”¯æŒ ast.unparse
            if hasattr(ast, 'unparse'):
                return ast.unparse(node)
            else:
                # Python 3.7/3.8 çš„å›é€€æ–¹æ¡ˆ
                # å°è¯•ä½¿ç”¨ astor
                try:
                    import astor
                    return astor.to_source(node).strip()
                except ImportError:
                    pass
                
                # ç®€å•çš„æ‰‹å·¥å¤„ç†å¸¸è§æƒ…å†µ
                if isinstance(node, ast.Name):
                    return node.id
                elif isinstance(node, ast.Constant):
                    return repr(node.value)
                elif isinstance(node, ast.Attribute):
                    value = self._ast_to_source(node.value)
                    return f"{value}.{node.attr}"
                elif isinstance(node, ast.Subscript):
                    value = self._ast_to_source(node.value)
                    slice_val = self._ast_to_source(node.slice)
                    return f"{value}[{slice_val}]"
                elif isinstance(node, (ast.List, ast.Tuple)):
                    elts = [self._ast_to_source(e) for e in node.elts]
                    if isinstance(node, ast.List):
                        return f"[{', '.join(elts)}]"
                    else:
                        return f"({', '.join(elts)})"
                else:
                    # å¯¹äºå¤æ‚ç±»å‹ï¼Œè¿”å›ç±»å‹åç§°
                    return node.__class__.__name__
        except Exception:
            return ""

    def _parse_type_annotation(self, annotation) -> str:
        """è§£æç±»å‹æ³¨è§£ï¼Œè¿”å›å­—ç¬¦ä¸²è¡¨ç¤º"""
        return self._ast_to_source(annotation)

    def _extract_function_metadata(self, node: typing.Union[ast.FunctionDef, ast.AsyncFunctionDef]) -> dict:
        """æå–å‡½æ•°/æ–¹æ³•çš„å…ƒæ•°æ®"""
        metadata = {
            "name": node.name,
            "type": "async_function" if isinstance(node, ast.AsyncFunctionDef) else "function",
            "lineno": node.lineno,
            "docstring": ast.get_docstring(node) or "",
            "parameters": [],
            "return_type": self._parse_type_annotation(node.returns),
            "decorators": [self._ast_to_source(dec) for dec in node.decorator_list],
            "is_public": not node.name.startswith("_"),
        }

        # æå–å‚æ•°ä¿¡æ¯
        for arg in node.args.args:
            param_info = {
                "name": arg.arg,
                "type": self._parse_type_annotation(arg.annotation),
                "default": None,
            }
            metadata["parameters"].append(param_info)

        # å¤„ç†é»˜è®¤å‚æ•°
        defaults = node.args.defaults
        if defaults:
            # é»˜è®¤å€¼ä»åå¾€å‰å¯¹åº”å‚æ•°
            num_defaults = len(defaults)
            for i, default in enumerate(defaults):
                param_idx = len(metadata["parameters"]) - num_defaults + i
                if param_idx >= 0:
                    try:
                        metadata["parameters"][param_idx]["default"] = self._ast_to_source(default)
                    except Exception:
                        metadata["parameters"][param_idx]["default"] = "<complex_default>"

        # å¤„ç† *args å’Œ **kwargs
        if node.args.vararg:
            metadata["parameters"].append({
                "name": f"*{node.args.vararg.arg}",
                "type": self._parse_type_annotation(node.args.vararg.annotation),
                "default": None,
            })
        if node.args.kwarg:
            metadata["parameters"].append({
                "name": f"**{node.args.kwarg.arg}",
                "type": self._parse_type_annotation(node.args.kwarg.annotation),
                "default": None,
            })

        return metadata

    def _extract_class_metadata(self, node: ast.ClassDef) -> dict:
        """æå–ç±»çš„å…ƒæ•°æ®"""
        metadata = {
            "name": node.name,
            "type": "class",
            "lineno": node.lineno,
            "docstring": ast.get_docstring(node) or "",
            "bases": [self._ast_to_source(base) for base in node.bases],
            "decorators": [self._ast_to_source(dec) for dec in node.decorator_list],
            "methods": [],
            "properties": [],
            "class_variables": [],
            "is_public": not node.name.startswith("_"),
        }

        # éå†ç±»çš„æˆå‘˜
        for item in node.body:
            if isinstance(item, (ast.FunctionDef, ast.AsyncFunctionDef)):
                method_info = self._extract_function_metadata(item)
                
                # æ£€æŸ¥æ˜¯å¦æ˜¯ property
                is_property = any("property" in dec for dec in method_info["decorators"])
                if is_property:
                    metadata["properties"].append(method_info)
                else:
                    metadata["methods"].append(method_info)
            
            elif isinstance(item, ast.AnnAssign) and isinstance(item.target, ast.Name):
                # ç±»å˜é‡ï¼ˆå¸¦ç±»å‹æ³¨è§£ï¼‰
                value_str = ""
                if item.value:
                    try:
                        value_str = self._ast_to_source(item.value)
                        # é™åˆ¶å€¼çš„é•¿åº¦
                        if len(value_str) > 50:
                            value_str = value_str[:50] + "..."
                    except Exception:
                        value_str = "<value>"
                
                metadata["class_variables"].append({
                    "name": item.target.id,
                    "type": self._parse_type_annotation(item.annotation),
                    "value": value_str,
                    "lineno": item.lineno,
                })
            elif isinstance(item, ast.Assign):
                # ç±»å˜é‡ï¼ˆæ— ç±»å‹æ³¨è§£ï¼‰
                for target in item.targets:
                    if isinstance(target, ast.Name):
                        # æå–å€¼
                        value_str = ""
                        if item.value:
                            try:
                                value_str = self._ast_to_source(item.value)
                                # é™åˆ¶å€¼çš„é•¿åº¦
                                if len(value_str) > 50:
                                    value_str = value_str[:50] + "..."
                            except Exception:
                                value_str = "<value>"
                        
                        metadata["class_variables"].append({
                            "name": target.id,
                            "type": "",
                            "value": value_str,
                            "lineno": item.lineno,
                        })

        return metadata

    def _parse_python_file_ast(self, file_path: NbPath) -> dict:
        """è§£æ Python æ–‡ä»¶çš„ ASTï¼Œæå–æ‰€æœ‰å…ƒæ•°æ®"""
        try:
            source_code = file_path.read_text(encoding="utf-8")
            # ç§»é™¤ BOM (Byte Order Mark) å­—ç¬¦ï¼Œå¦‚æœå­˜åœ¨çš„è¯
            # BOM æ˜¯ U+FEFFï¼Œåœ¨ UTF-8 ç¼–ç ä¸­æ˜¯ \ufeff
            if source_code.startswith('\ufeff'):
                source_code = source_code[1:]
                self.logger.debug(f"Removed BOM from file: {file_path}")
            tree = ast.parse(source_code, filename=str(file_path))
        except Exception as e:
            self.logger.error(f"Failed to parse Python file {file_path}: {e}")
            return {
                "error": str(e),
                "classes": [],
                "functions": [],
                "imports": [],
                "module_docstring": "",
            }

        metadata = {
            "file": str(file_path),
            "module_docstring": ast.get_docstring(tree) or "",
            "classes": [],
            "functions": [],
            "imports": [],
            "constants": [],
        }

        # éå†æ¨¡å—çº§åˆ«çš„èŠ‚ç‚¹
        for node in ast.walk(tree):
            # åªå¤„ç†æ¨¡å—çº§åˆ«çš„å®šä¹‰ï¼ˆé€šè¿‡æ£€æŸ¥çˆ¶èŠ‚ç‚¹ï¼‰
            if isinstance(node, ast.ClassDef):
                # æ£€æŸ¥æ˜¯å¦æ˜¯é¡¶çº§ç±»ï¼ˆä¸åœ¨å…¶ä»–ç±»å†…éƒ¨ï¼‰
                parent = None
                for potential_parent in ast.walk(tree):
                    if isinstance(potential_parent, ast.ClassDef) and node in ast.walk(potential_parent) and node != potential_parent:
                        parent = potential_parent
                        break
                if parent is None:  # é¡¶çº§ç±»
                    metadata["classes"].append(self._extract_class_metadata(node))

            elif isinstance(node, (ast.FunctionDef, ast.AsyncFunctionDef)):
                # æ£€æŸ¥æ˜¯å¦æ˜¯é¡¶çº§å‡½æ•°ï¼ˆä¸åœ¨ç±»å†…éƒ¨ï¼‰
                parent_class = None
                for potential_parent in ast.walk(tree):
                    if isinstance(potential_parent, ast.ClassDef) and node in ast.walk(potential_parent):
                        parent_class = potential_parent
                        break
                if parent_class is None:  # é¡¶çº§å‡½æ•°
                    metadata["functions"].append(self._extract_function_metadata(node))

            elif isinstance(node, (ast.Import, ast.ImportFrom)):
                if isinstance(node, ast.Import):
                    for alias in node.names:
                        metadata["imports"].append({
                            "type": "import",
                            "module": alias.name,
                            "alias": alias.asname,
                            "lineno": node.lineno,
                        })
                else:  # ImportFrom
                    module = node.module or ""
                    for alias in node.names:
                        metadata["imports"].append({
                            "type": "from_import",
                            "module": module,
                            "name": alias.name,
                            "alias": alias.asname,
                            "lineno": node.lineno,
                        })

        return metadata

    def _format_py_metadata_as_markdown(self, metadata: dict, relative_file_name: str) -> str:
        """å°† Python æ–‡ä»¶å…ƒæ•°æ®æ ¼å¼åŒ–ä¸º Markdown"""
        lines = []
        lines.append(f"\n### ğŸ“„ Python File Metadata: `{relative_file_name}`\n")

        # æ¨¡å—æ–‡æ¡£å­—ç¬¦ä¸²
        if metadata.get("module_docstring"):
            lines.append("#### ğŸ“ Module Docstring\n")
            lines.append(FILE_CONTENT_BACKQUOTES)
            lines.append(metadata["module_docstring"])
            lines.append(f"{FILE_CONTENT_BACKQUOTES}\n")

        # å¯¼å…¥ä¿¡æ¯
        if metadata.get("imports"):
            lines.append("#### ğŸ“¦ Imports\n")
            for imp in metadata["imports"]:  # æ˜¾ç¤ºæ‰€æœ‰ importsï¼Œä¸å†é™åˆ¶æ•°é‡
                if imp["type"] == "import":
                    alias_str = f" as {imp['alias']}" if imp['alias'] else ""
                    lines.append(f"- `import {imp['module']}{alias_str}`")
                else:
                    alias_str = f" as {imp['alias']}" if imp['alias'] else ""
                    lines.append(f"- `from {imp['module']} import {imp['name']}{alias_str}`")
            lines.append("")

        # ç±»ä¿¡æ¯
        if metadata.get("classes"):
            lines.append(f"#### ğŸ›ï¸ Classes ({len(metadata['classes'])})\n")
            for cls in metadata["classes"]:
                # åªæ˜¾ç¤ºå…¬æœ‰ç±»æˆ–æ‰€æœ‰ç±»ï¼ˆæ ¹æ®éœ€è¦ï¼‰
                class_header = f"##### ğŸ“Œ `class {cls['name']}"
                if cls["bases"]:
                    class_header += f"({', '.join(cls['bases'])})"
                class_header += "`"
                lines.append(class_header)
                lines.append(f"*Line: {cls['lineno']}*\n")
                
                if cls["docstring"]:
                    # æ˜¾ç¤ºå®Œæ•´çš„ç±»æ–‡æ¡£å­—ç¬¦ä¸²
                    docstring_lines = cls["docstring"].split("\n")
                    lines.append("**Docstring:**")
                    lines.append(FILE_CONTENT_BACKQUOTES)
                    lines.extend(docstring_lines)
                    lines.append(f"{FILE_CONTENT_BACKQUOTES}\n")

                # é¦–å…ˆå•ç‹¬æ˜¾ç¤º __init__ æ–¹æ³•ï¼ˆéå¸¸é‡è¦ï¼‰
                init_method = None
                for method in cls["methods"]:
                    if method["name"] == "__init__":
                        init_method = method
                        break
                
                if init_method:
                    lines.append("**ğŸ”§ Constructor (`__init__`):**")
                    params_str = self._format_parameters(init_method["parameters"])
                    lines.append(f"- `def __init__({params_str})`")
                    
                    # æ˜¾ç¤º __init__ çš„å®Œæ•´æ–‡æ¡£å­—ç¬¦ä¸²
                    if init_method["docstring"]:
                        lines.append("  - **Docstring:**")
                        lines.append(f"  {FILE_CONTENT_BACKQUOTES}")
                        for doc_line in init_method["docstring"].split("\n"):
                            lines.append(f"  {doc_line}")
                        lines.append(f"  {FILE_CONTENT_BACKQUOTES}")
                    
                    # æ˜¾ç¤ºæ¯ä¸ªå‚æ•°çš„è¯¦ç»†ä¿¡æ¯
                    if init_method["parameters"]:
                        lines.append("  - **Parameters:**")
                        for param in init_method["parameters"]:
                            param_name = param["name"]
                            param_type = f": {param['type']}" if param["type"] else ""
                            param_default = f" = {param['default']}" if param["default"] else ""
                            lines.append(f"    - `{param_name}{param_type}{param_default}`")
                    lines.append("")

                # å…¬æœ‰æ–¹æ³•ï¼ˆæ’é™¤ __init__ï¼‰
                public_methods = [m for m in cls["methods"] if m["is_public"] and m["name"] != "__init__"]
                if public_methods:
                    lines.append(f"**Public Methods ({len(public_methods)}):**")
                    for method in public_methods:
                        params_str = self._format_parameters(method["parameters"])
                        return_str = f" -> {method['return_type']}" if method["return_type"] else ""
                        async_str = "async " if method["type"] == "async_function" else ""
                        
                        decorators_str = ""
                        if method["decorators"]:
                            decorators_str = " " + " ".join([f"`{d}`" for d in method["decorators"]])
                        
                        lines.append(f"- `{async_str}def {method['name']}({params_str}){return_str}`{decorators_str}")
                        
                        # æ˜¾ç¤ºå®Œæ•´çš„æ–‡æ¡£å­—ç¬¦ä¸²
                        if method["docstring"]:
                            # å¦‚æœæ–‡æ¡£å­—ç¬¦ä¸²åªæœ‰ä¸€è¡Œï¼Œç”¨ç®€çŸ­æ ¼å¼æ˜¾ç¤º
                            docstring_lines = method["docstring"].split("\n")
                            if len(docstring_lines) == 1:
                                lines.append(f"  - *{method['docstring'].strip()}*")
                            else:
                                # å¤šè¡Œæ–‡æ¡£å­—ç¬¦ä¸²,ç”¨ä»£ç å—æ ¼å¼æ˜¾ç¤º
                                lines.append("  - **Docstring:**")
                                lines.append(f"  {FILE_CONTENT_BACKQUOTES}")
                                for doc_line in docstring_lines:
                                    lines.append(f"  {doc_line}")
                                lines.append(f"  {FILE_CONTENT_BACKQUOTES}")
                    lines.append("")

                # Properties
                if cls["properties"]:
                    lines.append(f"**Properties ({len(cls['properties'])}):**")
                    for prop in cls["properties"]:
                        return_str = f" -> {prop['return_type']}" if prop["return_type"] else ""
                        lines.append(f"- `@property {prop['name']}{return_str}`")
                    lines.append("")

                # ç±»å˜é‡
                if cls["class_variables"]:
                    lines.append(f"**Class Variables ({len(cls['class_variables'])}):**")
                    for var in cls["class_variables"]:
                        type_str = f": {var['type']}" if var["type"] else ""
                        value_str = f" = {var['value']}" if var.get("value") else ""
                        lines.append(f"- `{var['name']}{type_str}{value_str}`")
                    lines.append("")

        # é¡¶çº§å‡½æ•°
        if metadata.get("functions"):
            public_functions = [f for f in metadata["functions"] if f["is_public"]]
            if public_functions:
                lines.append(f"#### ğŸ”§ Public Functions ({len(public_functions)})\n")
                for func in public_functions:
                    params_str = self._format_parameters(func["parameters"])
                    return_str = f" -> {func['return_type']}" if func["return_type"] else ""
                    async_str = "async " if func["type"] == "async_function" else ""
                    
                    decorators_str = ""
                    if func["decorators"]:
                        decorators_str = " " + " ".join([f"`{d}`" for d in func["decorators"]])
                    
                    lines.append(f"- `{async_str}def {func['name']}({params_str}){return_str}`{decorators_str}")
                    lines.append(f"  - *Line: {func['lineno']}*")
                    
                    if func["docstring"]:
                        # å¦‚æœæ–‡æ¡£å­—ç¬¦ä¸²åªæœ‰ä¸€è¡Œï¼Œç”¨ç®€çŸ­æ ¼å¼æ˜¾ç¤º
                        docstring_lines = func["docstring"].split("\n")
                        if len(docstring_lines) == 1:
                            lines.append(f"  - *{func['docstring'].strip()}*")
                        else:
                            # å¤šè¡Œæ–‡æ¡£å­—ç¬¦ä¸²,ç”¨ä»£ç å—æ ¼å¼æ˜¾ç¤º
                            lines.append("  - **Docstring:**")
                            lines.append(f"  {FILE_CONTENT_BACKQUOTES}")
                            for doc_line in docstring_lines:
                                lines.append(f"  {doc_line}")
                            lines.append(f"  {FILE_CONTENT_BACKQUOTES}")
                    lines.append("")

        lines.append("\n---\n")
        return "\n".join(lines)

    def _format_parameters(self, parameters: list) -> str:
        """æ ¼å¼åŒ–å‡½æ•°å‚æ•°åˆ—è¡¨"""
        param_strs = []
        for param in parameters:
            param_str = param["name"]
            if param["type"]:
                param_str += f": {param['type']}"
            if param["default"]:
                param_str += f" = {param['default']}"
            param_strs.append(param_str)
        return ", ".join(param_strs)

    def merge_from_files_with_metadata(
        self,
        relative_file_name_list: typing.List[str],
        as_title: str,
        project_root: typing.Union[os.PathLike, str] = None,
        include_ast_metadata: bool = True,
        include_file_text: bool = True,
    ) -> "AiMdGenerator":
        """
        åˆå¹¶æ–‡ä»¶å†…å®¹åˆ° Markdownï¼Œå¯¹äº Python æ–‡ä»¶ä¼šé¢å¤–ç”Ÿæˆ AST å…ƒæ•°æ®
        
        Args:
            project_root: é¡¹ç›®æ ¹ç›®å½•
            relative_file_name_list: ç›¸å¯¹æ–‡ä»¶è·¯å¾„åˆ—è¡¨
            as_title: æ ‡é¢˜
            include_ast_metadata: æ˜¯å¦åŒ…å« AST å…ƒæ•°æ®ï¼ˆä»…å¯¹ .py æ–‡ä»¶ï¼‰
            include_file_text: æ˜¯å¦åŒ…å«å®Œæ•´æ–‡ä»¶æºç ï¼ˆFalse æ—¶åªæ˜¾ç¤ºå…ƒæ•°æ®ï¼‰
        """
        self._check_project_name()
        project_root =  project_root or self.project_root
        file_text_list = []
        project_root_path = NbPath(project_root).resolve()
        
        for relative_file_name in relative_file_name_list:
            file = (project_root_path / relative_file_name).resolve()
            if not file.exists():
                raise FileNotFoundError(f"File {file} not found.")
            if file.is_file() and file.is_text():
                relative_file_name_posix = file.relative_to(project_root_path).as_posix()
                try:
                    text = file.read_text()
                except Exception as e:
                    self.logger.error(f"Error reading file {file}: {e}")
                    text = ""
                
                file_text_list.append([file, relative_file_name_posix, file.suffix, text])
                self.logger.debug(f"need merged file: {file}")
            else:
                raise ValueError(f"File {file} is not a text file.")
        
        str_list = []
        if file_text_list:
            str_list.extend(self._generate_markdown_header(as_title, file_text_list))

        for file, relative_file_name_posix, suffix, text in file_text_list:
            # å¦‚æœä¸åŒ…å«æ–‡ä»¶å†…å®¹ï¼Œåªè¾“å‡ºå…ƒæ•°æ®ï¼ˆä»…å¯¹ Python æ–‡ä»¶ï¼‰
            if not include_file_text:
                if suffix == ".py" and include_ast_metadata:
                    # åªæ˜¾ç¤ºå…ƒæ•°æ®ï¼Œä¸æ˜¾ç¤ºæºç 
                    metadata = self._parse_python_file_ast(file)
                    metadata_md = self._format_py_metadata_as_markdown(metadata, relative_file_name_posix)
                    str_list.append(metadata_md)
                    str_list.append("\n")
                # é Python æ–‡ä»¶è·³è¿‡
                continue
            
            # æ­£å¸¸æµç¨‹ï¼šåŒ…å«æ–‡ä»¶å†…å®¹
            str_list.append(f"--- **start of file: {relative_file_name_posix}** --- \n")
            
            # å¯¹äº Python æ–‡ä»¶ï¼Œæ·»åŠ  AST å…ƒæ•°æ®
            if suffix == ".py" and include_ast_metadata:
                metadata = self._parse_python_file_ast(file)
                metadata_md = self._format_py_metadata_as_markdown(metadata, relative_file_name_posix)
                str_list.append(metadata_md)
            
            # æ·»åŠ å®Œæ•´çš„æ–‡ä»¶å†…å®¹
            if suffix == ".md":
                str_list.append(text + "\n")
            else:
                lang = self.suffix__lang_map.get(suffix, "text")
                str_list.append(f"{FILE_CONTENT_BACKQUOTES}{lang}\n{text}\n{FILE_CONTENT_BACKQUOTES}\n")

            str_list.append(f"--- **end of file: {relative_file_name_posix}** --- \n")
            str_list.append("---\n\n")

        self.append_text('\n'.join(str_list))
        self.ensure_utf8_bom()
        return self

`````

--- **end of file: nb_ai_context/ai_md_generator.py** --- 

---


--- **start of file: nb_ai_context/__init__.py** --- 


### ğŸ“„ Python File Metadata: `nb_ai_context/__init__.py`

#### ğŸ“¦ Imports

- `from nb_path import NbPath`
- `from ai_md_generator import AiMdGenerator`
- `from contrib.gen_github_proj_ai_md import gen_github_proj_docs_and_codes_ai_md`
- `from contrib.gen_github_proj_ai_md import gen_github_proj_all_dirs_ai_md`


---

`````python

from nb_path import NbPath
from .ai_md_generator import AiMdGenerator

from .contrib.gen_github_proj_ai_md import gen_github_proj_docs_and_codes_ai_md,gen_github_proj_all_dirs_ai_md
`````

--- **end of file: nb_ai_context/__init__.py** --- 

---


--- **start of file: nb_ai_context/contrib/about.md** --- 



some contribution about nb_path

--- **end of file: nb_ai_context/contrib/about.md** --- 

---


--- **start of file: nb_ai_context/contrib/gen_github_proj_ai_md.py** --- 


### ğŸ“„ Python File Metadata: `nb_ai_context/contrib/gen_github_proj_ai_md.py`

#### ğŸ“ Module Docstring

`````
Generate tutorials and code from any GitHub project into a markdown file for AI context

Download GitHub project zip file
https://codeload.github.com/fastapi/sqlmodel/zip/refs/heads/main
https://codeload.github.com/fastapi/sqlmodel/zip/refs/tags/0.0.25

Unzip the file
Generate markdown file
`````

#### ğŸ“¦ Imports

- `import typing`
- `from nb_path import NbPath`
- `from nb_ai_context import AiMdGenerator`
- `import re`

#### ğŸ”§ Public Functions (3)

- `def extract_repo_name(github_url)`
  - *Line: 18*

- `def gen_github_proj_docs_and_codes_ai_md(github_zip_url: str, output_md_path: str, docs_dir_name: str, codes_dir_name: str, readme_file: str, should_include_suffixes: list = None, excluded_dir_name_list: typing.List[str] = [], excluded_file_name_list: typing.List[str] = [])`
  - *Line: 27*
  - **Docstring:**
  `````
  Generate a Markdown document containing README, tutorials, and source code from a GitHub repository URL
  
  Args:
      github_zip_url: GitHub repository zip download link
                     Example: https://codeload.github.com/fastapi/sqlmodel/zip/refs/heads/main
      output_md_path: Output Markdown file path
      readme_file: README file name, default is "README.md"
      docs_dir_name: Documentation directory name, e.g. "docs"
      codes_dir_name: Source code directory name, e.g. "sqlmodel"
      should_include_suffixes: List of file extensions to include,
                              By default includes ['.py', '.java', '.go', '.md', '.html']
  `````

- `def gen_github_proj_all_dirs_ai_md(github_zip_url: str, output_md_path: str, should_include_suffixes: list = None, excluded_dir_name_list: typing.List[str] = [], excluded_file_name_list: typing.List[str] = [])`
  - *Line: 99*
  - *ç”Ÿæˆgithubçš„é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶åˆ°markdownï¼Œ*


---

`````python
"""
Generate tutorials and code from any GitHub project into a markdown file for AI context

Download GitHub project zip file
https://codeload.github.com/fastapi/sqlmodel/zip/refs/heads/main
https://codeload.github.com/fastapi/sqlmodel/zip/refs/tags/0.0.25

Unzip the file
Generate markdown file
"""

import typing
from nb_path import NbPath
from nb_ai_context import AiMdGenerator
import re


def extract_repo_name(github_url):
    # Match GitHub codeload URL pattern
    pattern = r"https://codeload\.github\.com/[^/]+/([^/]+)"
    match = re.search(pattern, github_url)
    if match:
        return match.group(1)
    return None


def gen_github_proj_docs_and_codes_ai_md(
    github_zip_url: str,
    output_md_path: str,
    docs_dir_name: str,
    codes_dir_name: str,
    readme_file: str,
    should_include_suffixes: list = None,
    excluded_dir_name_list: typing.List[str] = [],
    excluded_file_name_list: typing.List[str] = [],
):
    """
    Generate a Markdown document containing README, tutorials, and source code from a GitHub repository URL

    Args:
        github_zip_url: GitHub repository zip download link
                       Example: https://codeload.github.com/fastapi/sqlmodel/zip/refs/heads/main
        output_md_path: Output Markdown file path
        readme_file: README file name, default is "README.md"
        docs_dir_name: Documentation directory name, e.g. "docs"
        codes_dir_name: Source code directory name, e.g. "sqlmodel"
        should_include_suffixes: List of file extensions to include,
                                By default includes ['.py', '.java', '.go', '.md', '.html']
    """
    project_name = extract_repo_name(github_zip_url)
    if should_include_suffixes is None:
        should_include_suffixes = [".py", ".java", ".go", ".md", ".html"]

    with NbPath.tempdir() as temp_dir:
        # Download zip file
        zip_file = temp_dir / "repo.zip"
        zip_file.download_from_url(github_zip_url)

        # Unzip the file
        unzip_dir = zip_file.unzip_to(temp_dir / "unzip")
        project_root = list(unzip_dir.iterdir())[
            0
        ]  # Get the project root directory after extraction

        print(f"tempdir github project_root: {project_root}")

        # Create AiMdGenerator instance and chain calls

        md_generator = (
            AiMdGenerator(output_md_path)
            .set_project_propery(project_name=project_name, project_root=project_root)
            .clear_text()
            .merge_from_files(
                relative_file_name_list=[readme_file],
                as_title=f"{project_name}  README",
            )
            .merge_from_dir(
                relative_dir_name=docs_dir_name,
                as_title=f"{project_name}  Documentation",
                should_include_suffixes=should_include_suffixes,
                use_gitignore=False,
                excluded_dir_name_list=excluded_dir_name_list,
                excluded_file_name_list=excluded_file_name_list,
            )
            .merge_from_dir(
                relative_dir_name=codes_dir_name,
                as_title=f"{project_name}  Source Code",
                should_include_suffixes=should_include_suffixes,
                use_gitignore=False,
                excluded_dir_name_list=excluded_dir_name_list,
                excluded_file_name_list=excluded_file_name_list,
            )
            .show_textfile_info()
        )

        return md_generator


def gen_github_proj_all_dirs_ai_md(
    github_zip_url: str,
    output_md_path: str,
    should_include_suffixes: list = None,
    excluded_dir_name_list: typing.List[str] = [],
    excluded_file_name_list: typing.List[str] = [],
):
    """
    ç”Ÿæˆgithubçš„é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶åˆ°markdownï¼Œ
    """
    project_name = extract_repo_name(github_zip_url)
    if should_include_suffixes is None:
        should_include_suffixes = [".py", ".java", ".go", ".md", ".html"]

    with NbPath.tempdir() as temp_dir:
        # Download zip file
        zip_file = temp_dir / "repo.zip"
        zip_file.download_from_url(github_zip_url)

        # Unzip the file
        unzip_dir = zip_file.unzip_to(temp_dir / "unzip")
        project_root = list(unzip_dir.iterdir())[
            0
        ]  # Get the project root directory after extraction

        print(f"tempdir github project_root: {project_root}")

        # Create AiMdGenerator instance and chain calls

        md_generator = (
            AiMdGenerator(output_md_path)
            .set_project_propery(project_name=project_name, project_root=project_root)
            .clear_text()
            .merge_from_dir(
                relative_dir_name=".",
                as_title=f"{project_name}  all files",
                should_include_suffixes=should_include_suffixes,
                use_gitignore=False,
                excluded_dir_name_list=excluded_dir_name_list,
                excluded_file_name_list=excluded_file_name_list,
            )
            .show_textfile_info()
        )

        return md_generator


if __name__ == "__main__":
    # Example: Generate documentation for sqlmodel project
    gen_github_proj_docs_and_codes_ai_md(
        github_zip_url="https://codeload.github.com/fastapi/sqlmodel/zip/refs/heads/main",
        output_md_path=NbPath(
            r"D:\codes\nb_ai_context\markdown_gen_files_git_ignore\ai_md_files\other_peoples"
        )
        .joinpath("sqlmodel_all_docs_and_codes.md")
        .ensure_parent(),
        readme_file="README.md",
        docs_dir_name="docs",
        codes_dir_name="sqlmodel",
        should_include_suffixes=[
            ".py",
            ".md",
        ],
    )

    gen_github_proj_all_dirs_ai_md(
        github_zip_url="https://codeload.github.com/fastapi/sqlmodel/zip/refs/heads/main",
        output_md_path=NbPath(
            r"D:\codes\nb_ai_context\markdown_gen_files_git_ignore\ai_md_files\other_peoples"
        )
        .joinpath("sqlmodel_all_dirs.md")
        .ensure_parent(),
    )

`````

--- **end of file: nb_ai_context/contrib/gen_github_proj_ai_md.py** --- 

---
``````

## examples/AiMdGenerator_example.py

```python
from nb_ai_context import AiMdGenerator
â‹®----
project_name = "nb_ai_context"
project_root = rf"D:\codes\{project_name}"
â‹®----
project_summary = f"""
- `{project_name}` is a powerful ai llm context gennerator library ,it is uesd for ai llm and rag
- `AiMdGenerator(...)` is the main class to create ai context for llm.
"""
```

## git_nb_ai_context.py

```python
import subprocess
import time
â‹®----
def getstatusoutput(cmd):
â‹®----
def do_cmd(cmd_strx):
â‹®----
t0 = time.time()
```

## nb_ai_context/ai_md_generator.py

``````python
import typing
import os
import fnmatch
import ast
from nb_path import NbPath
â‹®----
FILE_CONTENT_BACKQUOTES = "`````"
â‹®----
class AiMdGenerator(NbPath):
    """
    An extremely powerful context generator born for AI collaboration.

    This class is designed to revolutionize how developers interact with Large Language
    Models (LLMs). It intelligently merges multiple project source files into a single,
    well-structured, and context-rich Markdown file, providing the AI with a perfect
    and comprehensive project snapshot.

    The benefits for large AI models are immense:
    1.  **Provides a God's-eye View**: Through a file manifest, clear file boundaries,
        and relative paths, the AI can easily construct the project's overall
        architecture and understand file dependencies and relationships, rather than
        fumbling in the dark.
    2.  **Ensures Information Integrity and Accuracy**: The AI receives complete,
        unabridged source file content, avoiding the chaos, omissions, or context
        loss caused by manual copy-pasting. This enables it to provide more precise
        analysis and suggestions.
    3.  **Enhances Security**: The built-in `use_gitignore` feature is a critical
        security barrier. It automatically ignores files containing sensitive
        information (like API keys or database passwords) such as `.env` or local
        configs, allowing you to share code without fear of accidental leaks.

    Its core methods, `merge_from_files` and `merge_from_dir`, offer extreme
    flexibility. Combined with the elegant chainable calls of `nb_path`, creating a
    high-quality AI context is transformed from a tedious, error-prone manual task
    into a single, delightful line of code.

    Example:
        >>> # Imagine you want an AI to review your entire project
        >>> project_name = "my_project"
        >>> project_summary = '''
        ... This is an excellent Python project that demonstrates best practices.
        ... It includes comprehensive documentation and well-structured code.
        ... '''
        >>> 
        >>> (
        ...     AiMdGenerator("project_context_for_ai.md")
        ...     .set_project_propery(project_name=project_name, project_root="/path/to/your/project")
        ...     .clear_text()  # Clear the old file
        ...     .add_project_summary(
        ...         project_summary=project_summary,
        ...         # Extract metadata (without full source) from core files first
        ...         most_core_source_code_file_list=[
        ...             "src/main.py",
        ...             "src/api.py",
        ...             "src/models.py",
        ...         ]
        ...     )
        ...     .auto_merge_from_python_project_some_files()  # Auto-include README, setup.py, etc.
        ...     .merge_from_dir(
        ...         relative_dir_name="src", # The main source code directory
        ...         as_title="Project Source Code",
        ...         use_gitignore=True,  # Automatically use .gitignore rules
        ...         should_include_suffixes=[".py", ".md"], # Only include specified file types
        ...         include_ast_metadata=True,  # Include AST metadata for Python files
        ...     )
        ...     .merge_from_dir(
        ...         relative_dir_name="tests", # The tests directory
        ...         as_title="Project Tests",
        ...         use_gitignore=True,
        ...         should_include_suffixes=[".py"],
        ...         excluded_dir_name_list=["tests/temp_files"],
        ...         include_ast_metadata=True,
        ...     )
        ... )
    """
    """cn description
    ä¸€ä¸ªæå…¶å¼ºå¤§çš„ã€ä¸º AI åä½œè€Œç”Ÿçš„ä¸Šä¸‹æ–‡ç”Ÿæˆå™¨ã€‚

    æ­¤ç±»æ—¨åœ¨å½»åº•æ”¹å˜å¼€å‘è€…ä¸å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰çš„äº¤äº’æ–¹å¼ã€‚å®ƒèƒ½å¤Ÿæ™ºèƒ½åœ°å°†å¤šä¸ªé¡¹ç›®æºæ–‡ä»¶
    åˆå¹¶æˆä¸€ä¸ªç»“æ„æ¸…æ™°ã€ä¸Šä¸‹æ–‡ä¸°å¯Œçš„å•ä¸€ Markdown æ–‡ä»¶ï¼Œä»è€Œä¸º AI æä¾›ä¸€ä¸ªå®Œç¾ã€å…¨é¢çš„é¡¹ç›®å¿«ç…§ã€‚

    å¯¹ AI å¤§æ¨¡å‹çš„å¥½å¤„æ˜¯å·¨å¤§çš„ï¼š
    1.  **æä¾›ä¸Šå¸è§†è§’**ï¼šé€šè¿‡æ–‡ä»¶æ¸…å•ã€æ¸…æ™°çš„æ–‡ä»¶è¾¹ç•Œå’Œç›¸å¯¹è·¯å¾„ï¼ŒAI èƒ½å¤Ÿè½»æ¾æ„å»ºå‡ºé¡¹ç›®çš„
        æ•´ä½“æ¶æ„ï¼Œç†è§£æ–‡ä»¶é—´çš„ä¾èµ–å’Œå¼•ç”¨å…³ç³»ï¼Œè€Œä¸æ˜¯ç›²äººæ‘¸è±¡ã€‚
    2.  **ç¡®ä¿ä¿¡æ¯çš„å®Œæ•´ä¸å‡†ç¡®**ï¼šAI å¾—åˆ°çš„æ˜¯æœªç»åˆ å‡çš„ã€å®Œæ•´çš„æºæ–‡ä»¶å†…å®¹ï¼Œé¿å…äº†å› æ‰‹åŠ¨
        å¤åˆ¶ç²˜è´´å¯¼è‡´çš„æ ¼å¼æ··ä¹±ã€å†…å®¹é—æ¼æˆ–ä¸Šä¸‹æ–‡ç¼ºå¤±ï¼Œä»è€Œèƒ½ç»™å‡ºæ›´ç²¾å‡†çš„åˆ†æå’Œå»ºè®®ã€‚
    3.  **æå‡å®‰å…¨æ€§**ï¼šå†…ç½®çš„ `use_gitignore` åŠŸèƒ½æ˜¯ä¸€é“å…³é”®çš„å®‰å…¨å±éšœã€‚å®ƒèƒ½è‡ªåŠ¨å¿½ç•¥
        `.env`ã€æœ¬åœ°é…ç½®ç­‰åŒ…å«æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚ API å¯†é’¥ã€æ•°æ®åº“å¯†ç ï¼‰çš„æ–‡ä»¶ï¼Œè®©ä½ åœ¨åˆ†äº«ä»£ç 
        æ—¶æ— éœ€æ‹…å¿ƒæ„å¤–æ³„éœ²ç§˜å¯†ã€‚

    å…¶æ ¸å¿ƒæ–¹æ³• `merge_from_files` å’Œ `merge_from_dir` æä¾›äº†æé«˜çš„çµæ´»æ€§ï¼Œç»“åˆ `nb_path`
    ä¼˜é›…çš„é“¾å¼è°ƒç”¨ï¼Œä½¿å¾—åˆ›å»ºä¸€ä¸ªé«˜è´¨é‡çš„ AI ä¸Šä¸‹æ–‡ä»ç¹çã€æ˜“é”™çš„æ‰‹å·¥åŠ³åŠ¨ï¼Œå˜æˆäº†ä¸€è¡Œ
    èµå¿ƒæ‚¦ç›®çš„ä»£ç ã€‚

    """
â‹®----
def set_project_propery(self, project_name: str, project_root: typing.Union[os.PathLike, str] ) -> "AiMdGenerator":
    """Sets the project name for the current markdown file."""
â‹®----
def _check_project_name(self) -> "AiMdGenerator":
    """Checks if the project name is set."""
â‹®----
def add_project_summary(
        self, 
        project_summary: str, 
        most_core_source_code_file_list: typing.List[str] = None,
        project_root: typing.Union[os.PathLike, str] = None,
    ) -> "AiMdGenerator":
    """
        Adds a project summary to the current markdown file.
        
        Args:
            project_summary: é¡¹ç›®æ¦‚è¿°æ–‡æœ¬
            project_root: é¡¹ç›®æ ¹ç›®å½•ï¼ˆå¦‚æœæä¾›äº† most_core_source_code_file_listï¼‰
            most_core_source_code_file_list: æœ€æ ¸å¿ƒçš„æºç æ–‡ä»¶åˆ—è¡¨ï¼ˆç›¸å¯¹è·¯å¾„ï¼‰
                                             åªæå–è¿™äº›æ–‡ä»¶çš„ AST å…ƒæ•°æ®ï¼Œä¸åŒ…å«å®Œæ•´æºç 
        
        Example:
            >>> (
            ...     AiMdGenerator("output.md")
            ...     .set_project_name("my_project")
            ...     .clear_text()
            ...     .add_project_summary(
            ...         project_summary="è¿™æ˜¯ä¸€ä¸ªä¼˜ç§€çš„é¡¹ç›®...",
            ...         project_root="/path/to/project",
            ...         most_core_source_code_file_list=["src/main.py", "src/api.py"],
            ...     )
            ... )
        """
â‹®----
def _generate_markdown_header(self, as_title: str, file_text_list: list) -> list:
    """ç”ŸæˆåŒ…å«æ–‡ä»¶æ ‘å’Œæ–‡ä»¶åˆ—è¡¨çš„ Markdown å¤´éƒ¨"""
def format_tree(node, prefix=""):
â‹®----
def auto_merge_from_python_project_some_files(self, project_root: typing.Union[os.PathLike, str] = None) -> 'AiMdGenerator':
    """è‡ªåŠ¨åˆå¹¶é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ readme.md æˆ–è€…ReADME.md ä»¥åŠsetup.py å’Œ pyproject.toml ï¼Œå¦‚æœæœ‰å°±æ·»åŠ """
â‹®----
def merge_from_files(
        self,
        relative_file_name_list: typing.List[str],
        as_title: str,
        project_root: typing.Union[os.PathLike, str] = None,
    ) -> "AiMdGenerator":
    """Merges the content of the given files into the current markdown file.
        the current markdown file will be used to upload to ai model for code review and learning.
        """
â‹®----
def merge_from_dir(
        self,
        relative_dir_name: str,
        as_title: str,
        project_root: typing.Union[os.PathLike, str] = None,
        should_include_suffixes: typing.List[str] = [],
        excluded_dir_name_list: typing.List[str] = [],
        excluded_file_name_list: typing.List[str] = [],
        use_gitignore: bool = True,
        dry_run: bool = False,
        include_ast_metadata: bool = True,
    ) -> "AiMdGenerator":
    """Merges the content of the given directory into the current file."""
â‹®----
def merge_dir_of_package_examples(self):
    """åˆå¹¶åŒ…çš„examplesç›®å½•åˆ°å½“å‰markdownæ–‡ä»¶"""
â‹®----
def _ast_to_source(self, node) -> str:
    """å°† AST èŠ‚ç‚¹è½¬æ¢ä¸ºæºä»£ç å­—ç¬¦ä¸²ï¼Œå…¼å®¹ Python 3.7+"""
â‹®----
import astor
â‹®----
def _parse_type_annotation(self, annotation) -> str:
    """è§£æç±»å‹æ³¨è§£ï¼Œè¿”å›å­—ç¬¦ä¸²è¡¨ç¤º"""
â‹®----
def _extract_function_metadata(self, node: typing.Union[ast.FunctionDef, ast.AsyncFunctionDef]) -> dict:
    """æå–å‡½æ•°/æ–¹æ³•çš„å…ƒæ•°æ®"""
â‹®----
def _extract_class_metadata(self, node: ast.ClassDef) -> dict:
    """æå–ç±»çš„å…ƒæ•°æ®"""
â‹®----
def _parse_python_file_ast(self, file_path: NbPath) -> dict:
    """è§£æ Python æ–‡ä»¶çš„ ASTï¼Œæå–æ‰€æœ‰å…ƒæ•°æ®"""
â‹®----
def _format_py_metadata_as_markdown(self, metadata: dict, relative_file_name: str) -> str:
    """å°† Python æ–‡ä»¶å…ƒæ•°æ®æ ¼å¼åŒ–ä¸º Markdown"""
â‹®----
def _format_parameters(self, parameters: list) -> str:
    """æ ¼å¼åŒ–å‡½æ•°å‚æ•°åˆ—è¡¨"""
â‹®----
def merge_from_files_with_metadata(
        self,
        relative_file_name_list: typing.List[str],
        as_title: str,
        project_root: typing.Union[os.PathLike, str] = None,
        include_ast_metadata: bool = True,
        include_file_text: bool = True,
    ) -> "AiMdGenerator":
    """
        åˆå¹¶æ–‡ä»¶å†…å®¹åˆ° Markdownï¼Œå¯¹äº Python æ–‡ä»¶ä¼šé¢å¤–ç”Ÿæˆ AST å…ƒæ•°æ®
        
        Args:
            project_root: é¡¹ç›®æ ¹ç›®å½•
            relative_file_name_list: ç›¸å¯¹æ–‡ä»¶è·¯å¾„åˆ—è¡¨
            as_title: æ ‡é¢˜
            include_ast_metadata: æ˜¯å¦åŒ…å« AST å…ƒæ•°æ®ï¼ˆä»…å¯¹ .py æ–‡ä»¶ï¼‰
            include_file_text: æ˜¯å¦åŒ…å«å®Œæ•´æ–‡ä»¶æºç ï¼ˆFalse æ—¶åªæ˜¾ç¤ºå…ƒæ•°æ®ï¼‰
        """
``````

## nb_ai_context/contrib/about.md

```markdown
some contribution about nb_path
```

## nb_ai_context/contrib/gen_github_proj_ai_md.py

```python
import typing
from nb_path import NbPath
from nb_ai_context import AiMdGenerator
import re
â‹®----
def extract_repo_name(github_url):
â‹®----
def gen_github_proj_docs_and_codes_ai_md(
    github_zip_url: str,
    output_md_path: str,
    docs_dir_name: str,
    codes_dir_name: str,
    readme_file: str,
    should_include_suffixes: list = None,
    excluded_dir_name_list: typing.List[str] = [],
    excluded_file_name_list: typing.List[str] = [],
):
    """
    Generate a Markdown document containing README, tutorials, and source code from a GitHub repository URL

    Args:
        github_zip_url: GitHub repository zip download link
                       Example: https://codeload.github.com/fastapi/sqlmodel/zip/refs/heads/main
        output_md_path: Output Markdown file path
        readme_file: README file name, default is "README.md"
        docs_dir_name: Documentation directory name, e.g. "docs"
        codes_dir_name: Source code directory name, e.g. "sqlmodel"
        should_include_suffixes: List of file extensions to include,
                                By default includes ['.py', '.java', '.go', '.md', '.html']
    """
â‹®----
def gen_github_proj_all_dirs_ai_md(
    github_zip_url: str,
    output_md_path: str,
    should_include_suffixes: list = None,
    excluded_dir_name_list: typing.List[str] = [],
    excluded_file_name_list: typing.List[str] = [],
):
    """
    ç”Ÿæˆgithubçš„é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶åˆ°markdownï¼Œ
    """
```

## nb_ai_context/__init__.py

```python
from nb_path import NbPath
from .ai_md_generator import AiMdGenerator
from .contrib.gen_github_proj_ai_md import gen_github_proj_docs_and_codes_ai_md,gen_github_proj_all_dirs_ai_md
```

## pub_pypi_nb_ai_context.py

```python
import os
import sys
import shutil
import time
import git_nb_ai_context
â‹®----
t_start = time.time()
â‹®----
t_end = time.time()
```

## pyproject.toml

```text
[build-system]
requires = ["setuptools>=45", "wheel", "setuptools_scm[toml]>=6.2"]
build-backend = "setuptools.build_meta"

[project]
name = "nb_ai_context"
version = "1.5"
description = "éå¸¸å¼ºåŠ›çš„å¯¹ä»»æ„ité¡¹ç›®ç”Ÿæˆaiä¸Šä¸‹æ–‡å•ä¸ªmarkdownæ–‡æ¡£ï¼Œä¸¢ç»™å¤§æ¨¡å‹æˆ–è€…çŸ¥è¯†åº“ï¼Œéå¸¸å¼ºåŠ›ï¼Œå¤§æ¨¡å‹å¹»è§‰å¤§å¹…åº¦å‡å°‘ã€‚å°¤å…¶æ˜¯å¯¹pythoné¡¹ç›®è¿˜æœ‰ä¸“é—¨çš„astè¯­æ³•æ ‘è§£æ"
keywords = ["ai", "ai context", "llm", "rag", "python","ast","ast metadata","ai context generator","markdown"]
authors = [
    {name = "ydf0509", email = "ydf0509@xxx.com"},
]
license = {text = "MIT"}
readme = "README.md"
requires-python = ">=3.7"
classifiers = [
    "Development Status :: 3 - Alpha",
    "Intended Audience :: Developers",
    "License :: OSI Approved :: MIT License",
    "Programming Language :: Python :: 3",
    "Programming Language :: Python :: 3.7",
    "Programming Language :: Python :: 3.8",
    "Programming Language :: Python :: 3.9",
    "Programming Language :: Python :: 3.10",
    "Programming Language :: Python :: 3.11",
    "Programming Language :: Python :: 3.12",
    "Programming Language :: Python :: 3.13",
    "Programming Language :: Python :: 3.14",
]
dependencies = [
    "typing_extensions>=3.7; python_version < '3.8'",
    "nb_path",
    "nb_log",
]

[project.optional-dependencies]
test = [
    "pytest>=6.0",
    "pytest-asyncio>=0.14",
]
dev = [
    "black>=21.0",
    "flake8>=3.8",
    "mypy>=0.812",
]

[project.urls]
Homepage = "https://github.com/ydf0509/nb_ai_context"
Repository = "https://github.com/ydf0509/nb_ai_context"
Issues = "https://github.com/ydf0509/nb_ai_context/issues"

[tool.setuptools.packages.find]
where = ["."]
include = ["nb_ai_context*"]

[tool.setuptools.package-data]
nb_ai_context = ["py.typed", "contrib/README.md"]
```

## README.md

````markdown
# nb_ai_context

[![PyPI version](https://img.shields.io/pypi/v/nb_ai_context.svg)](https://pypi.org/project/nb_ai_context/)
[![Python versions](https://img.shields.io/pypi/pyversions/nb_ai_context.svg)](https://pypi.org/project/nb_ai_context/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

ğŸš€ **æå…¶å¼ºå¤§çš„ AI ä¸Šä¸‹æ–‡ç”Ÿæˆå™¨** - å°†ä»»æ„ IT é¡¹ç›®åˆå¹¶ç”Ÿæˆä¸º1ä¸ªç»“æ„åŒ– Markdown æ–‡æ¡£ï¼Œæ–¹ä¾¿ä¸€æ¬¡ä¸Šä¼ ç»™aiå¤§æ¨¡å‹æˆ–è€…ragçŸ¥è¯†åº“ã€‚  

**`nb_ai_context` ç”Ÿæˆçš„markdownæ–‡ä»¶ ä¼ ç»™  `google ai studio` ï¼Œç”Ÿæˆä»£ç è´¨é‡å’Œå‡†ç¡®ç‡ï¼Œè¿œè¿œåŠæ‰“åœ¨ `cursor` `trae` `qoder` `gemini-code-assit` ç­‰ai ideä¸­å†™ä»£ç ã€‚**

<pre style="color: red;font-weight: bold;background-color:yellow;padding: 10px;border-radius: 5px;font-size: 16px;">
æœ¬äººå®æµ‹ï¼š
å°† nb_ai_context å¯¹é¡¹ç›®æ•™ç¨‹+æºç ç”Ÿæˆçš„å•ä¸ªmarkdownæ–‡ä»¶ ä¼ ç»™ `google ai studio` ç½‘é¡µç‰ˆ
çš„1000kä¸Šä¸‹æ–‡+gemini 3.0pro å¤§æ¨¡å‹ï¼Œå†æé—®è®©geminiå†™ä»£ç ï¼Œä»£ç ç”Ÿæˆçš„å‡†ç¡®ç‡å’Œè´¨é‡è¿œè¿œåŠæ‰“åœ¨ 
cursor trae qoderç­‰ai ideæˆ–gemini-code-assitç­‰ ç¼–ç¨‹æ’ä»¶ é‡Œé¢æé—®å†™ä»£ç ã€‚

 `google ai studio` ä¼˜ç‚¹æ˜¯1000kä¸Šä¸‹æ–‡ä»¥åŠå…è´¹ã€‚å”¯ä¸€ç¼ºç‚¹æ˜¯ä»–åœ¨ç½‘é¡µç”Ÿæˆä»£ç ï¼Œè€Œä¸æ˜¯ç›´æ¥æ“ä½œ
 ä¿®æ”¹ä½ çš„æœ¬åœ°ä»£ç æ–‡ä»¶ã€‚

 `nb_ai_context` ç”Ÿæˆçš„markdownä¸¢ç»™`google ai studio`å®Œçˆ†cursor traeç­‰ideä¸­å†™ä»£ç  
 ä¸»è¦åŸå› æ˜¯ï¼š  
`google ai studio` ç½‘é¡µç‰ˆæ˜¯å…¨é‡é˜…è¯»æ¨ç†ä½ ä¸Šä¼ çš„æ–‡ä»¶ï¼Œè€Œ aiç¼–ç¨‹ide å¯¹é•¿æ•™ç¨‹æˆ–è€…æºç ï¼Œ
ai agentè¯•å›¾é‡‡å–å…³é”®å­—æœç´¢åŒ¹é…å†æŠ•å–‚ä¸Šä¸‹æ–‡ç»™aiå¤§æ¨¡å‹ï¼Œï¼ˆæœ‰æ—¶å€™æ¨¡ç³Šæœç´¢çš„å…³é”®å­—å‹æ ¹æœä¸åˆ°å†…å®¹ï¼Œ
å› ä¸ºaié€ å‡ºæ¥çš„å…³é”®å­—ä¸æ˜¯å®Œå®Œå…¨å…¨çš„åŒ¹é…ä½ çš„å‡½æ•°åå­—æˆ–è€…æ•™ç¨‹å†…å®¹ï¼Œæ‰€ä»¥å°±æœä¸åˆ°ï¼Œ
ä¾‹å¦‚è¿‘ä¹‰è¯ï¼Œä½ ä»£ç ç”¨åˆ«çš„å•è¯è¡¨ç¤ºï¼Œaiå´ç”¨è‡ªå·±çš„å•è¯æ¥è¡¨ç¤ºï¼Œé å…³é”®å­—å‹æ ¹å°±æœä¸åˆ°å†…å®¹ï¼Œagentå’‹æŠ•å–‚aiå¤§æ¨¡å‹ï¼Ÿï¼‰
ai ide è¿™ç§æ–¹å¼ç®€ç›´æ˜¯ç®¡ä¸­çª¥è±¹ ä¸€å¶éšœç›®ä¸è§æ³°å±±ã€‚

æœ€æ ¹æœ¬åŸå› è¿˜æ˜¯ï¼š  
ai ide ä¸ºäº†å‡å°‘æˆæœ¬ï¼Œé˜²æ­¢tokenæ¶ˆè€—å¤§ï¼Œä¸ä¼šå…¨é‡æŠŠæºç æ•™ç¨‹å–‚ç»™aiå¤§æ¨¡å‹ï¼Œä¸ç„¶çš„é ç”¨æˆ·äº¤çš„é‚£20ç¾å…ƒçš„æœˆä¼šå‘˜ï¼Œ
cursorè¦äºå¾—è£¤è¡©æ²¡å¾—ç©¿ã€‚100ä¸‡ tokensä¸Šä¸‹æ–‡è¾“å…¥ï¼Œcalude gemini gpt ä»·æ ¼å¤§çº¦æ˜¯3ç¾å…ƒï¼Œç›¸å½“äº20å…ƒäººæ°‘å¸ï¼Œ
å¦‚æœé—®ä¸€æ¬¡å°±20å…ƒäººæ°‘å¸ï¼Œcursoræ¯ä¸ªæœˆç»™ä½ ç”¨8æ¬¡å°±è¦å¼€å§‹äºè¡€æœ¬äº†ï¼Œ(å¦å¤–tokensè¾“å‡ºä»·æ ¼è¿œé«˜äºè¾“å…¥ä»·æ ¼ï¼‰ï¼Œ
ç°åœ¨cursorè¿˜ç»™ä½ æ¯æœˆç”¨500æ¬¡ï¼Œé‚£ä»–åªèƒ½ä»èŠ‚çº¦tokensä¸‹æ‰‹äº†ï¼Œå…·ä½“è¡¨ç°å°±æ˜¯cursorä¸å…¨é‡æŠŠæ‰€æœ‰æ•™ç¨‹å’Œæºç 
å‘ç»™aiå¤§æ¨¡å‹æ¨ç†ã€‚

`nb_ai_context` å¯¹å¤§å‹ç¼–ç¨‹é¡¹ç›®çš„æ•ˆæœå°¤ä¸ºçªå‡ºï¼Œè¿œè¿œåŠæ‰“ cursor trae qoder gemini-code-assit ç­‰ai ideä¸­å†™ä»£ç ã€‚
</pre>

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ¯ ä¸ºä»€ä¹ˆéœ€è¦ nb_ai_contextï¼Ÿ

å½“ä½ æƒ³è®© AI å¤§æ¨¡å‹ï¼ˆå¦‚ ChatGPTã€Claudeï¼‰ç†è§£ä½ çš„æ•´ä¸ªé¡¹ç›®æ—¶ï¼Œæ‰‹åŠ¨å¤åˆ¶ç²˜è´´ä»£ç æ—¢ç¹çåˆå®¹æ˜“å‡ºé”™ã€‚`nb_ai_context` å½»åº•è§£å†³äº†è¿™ä¸ªç—›ç‚¹ï¼š

- âœ… **è‡ªåŠ¨åŒ–åˆå¹¶** - ä¸€é”®å°†æ•´ä¸ªé¡¹ç›®åˆå¹¶ä¸ºå•ä¸ª Markdown æ–‡ä»¶
- âœ… **ç»“æ„åŒ–è¾“å‡º** - åŒ…å«æ–‡ä»¶æ ‘ã€æ–‡ä»¶è¾¹ç•Œã€ç›¸å¯¹è·¯å¾„ï¼ŒAI èƒ½å®Œç¾ç†è§£é¡¹ç›®æ¶æ„
- âœ… **æ™ºèƒ½å…ƒæ•°æ®æå–** - å¯¹ Python é¡¹ç›®æä¾› AST è¯­æ³•æ ‘è§£æï¼Œè‡ªåŠ¨ç”Ÿæˆç±»ã€å‡½æ•°ã€æ–¹æ³•ç­¾å
- âœ… **å®‰å…¨å¯é ** - å†…ç½® `.gitignore` æ”¯æŒï¼Œè‡ªåŠ¨æ’é™¤æ•æ„Ÿä¿¡æ¯ï¼ˆAPI å¯†é’¥ã€.env æ–‡ä»¶ç­‰ï¼‰
- âœ… **çµæ´»å¯æ§** - æ”¯æŒæ–‡ä»¶è¿‡æ»¤ã€ç›®å½•æ’é™¤ã€è‡ªå®šä¹‰æ–‡ä»¶ç±»å‹
- âœ… **GitHub é¡¹ç›®æ”¯æŒ** - ç›´æ¥ä» GitHub zip ä¸‹è½½åœ°å€ç”Ÿæˆæ–‡æ¡£

### ğŸ’¡ **å…³é”®ä¼˜åŠ¿å¯¹æ¯”**
| æ–¹æ¡ˆ | ä¸Šä¸‹æ–‡å®Œæ•´æ€§ | Token æ¶ˆè€— | å®‰å…¨æ€§ | æˆæœ¬ |
|------|--------------|------------|--------|------|
| **Cursor/trae/qoder** | âŒ åˆ†æ®µé˜…è¯» | âš ï¸ é«˜ | âš ï¸ éœ€æ‰‹åŠ¨è¿‡æ»¤ | ğŸ’° ä»˜è´¹æ¬¡æ•°é™åˆ¶ |
| **æ‰‹åŠ¨å¤åˆ¶ç²˜è´´** | âŒ æ˜“é—æ¼ | âŒ æé«˜ | âŒ æ˜“æ³„éœ²æ•æ„Ÿä¿¡æ¯ | â° è€—æ—¶ |
| **nb_ai_context** | âœ… å®Œæ•´ç»“æ„åŒ– | âœ… AST å…ƒæ•°æ®ä¼˜åŒ– | âœ… è‡ªåŠ¨ `.gitignore` | ğŸ†“ å…è´¹å·¥å…· |



### ğŸ å¯¹ AI å¤§æ¨¡å‹çš„å·¨å¤§ä»·å€¼

1. **æä¾›ä¸Šå¸è§†è§’** ğŸ“
   - æ¸…æ™°çš„æ–‡ä»¶æ ‘å’Œæ–‡ä»¶è¾¹ç•Œ
   - å®Œæ•´çš„ç›¸å¯¹è·¯å¾„ä¿¡æ¯
   - AI èƒ½è½»æ¾æ„å»ºé¡¹ç›®çš„æ•´ä½“æ¶æ„å›¾

2. **ç¡®ä¿ä¿¡æ¯å®Œæ•´æ€§** ğŸ“š
   - æœªç»åˆ å‡çš„å®Œæ•´æºç 
   - é¿å…æ‰‹åŠ¨å¤åˆ¶å¯¼è‡´çš„æ ¼å¼æ··ä¹±
   - é›¶ä¸Šä¸‹æ–‡ç¼ºå¤±ï¼ŒAI åˆ†ææ›´ç²¾å‡†

3. **å¢å¼ºå®‰å…¨æ€§** ğŸ”’
   - è‡ªåŠ¨éµå¾ª `.gitignore` è§„åˆ™
   - é˜²æ­¢æ•æ„Ÿä¿¡æ¯æ³„éœ²
   - æ”¾å¿ƒåˆ†äº«ä»£ç ç»™ AI

4. **Python é¡¹ç›®ä¸“å±ä¼˜åŒ–** ğŸ
   - AST è¯­æ³•æ ‘è§£æ
   - è‡ªåŠ¨æå–ç±»ã€å‡½æ•°ã€æ–¹æ³•ç­¾å
   - å‚æ•°ç±»å‹ã€è¿”å›å€¼ã€è£…é¥°å™¨ä¸€ç›®äº†ç„¶

## ğŸ“¦ å®‰è£…

```bash
pip install nb_ai_context
```

**ä¾èµ–é¡¹ï¼š**
- Python >= 3.7
- nb_path
- nb_log

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¤ºä¾‹ 1ï¼šä¸ºæœ¬åœ° Python é¡¹ç›®ç”Ÿæˆ AI ä¸Šä¸‹æ–‡

```python
from nb_ai_context import AiMdGenerator

project_name = "my_awesome_project"
project_root = r"D:\codes\my_awesome_project"

project_summary = f"""
- `{project_name}` æ˜¯ä¸€ä¸ªä¼˜ç§€çš„ Python Web åº”ç”¨
- ä½¿ç”¨ FastAPI æ¡†æ¶
- åŒ…å«å®Œæ•´çš„ç”¨æˆ·è®¤è¯å’Œæƒé™ç®¡ç†
"""

(
    AiMdGenerator(rf"D:\ai_docs\{project_name}_for_ai.md")
    .set_project_propery(project_name=project_name, project_root=project_root)
    .clear_text()  # æ¸…ç©ºæ—§å†…å®¹
    .add_project_summary(
        project_summary=project_summary,
        # æ ¸å¿ƒæ–‡ä»¶åˆ—è¡¨ï¼ˆåªæå–å…ƒæ•°æ®ï¼Œä¸åŒ…å«å®Œæ•´æºç ï¼‰
        most_core_source_code_file_list=[
            "src/main.py",
            "src/api.py",
            "src/models.py",
        ],
    )
    .auto_merge_from_python_project_some_files()  # è‡ªåŠ¨åŒ…å« README.mdã€setup.pyã€pyproject.toml
    .merge_from_dir(
        relative_dir_name="src",
        as_title=f"{project_name} æºä»£ç ",
        use_gitignore=True,  # ä½¿ç”¨ .gitignore è§„åˆ™
        should_include_suffixes=[".py", ".md"],  # åªåŒ…å«æŒ‡å®šæ–‡ä»¶ç±»å‹
        include_ast_metadata=True,  # åŒ…å« AST å…ƒæ•°æ®
    )
    .merge_from_dir(
        relative_dir_name="tests",
        as_title=f"{project_name} æµ‹è¯•ä»£ç ",
        use_gitignore=True,
        should_include_suffixes=[".py"],
        excluded_dir_name_list=["tests/temp"],  # æ’é™¤ç‰¹å®šç›®å½•
        include_ast_metadata=True,
    )
    .show_textfile_info()  # æ˜¾ç¤ºç”Ÿæˆçš„æ–‡ä»¶ä¿¡æ¯
)
```

### ç¤ºä¾‹ 2ï¼šä» GitHub é¡¹ç›®ç”Ÿæˆ AI æ–‡æ¡£

```python
from nb_ai_context import gen_github_proj_docs_and_codes_ai_md
from nb_path import NbPath

# ç”Ÿæˆ SQLModel é¡¹ç›®çš„æ–‡æ¡£å’Œä»£ç 
gen_github_proj_docs_and_codes_ai_md(
    github_zip_url="https://codeload.github.com/fastapi/sqlmodel/zip/refs/heads/main",
    output_md_path=r"D:\ai_docs\sqlmodel_all_docs_and_codes.md",
    readme_file="README.md",
    docs_dir_name="docs",  # æ–‡æ¡£ç›®å½•
    codes_dir_name="sqlmodel",  # æºç ç›®å½•
    should_include_suffixes=[".py", ".md"],
    excluded_dir_name_list=["tests", "__pycache__"],
    excluded_file_name_list=["test_*.py"],
)
```

### ç¤ºä¾‹ 3ï¼šç”Ÿæˆ GitHub é¡¹ç›®çš„æ‰€æœ‰æ–‡ä»¶

```python
from nb_ai_context import gen_github_proj_all_dirs_ai_md

# ç”Ÿæˆæ•´ä¸ªé¡¹ç›®çš„æ‰€æœ‰æ–‡ä»¶
gen_github_proj_all_dirs_ai_md(
    github_zip_url="https://codeload.github.com/fastapi/sqlmodel/zip/refs/heads/main",
    output_md_path=r"D:\ai_docs\sqlmodel_all_files.md",
    should_include_suffixes=[".py", ".md", ".html"],
    excluded_dir_name_list=["node_modules", ".git", "__pycache__"],
)
```


## ä¸ºä»€ä¹ˆè¦è¿™ä¸ª nb_ai_context ï¼Ÿè„±äº†è£¤å­æ”¾å±ï¼Ÿè®©cusror trae å»é˜…è¯»é¡¹ç›®çš„æºç å’Œæ•™ç¨‹ï¼Œè¿˜èƒ½åœ¨ideé‡Œé¢ç”Ÿæˆä»£ç ï¼Œè¿™ä¸æ›´é¦™å—ï¼Ÿ(é¢„åˆ¤è´¨ç–‘)

- 1. æœ‰æ—¶å€™æ˜¯éideç¯å¢ƒé—®é¡¹ç›®çš„ç”¨æ³•

- 2. cursor å¤ªè´µäº†ï¼Œç»å¸¸æé—®cursoræµªè´¹å®è´µæ¬¡æ•°ï¼Œè¦æŠŠå®è´µæ¬¡æ•°ç•™ç»™çœŸæ­£çš„ä»£ç ç”Ÿæˆï¼Œè€Œä¸æ˜¯æé—®ã€‚
     cursor trae å­˜åœ¨ä¸Šä¸‹æ–‡å¤ªçŸ­ï¼Œè°ƒæ•™æˆä¸ç§¯æé˜…è¯»å…¨é‡æºç å’Œæ•™ç¨‹ç­‰é—®é¢˜ã€‚

- 3. å¯ä»¥ä½œä¸º rag åœ¨çº¿çŸ¥è¯†åº“ä½¿ç”¨ï¼Œè®©aiå¤§æ¨¡å‹é˜…è¯»ç”Ÿæˆçš„markdownï¼Œç„¶åå›ç­”é—®é¢˜ã€‚

- 4. å¯ä»¥æŠŠç”Ÿæˆçš„markdownä¸¢ç»™å…è´¹ä¸”ä¸Šä¸‹æ–‡æ— æ•Œé«˜è¾¾1000k çš„ `google ai studio` å»é˜…è¯»ï¼Œclaude gptæ‰256k tokenï¼Œå›½å†…å¤§æ¨¡å‹æ‰128k tokenï¼Œå‹æ ¹ä¸å¤Ÿç”¨ï¼Œ  
     åªæœ‰  google ai studio + gemini 3.0pro æ‰èƒ½å®Œæ•´é˜…è¯»é¡¹ç›®æºç åŠ æ•™ç¨‹ï¼Œå¹¶ä¸”å…è´¹ä½¿ç”¨ã€‚ 

- 5. `google ai studio` å¯¹äº4M ä»¥å†…çš„æ–‡ä»¶ï¼Œå¯ä»¥ä¸€æ¬¡æ€§å…¨é‡é˜…è¯»å…¨æ–‡+æ¨ç†ï¼Œå¹¶ä¸”å…è´¹ä½¿ç”¨ã€‚
     ä¸€èˆ¬ä¸‰æ–¹åŒ…é¡¹ç›®çš„æºç åŠ æ•™ç¨‹è¿œæ²¡æœ‰è¾¾åˆ°4Mã€‚
     å¦‚æœæ˜¯ç”¨æˆ·è‡ªå·±çš„çœŸå®é¡¹ç›®è€Œéæ¡†æ¶æˆ–è€…ä¸‰æ–¹åŒ…é¡¹ç›®ï¼Œé¡¹ç›®ä¸­å¯èƒ½åŒ…å«å¤§é‡å†™æ³•æ¨¡å¼éå¸¸é‡å¤çš„éœ€æ±‚ä»£ç ï¼Œä»£ç åŠ æ•™ç¨‹åŠ èµ·æ¥å¯èƒ½ä¼šè¶…è¿‡4Mï¼Œä½†æ˜¯ ç”¨æˆ·é¡¹ç›®æ ¸å¿ƒå…¬å…±å…¥å£å‡½æ•°å’Œç±»çš„ç”¨æ³•çš„æºç  + æ•™ç¨‹ ç»å¯¹ä¸è¶…è¿‡1Mã€‚

- 6. `nb_ai_context` æ”¯æŒæŒ‰æ–‡ä»¶å¤¹åˆå¹¶å’Œè¿‡æ»¤éœ€è¦åˆå¹¶çš„æ–‡ä»¶ï¼Œå¹¶ä¸”`nb_ai_context` æ”¯æŒ `ast` è§£æ ä»»ä½•pythonæ–‡ä»¶çš„ ç±» å‡½æ•° å…¥å‚ æ³¨é‡Š ç­‰ å…ƒä¿¡æ¯ï¼Œå¤§å¹…å‡å°‘tokenæ¶ˆè€—ï¼Œè®©aiæŠ“ä½é‡ç‚¹ã€‚  
     `AiMdGenerator.add_project_summary(most_core_source_code_file_list=[...])` æ”¯æŒæ·»åŠ é¡¹ç›®æ¦‚è¿°å’Œæ ¸å¿ƒæ–‡ä»¶å…ƒæ•°æ®ï¼Œè®©aiå¿«é€ŸæŠ“ä½é‡ç‚¹ã€‚  
     ä¸ç®¡é¡¹ç›®å¤šå¤æ‚æœ‰å‡ ç™¾ä¸ªclassç±»å’Œæ¨¡å—ï¼Œä½†çœŸæ­£èƒ½ä½œä¸ºå…¬å…±ä½¿ç”¨å…¥å£çš„æ¨¡å—ä¸€èˆ¬ä¸ä¼šè¶…è¿‡10ä¸ªã€‚  
     ä¾‹å¦‚ `funboost` é¡¹ç›® `python`æ–‡ä»¶é«˜è¾¾å‡ ç™¾ä¸ªï¼Œä½†çœŸæ­£èƒ½ä½œä¸ºæ¡†æ¶ä½¿ç”¨ç”¨æˆ·çº§åˆ«çš„å…¬å…±ä½¿ç”¨å…¥å£çš„pythonæ–‡ä»¶ä¹Ÿå°±ä¸‰å››ä¸ªï¼Œå…¶ä»–çš„pythonæ–‡ä»¶å‹æ ¹æ²¡æœºä¼šè¢«ç»ˆç«¯ç”¨æˆ·ç›´æ¥importå¹¶ä½¿ç”¨ã€‚


- 10. æœ€æœ€ä¸»è¦çš„åŸå› ï¼ï¼ï¼ cursor trae å†…ç½®çš„å¤§æ¨¡å‹éƒ½ä¸ä¹–ä¹–é˜…è¯»æ‰€æœ‰æºç å’Œæ•™ç¨‹ï¼Œå³ä½¿ä½ æ˜ç¡®å‘å‡ºæŒ‡ä»¤å¼ºè¿«ä»–é˜…è¯»æ‰€æœ‰æ•™ç¨‹å’Œæºç ï¼Œä»–ä¹Ÿä¼šå·æ‡’ä¸è¯»ï¼Œåªè¯»éƒ¨åˆ†ä»£ç ï¼Œå¯¼è‡´å¹»è§‰ç‡æé«˜ã€‚
      ä¸ºä»€ä¹ˆ cursor trae é‡Œé¢çš„å¤§æ¨¡å‹ä¸å…¨é‡é˜…è¯»å‘¢ï¼Œå› ä¸ºä»–æ—©å°±é¢„åˆ¤äº†æœ‰æµæ°“ç©å®¶æ¶æ„æ»¥ç”¨å¤§æ¨¡å‹ç®—åŠ›ï¼Œ å¦‚æœä½ è®©cursor + claude é˜…è¯»cç›˜ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œcursorå’Œclaude ä¼šè¿™ä¹ˆä¹–å—ï¼Ÿ
      cç›˜ä¸‹çš„æ–‡æœ¬æ–‡ä»¶é«˜è¾¾å‡ ç™¾äº¿è¡Œï¼Œå¦‚æœè¯»å®Œä¸€æ¬¡å°±ä¼šæ¶ˆè€—ä»·å€¼å‡ åä¸‡ç¾å…ƒçš„tokensï¼Œå¤§æ¨¡å‹å‚å•†äºå¾—è£¤è¡©æ²¡å¾—ç©¿ï¼Œä½ æ‰20ç¾å…ƒçš„åŒ…æœˆä¼šå‘˜ï¼Œcursorå’Œclaudeå‚å®¶ä¸è¢«ä½ è–…ç§ƒå™œçš®ï¼Ÿ
      æ‰€ä»¥ä¸ç®¡ç”¨æˆ·æ€ä¹ˆå¼ºè¿«cursor  traeå»é˜…è¯»æ‰€æœ‰æºç å’Œæ•™ç¨‹ï¼Œcursor å’Œ claude å’Œtraeéƒ½ä¸ä¼šå¬ä½ çš„è¯ã€‚

- 11. trae å’Œ cursor è¢«è°ƒæ•™é™åˆ¶äº†ï¼Œ traeä¸€æ¬¡æœ€å¤šé˜…è¯»200è¡Œï¼Œqoderä¸€æ¬¡æœ€å¤šé˜…è¯»1000è¡Œï¼Œå¯¹è¶…é•¿æ•™ç¨‹ï¼Œéœ€è¦åˆ†å¤šæ¬¡é˜…è¯»ï¼Œå¯¼è‡´å¹»è§‰ç‡æé«˜ï¼Œä½ è®©è¿™ç§ ai ide + å¤§æ¨¡å‹å»æ€»ç»“ é¡¹ç›®çš„ä¸­å¿ƒæ€æƒ³éå¸¸ä¸é è°±ã€‚ 
      å¹¶ä¸”åˆ†æ®µé˜…è¯»äº¤äº’æ¬¡æ•°é«˜è¾¾å‡ åæ¬¡ï¼Œå¤ªè´¹ç­‰å¾…æ—¶é—´äº†ã€‚
      å¹¶ä¸” ai ideé‡Œé¢é˜…è¯»é•¿æ–‡ä»¶ä¼šåˆ†æ‰¹é˜…è¯»ç›´åˆ°20æ¬¡å°±ä¼šè‡ªåŠ¨åœæ­¢ï¼Œä¾‹å¦‚æ–‡ä»¶æœ‰10000è¡Œï¼Œtraeä¸€æ¬¡é˜…è¯»200è¡Œï¼Œéœ€è¦50æ¬¡äº¤äº’ï¼Œä½†ai ideè®¾ç½®äº†æœ€å¤šäº¤äº’20æ¬¡å°±ä¼šè‡ªåŠ¨åœæ­¢ï¼›è¿™æ˜¯å› ä¸ºæ‹…å¿ƒæµæ°“æ¶æ„ç”¨æˆ·è®©ä»–é˜…è¯»1äº¿è¡Œçš„æ–‡ä»¶å¯¼è‡´è‡ªå·±è¡€äºï¼Œæ‰€ä»¥æœ€å¤šåˆ†æ®µé˜…è¯»20æ¬¡å°±ä¼šåœæ­¢ã€‚

- 12. è§£å†³ 10å’Œ11çš„ç—›ç‚¹é—®é¢˜ï¼Œ åªæœ‰ `google ai studio` æ‰èƒ½åšåˆ° ï¼Œ æˆ–è€…ä½¿ç”¨ragä¹Ÿå‹‰å¼ºå¯ä»¥ã€‚
      æŠŠæ–‡æ¡£ä¸Šä¼ ç»™ `google ai studio` ç½‘é¡µç‰ˆçš„1000kä¸Šä¸‹æ–‡çš„gemini pro è¿™ç§æ–¹å¼æœ€å¼ºï¼Œ å…¶æ¬¡æ˜¯ `rag`æ–¹å¼ã€‚
      å¯¹ 4Mä»¥å†…çš„æ–‡æ¡£ï¼ˆå¤§çº¦å°±æ˜¯1000k tokensï¼‰ï¼Œ æ¨èä½¿ç”¨  `google ai studio`ï¼Œä¸è¦ä½¿ç”¨ `rag` æ–¹å¼ã€‚
      è¶…è¿‡4Mæ–‡æ¡£çš„ä¸Šä¸‹æ–‡ï¼Œçªç ´äº†gemini 1000k token ä¸Šé™ï¼Œæ— æ³•ä½¿ç”¨ï¼Œæ­¤æ—¶éœ€è¦ä½¿ç”¨ `rag`æ–¹å¼ã€‚

- 13. ä¸€äº›ç½‘å€ï¼š
       google ai studio ç½‘å€  [https://aistudio.google.com/](https://aistudio.google.com/)    
       æ™ºè°±æ¸…è¨€ aiæ™ºèƒ½ä½“ç½‘å€ï¼Œå¯ä»¥æ”¯æŒå…è´¹rag  [chatglm.cn/main/gdetail/69168f75e8e6a00da25f55cc?lang=zh](chatglm.cn/main/gdetail/69168f75e8e6a00da25f55cc?lang=zh)    
       è…¾è®¯imaçŸ¥è¯†åº“ [ima.qq.com](https://ima.qq.com/)    



## ğŸ“– æ ¸å¿ƒ API è¯¦è§£

### AiMdGenerator ç±»

`AiMdGenerator` æ˜¯æ ¸å¿ƒç±»ï¼Œç»§æ‰¿è‡ª `NbPath`ï¼Œæ”¯æŒä¼˜é›…çš„é“¾å¼è°ƒç”¨ã€‚

#### ä¸»è¦æ–¹æ³•

##### 1. `set_project_propery(project_name, project_root)`
è®¾ç½®é¡¹ç›®åç§°å’Œæ ¹ç›®å½•ï¼ˆå¿…é¡»é¦–å…ˆè°ƒç”¨ï¼‰

```python
.set_project_propery(
    project_name="my_project",
    project_root=r"D:\codes\my_project"
)
```

##### 2. `add_project_summary(project_summary, most_core_source_code_file_list)`
æ·»åŠ é¡¹ç›®æ¦‚è¿°å’Œæ ¸å¿ƒæ–‡ä»¶å…ƒæ•°æ®

```python
.add_project_summary(
    project_summary="é¡¹ç›®æè¿°...",
    most_core_source_code_file_list=[
        "src/main.py",  # åªæå–è¿™äº›æ–‡ä»¶çš„ AST å…ƒæ•°æ®ï¼Œä¸åŒ…å«å®Œæ•´æºç 
        "src/api.py",
    ]
)
```

##### 3. `auto_merge_from_python_project_some_files()`
è‡ªåŠ¨åˆå¹¶é¡¹ç›®æ ¹ç›®å½•çš„å…³é”®æ–‡ä»¶ï¼ˆREADME.mdã€setup.pyã€pyproject.tomlï¼‰

```python
.auto_merge_from_python_project_some_files()
```

##### 4. `merge_from_files(relative_file_name_list, as_title)`
åˆå¹¶æŒ‡å®šæ–‡ä»¶åˆ—è¡¨

```python
.merge_from_files(
    relative_file_name_list=["docs/intro.md", "docs/api.md"],
    as_title="é¡¹ç›®æ–‡æ¡£"
)
```

##### 5. `merge_from_dir()` â­ æœ€å¼ºå¤§çš„æ–¹æ³•
åˆå¹¶æ•´ä¸ªç›®å½•çš„æ–‡ä»¶

```python
.merge_from_dir(
    relative_dir_name="src",           # ç›¸å¯¹ç›®å½•å
    as_title="æºä»£ç ",                  # ç« èŠ‚æ ‡é¢˜
    should_include_suffixes=[".py"],   # åŒ…å«çš„æ–‡ä»¶ç±»å‹
    excluded_dir_name_list=[],         # æ’é™¤çš„ç›®å½•åˆ—è¡¨
    excluded_file_name_list=[],        # æ’é™¤çš„æ–‡ä»¶åˆ—è¡¨
    use_gitignore=True,                # ä½¿ç”¨ .gitignore è§„åˆ™
    include_ast_metadata=True,         # åŒ…å« Python AST å…ƒæ•°æ®
)
```

**å‚æ•°è¯´æ˜ï¼š**
- `relative_dir_name`: ç›¸å¯¹äºé¡¹ç›®æ ¹ç›®å½•çš„è·¯å¾„
- `as_title`: åœ¨ç”Ÿæˆçš„ Markdown ä¸­çš„ç« èŠ‚æ ‡é¢˜
- `should_include_suffixes`: åªåŒ…å«è¿™äº›åç¼€çš„æ–‡ä»¶ï¼ˆç•™ç©ºåˆ™åŒ…å«æ‰€æœ‰æ–‡æœ¬æ–‡ä»¶ï¼‰
- `excluded_dir_name_list`: è¦æ’é™¤çš„ç›®å½•åˆ—è¡¨
- `excluded_file_name_list`: è¦æ’é™¤çš„æ–‡ä»¶åˆ—è¡¨
- `use_gitignore`: æ˜¯å¦éµå¾ª `.gitignore` è§„åˆ™ï¼ˆå¼ºçƒˆæ¨èå¼€å¯ï¼‰
- `include_ast_metadata`: å¯¹ Python æ–‡ä»¶æ˜¯å¦ç”Ÿæˆ AST å…ƒæ•°æ®
- `dry_run`: é¢„è§ˆæ¨¡å¼ï¼Œåªæ˜¾ç¤ºå°†è¦åŒ…å«çš„æ–‡ä»¶ï¼Œä¸å®é™…ç”Ÿæˆ

##### 6. `merge_from_files_with_metadata()`
å¸¦å…ƒæ•°æ®çš„æ–‡ä»¶åˆå¹¶ï¼ˆæ›´é«˜çº§çš„æ§åˆ¶ï¼‰

```python
.merge_from_files_with_metadata(
    relative_file_name_list=["src/main.py"],
    as_title="æ ¸å¿ƒä»£ç ",
    include_ast_metadata=True,   # æ˜¯å¦åŒ…å« AST å…ƒæ•°æ®
    include_file_text=True,      # æ˜¯å¦åŒ…å«å®Œæ•´æºç 
)
```

##### 7. `show_textfile_info()`
æ˜¾ç¤ºç”Ÿæˆæ–‡ä»¶çš„ç»Ÿè®¡ä¿¡æ¯

```python
.show_textfile_info()  # æ‰“å°æ–‡ä»¶å¤§å°ã€è¡Œæ•°ç­‰ä¿¡æ¯
```

### GitHub é¡¹ç›®å¤„ç†å‡½æ•°

#### `gen_github_proj_docs_and_codes_ai_md()`
ç”Ÿæˆ GitHub é¡¹ç›®çš„ READMEã€æ–‡æ¡£å’Œæºç 

```python
from nb_ai_context import gen_github_proj_docs_and_codes_ai_md

gen_github_proj_docs_and_codes_ai_md(
    github_zip_url="https://codeload.github.com/owner/repo/zip/refs/heads/main",
    output_md_path="output.md",
    readme_file="README.md",
    docs_dir_name="docs",
    codes_dir_name="src",
    should_include_suffixes=[".py", ".md"],
    excluded_dir_name_list=["tests"],
    excluded_file_name_list=["test_*.py"],
)
```

#### `gen_github_proj_all_dirs_ai_md()`
ç”Ÿæˆ GitHub é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶

```python
from nb_ai_context import gen_github_proj_all_dirs_ai_md

gen_github_proj_all_dirs_ai_md(
    github_zip_url="https://codeload.github.com/owner/repo/zip/refs/heads/main",
    output_md_path="output_all.md",
    should_include_suffixes=[".py", ".java", ".go", ".md"],
    excluded_dir_name_list=["node_modules", ".git"],
)
```

## ğŸ Python AST å…ƒæ•°æ®æå–

å¯¹äº Python æ–‡ä»¶ï¼Œ`nb_ai_context` ä¼šè‡ªåŠ¨æå–ä»¥ä¸‹å…ƒæ•°æ®ï¼š

### æå–å†…å®¹
- âœ… **æ¨¡å—æ–‡æ¡£å­—ç¬¦ä¸²**
- âœ… **å¯¼å…¥è¯­å¥** (import / from import)
- âœ… **ç±»å®šä¹‰**
  - ç±»åã€ç»§æ‰¿å…³ç³»ã€è£…é¥°å™¨
  - ç±»æ–‡æ¡£å­—ç¬¦ä¸²
  - å…¬æœ‰æ–¹æ³•ï¼ˆå«å‚æ•°ç±»å‹ã€è¿”å›å€¼ã€è£…é¥°å™¨ï¼‰
  - å±æ€§ (@property)
  - ç±»å˜é‡
- âœ… **é¡¶çº§å‡½æ•°**
  - å‡½æ•°ç­¾åï¼ˆå‚æ•°ç±»å‹ã€é»˜è®¤å€¼ã€è¿”å›å€¼ï¼‰
  - è£…é¥°å™¨
  - æ–‡æ¡£å­—ç¬¦ä¸²
  - å¼‚æ­¥å‡½æ•°æ ‡è¯†

### å…ƒæ•°æ®ç¤ºä¾‹è¾“å‡º

```markdown
### ğŸ“„ Python File Metadata: `src/main.py`

#### ğŸ“ Module Docstring
```
è¿™æ˜¯ä¸»æ¨¡å—ï¼ŒåŒ…å«åº”ç”¨çš„å…¥å£ç‚¹
```

#### ğŸ“¦ Imports
- `import os`
- `from typing import List, Optional`
- `from fastapi import FastAPI`

#### ğŸ›ï¸ Classes (2)

##### ğŸ“Œ `class UserService(BaseService)`
*Line: 15*

**Docstring:**
```
ç”¨æˆ·æœåŠ¡ç±»ï¼Œå¤„ç†ç”¨æˆ·ç›¸å…³çš„ä¸šåŠ¡é€»è¾‘
```

**Public Methods (3):**
- `def get_user(user_id: int) -> Optional[User]`
  - *è·å–ç”¨æˆ·ä¿¡æ¯*
- `async def create_user(name: str, email: str) -> User`
  - *åˆ›å»ºæ–°ç”¨æˆ·*
- `def update_user(user_id: int, **kwargs) -> bool`

**Properties (1):**
- `@property user_count -> int`

#### ğŸ”§ Public Functions (2)
- `async def startup_event() -> None`
  - *Line: 120*
  - *åº”ç”¨å¯åŠ¨äº‹ä»¶å¤„ç†*
```

## ğŸ¨ ç”Ÿæˆçš„ Markdown ç»“æ„

ç”Ÿæˆçš„ Markdown æ–‡æ¡£ç»“æ„æ¸…æ™°ï¼ŒåŒ…å«ï¼š

```markdown
# markdown content namespace: é¡¹ç›®æ¦‚è¿°

é¡¹ç›®æè¿°...

## ğŸ“‹ Core Source Files Metadata (Entry Points)
æ ¸å¿ƒæ–‡ä»¶çš„ AST å…ƒæ•°æ®ï¼ˆä¸å«æºç ï¼‰

---

# markdown content namespace: é¡¹ç›®æ ¹ç›®å½•æ–‡ä»¶

## File Tree
```
â”œâ”€â”€ README.md
â”œâ”€â”€ setup.py
â””â”€â”€ pyproject.toml
```

## Included Files
- `README.md`
- `setup.py`
- `pyproject.toml`

---

--- **start of file: README.md** ---
ï¼ˆæ–‡ä»¶å†…å®¹ï¼‰
--- **end of file: README.md** ---

---

# markdown content namespace: æºä»£ç 

## File Tree
ï¼ˆæ–‡ä»¶æ ‘ï¼‰

## Included Files
ï¼ˆæ–‡ä»¶åˆ—è¡¨ï¼‰

--- **start of file: src/main.py** ---

### ğŸ“„ Python File Metadata: `src/main.py`
ï¼ˆAST å…ƒæ•°æ®ï¼‰

```python
ï¼ˆå®Œæ•´æºç ï¼‰
```

--- **end of file: src/main.py** ---
```

## ğŸ”§ é«˜çº§ç”¨æ³•

### 1. é¢„è§ˆæ¨¡å¼ï¼ˆDry Runï¼‰

```python
(
    AiMdGenerator("output.md")
    .set_project_propery("my_project", r"D:\codes\my_project")
    .merge_from_dir(
        relative_dir_name="src",
        as_title="æºä»£ç ",
        dry_run=True,  # åªé¢„è§ˆï¼Œä¸å®é™…ç”Ÿæˆ
    )
)
```

### 2. åªæå–å…ƒæ•°æ®ï¼Œä¸åŒ…å«æºç 

```python
(
    AiMdGenerator("output.md")
    .set_project_propery("my_project", r"D:\codes\my_project")
    .merge_from_files_with_metadata(
        relative_file_name_list=["src/main.py"],
        as_title="æ ¸å¿ƒä»£ç æ¶æ„",
        include_ast_metadata=True,  # åŒ…å«å…ƒæ•°æ®
        include_file_text=False,    # ä¸åŒ…å«æºç 
    )
)
```

### 3. æ”¯æŒçš„æ–‡ä»¶ç±»å‹

`AiMdGenerator` æ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€çš„è¯­æ³•é«˜äº®ï¼š

```python
suffix__lang_map = {
    ".py": "python",
    ".java": "java",
    ".go": "go",
    ".js": "javascript",
    ".ts": "typescript",
    ".jsx": "javascript",
    ".tsx": "typescript",
    ".vue": "vue",
    ".php": "php",
    ".c": "c",
    ".cpp": "cpp",
    ".cs": "csharp",
    ".sql": "sql",
    ".sh": "shell",
    ".ps1": "powershell",
    ".md": "markdown",
    ".json": "json",
    ".yaml": "yaml",
    ".xml": "xml",
    ".html": "html",
    ".css": "css",
    # ... æ›´å¤š
}
```

## ğŸ¯ å®é™…åº”ç”¨åœºæ™¯

### 1. AI ä»£ç å®¡æŸ¥
ç”Ÿæˆå®Œæ•´é¡¹ç›®ä¸Šä¸‹æ–‡ï¼Œè®© AI å…¨é¢å®¡æŸ¥ä»£ç è´¨é‡ã€å®‰å…¨æ¼æ´ã€æ€§èƒ½é—®é¢˜ã€‚

### 2. æŠ€æœ¯æ–‡æ¡£ç”Ÿæˆ
å¿«é€Ÿä¸ºæ–°å›¢é˜Ÿæˆå‘˜ç”Ÿæˆé¡¹ç›®æ¦‚è§ˆæ–‡æ¡£ï¼Œé…åˆ AI è§£é‡Šä»£ç é€»è¾‘ã€‚

### 3. çŸ¥è¯†åº“æ„å»º
å°†é¡¹ç›®å†…å®¹å¯¼å…¥ RAG çŸ¥è¯†åº“ï¼Œå®ç°æ™ºèƒ½ä»£ç æœç´¢å’Œé—®ç­”ã€‚

### 4. é¡¹ç›®è¿ç§»å’Œé‡æ„
è®© AI ç†è§£æ•´ä¸ªé¡¹ç›®åï¼Œæä¾›é‡æ„å»ºè®®æˆ–è¿ç§»åˆ°æ–°æ¡†æ¶ã€‚

### 5. å­¦ä¹ å¼€æºé¡¹ç›®
ä¸‹è½½ GitHub é¡¹ç›®åç”Ÿæˆç»“æ„åŒ–æ–‡æ¡£ï¼Œé…åˆ AI å¿«é€Ÿç†è§£é¡¹ç›®æ¶æ„ã€‚

## ğŸ”’ å®‰å…¨æ€§

### `.gitignore` æ”¯æŒ

è®¾ç½® `use_gitignore=True` æ—¶ï¼Œä¼šè‡ªåŠ¨éµå¾ªé¡¹ç›®çš„ `.gitignore` è§„åˆ™ï¼š

```python
.merge_from_dir(
    relative_dir_name="src",
    use_gitignore=True,  # è‡ªåŠ¨æ’é™¤ .envã€*.log ç­‰æ•æ„Ÿæ–‡ä»¶
)
```

### è‡ªåŠ¨æ’é™¤
- è‡ªåŠ¨æ’é™¤ä»¥ `.` å¼€å¤´çš„éšè—ç›®å½•ï¼ˆå¦‚ `.git`ã€`.venv`ï¼‰
- æ”¯æŒæ‰‹åŠ¨æ’é™¤ç‰¹å®šç›®å½•å’Œæ–‡ä»¶

## ğŸ“Š æ€§èƒ½ç‰¹æ€§

- âœ… é«˜æ•ˆçš„æ–‡ä»¶éå†å’Œè¿‡æ»¤
- âœ… æ™ºèƒ½æ–‡æœ¬æ–‡ä»¶æ£€æµ‹
- âœ… æ”¯æŒå¤§å‹é¡¹ç›®ï¼ˆæ•°åƒä¸ªæ–‡ä»¶ï¼‰
- âœ… é“¾å¼è°ƒç”¨ï¼Œä»£ç ç®€æ´ä¼˜é›…

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ”— ç›¸å…³é“¾æ¥

- **GitHub**: https://github.com/ydf0509/nb_ai_context
- **PyPI**: https://pypi.org/project/nb_ai_context/
- **Issues**: https://github.com/ydf0509/nb_ai_context/issues

## ğŸ’¡ å¸¸è§é—®é¢˜

### Q: ç”Ÿæˆçš„ Markdown æ–‡ä»¶å¤ªå¤§æ€ä¹ˆåŠï¼Ÿ
A: ä½¿ç”¨ `should_include_suffixes` é™åˆ¶æ–‡ä»¶ç±»å‹ï¼Œæˆ–ä½¿ç”¨ `excluded_dir_name_list` æ’é™¤ä¸é‡è¦çš„ç›®å½•ï¼ˆå¦‚ `node_modules`ã€`venv`ï¼‰ã€‚

### Q: å¦‚ä½•åªç”Ÿæˆä»£ç ç»“æ„ï¼Œä¸åŒ…å«æºç ï¼Ÿ
A: ä½¿ç”¨ `merge_from_files_with_metadata()` æ–¹æ³•ï¼Œè®¾ç½® `include_file_text=False`ã€‚

### Q: æ”¯æŒå“ªäº›ç¼–ç¨‹è¯­è¨€ï¼Ÿ
A: æ‰€æœ‰æ–‡æœ¬æ–‡ä»¶éƒ½æ”¯æŒï¼Œä½† Python æ–‡ä»¶æœ‰ç‰¹æ®Šçš„ AST å…ƒæ•°æ®æå–æ”¯æŒã€‚



## ğŸŒŸ Star History

å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ª Star â­ï¸ï¼

---

**nb_ai_context** - è®© AI çœŸæ­£ç†è§£ä½ çš„ä»£ç  ğŸš€
````

## repomix-output.md

`````markdown
This file is a merged representation of the entire codebase, combining all repository files into a single document.
Generated by Repomix on: 2025-11-28 10:18:51

# File Summary

## Purpose:

This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.

## File Format:

The content is organized as follows:
1. This summary section
2. Repository information
3. Repository structure
4. Multiple file entries, each consisting of:
   a. A header with the file path (## File: path/to/file)
   b. The full contents of the file in a code block

## Usage Guidelines:

- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.

## Notes:

- Some files may have been excluded based on .gitignore rules and Repomix's
  configuration.
- Binary files are not included in this packed representation. Please refer to
  the Repository Structure section for a complete list of file paths, including
  binary files.

## Additional Information:

For more information about Repomix, visit: https://github.com/andersonby/python-repomix


# Repository Structure

```
.gitignore
examples
  AiMdGenerator_example.py
git_nb_ai_context.py
nb_ai_context
  ai_md_generator.py
  contrib
    about.md
    gen_github_proj_ai_md.py
  __init__.py
pub_pypi_nb_ai_context.py
pyproject.toml
README.md
tests
  ai_codes
    demo_init_extraction.py
    test_init_extraction.py
  ai_docs
    CHANGELOG_init_extraction.md
    complete_docstring_extraction.md
    init_extraction_feature.md
    UPDATE_SUMMARY.md
```

# Repository Files


## .gitignore

```text
# Byte-compiled / optimized / DLL files
__pycache__/
*.py[codz]
*$py.class

# C extensions
*.so

# Distribution / packaging
.Python
build/
develop-eggs/
dist/
downloads/
eggs/
.eggs/
lib/
lib64/
parts/
sdist/
var/
wheels/
share/python-wheels/
*.egg-info/
.installed.cfg
*.egg
MANIFEST

# PyInstaller
#  Usually these files are written by a python script from a template
#  before PyInstaller builds the exe, so as to inject date/other infos into it.
*.manifest
*.spec

# Installer logs
pip-log.txt
pip-delete-this-directory.txt

# Unit test / coverage reports
htmlcov/
.tox/
.nox/
.coverage
.coverage.*
.cache
nosetests.xml
coverage.xml
*.cover
*.py.cover
.hypothesis/
.pytest_cache/
cover/

# Translations
*.mo
*.pot

# Django stuff:
*.log
local_settings.py
db.sqlite3
db.sqlite3-journal

# Flask stuff:
instance/
.webassets-cache

# Scrapy stuff:
.scrapy

# Sphinx documentation
docs/_build/

# PyBuilder
.pybuilder/
target/

# Jupyter Notebook
.ipynb_checkpoints

# IPython
profile_default/
ipython_config.py

# pyenv
#   For a library or package, you might want to ignore these files since the code is
#   intended to run in multiple environments; otherwise, check them in:
# .python-version

# pipenv
#   According to pypa/pipenv#598, it is recommended to include Pipfile.lock in version control.
#   However, in case of collaboration, if having platform-specific dependencies or dependencies
#   having no cross-platform support, pipenv may install dependencies that don't work, or not
#   install all needed dependencies.
#Pipfile.lock

# UV
#   Similar to Pipfile.lock, it is generally recommended to include uv.lock in version control.
#   This is especially recommended for binary packages to ensure reproducibility, and is more
#   commonly ignored for libraries.
#uv.lock

# poetry
#   Similar to Pipfile.lock, it is generally recommended to include poetry.lock in version control.
#   This is especially recommended for binary packages to ensure reproducibility, and is more
#   commonly ignored for libraries.
#   https://python-poetry.org/docs/basic-usage/#commit-your-poetrylock-file-to-version-control
#poetry.lock
#poetry.toml

# pdm
#   Similar to Pipfile.lock, it is generally recommended to include pdm.lock in version control.
#   pdm recommends including project-wide configuration in pdm.toml, but excluding .pdm-python.
#   https://pdm-project.org/en/latest/usage/project/#working-with-version-control
#pdm.lock
#pdm.toml
.pdm-python
.pdm-build/

# pixi
#   Similar to Pipfile.lock, it is generally recommended to include pixi.lock in version control.
#pixi.lock
#   Pixi creates a virtual environment in the .pixi directory, just like venv module creates one
#   in the .venv directory. It is recommended not to include this directory in version control.
.pixi

# PEP 582; used by e.g. github.com/David-OConnor/pyflow and github.com/pdm-project/pdm
__pypackages__/

# Celery stuff
celerybeat-schedule
celerybeat.pid

# SageMath parsed files
*.sage.py

# Environments
.env
.envrc
.venv
env/
venv/
ENV/
env.bak/
venv.bak/

# Spyder project settings
.spyderproject
.spyproject

# Rope project settings
.ropeproject

# mkdocs documentation
/site

# mypy
.mypy_cache/
.dmypy.json
dmypy.json

# Pyre type checker
.pyre/

# pytype static type analyzer
.pytype/

# Cython debug symbols
cython_debug/

# PyCharm
#  JetBrains specific template is maintained in a separate JetBrains.gitignore that can
#  be found at https://github.com/github/gitignore/blob/main/Global/JetBrains.gitignore
#  and can be added to the global gitignore or merged into this file.  For a more nuclear
#  option (not recommended) you can uncomment the following to ignore the entire idea folder.
#.idea/

# Abstra
# Abstra is an AI-powered process automation framework.
# Ignore directories containing user credentials, local state, and settings.
# Learn more at https://abstra.io/docs
.abstra/

# Visual Studio Code
#  Visual Studio Code specific template is maintained in a separate VisualStudioCode.gitignore 
#  that can be found at https://github.com/github/gitignore/blob/main/Global/VisualStudioCode.gitignore
#  and can be added to the global gitignore or merged into this file. However, if you prefer, 
#  you could uncomment the following to ignore the entire vscode folder
# .vscode/

# Ruff stuff:
.ruff_cache/

# PyPI configuration file
.pypirc

# Cursor
#  Cursor is an AI-powered code editor. `.cursorignore` specifies files/directories to
#  exclude from AI features like autocomplete and code analysis. Recommended for sensitive data
#  refer to https://docs.cursor.com/context/ignore-files
.cursorignore
.cursorindexingignore

# Marimo
marimo/_static/
marimo/_lsp/
__marimo__/


markdown_gen_files_git_ignore/
```

## examples/AiMdGenerator_example.py

```python
from nb_ai_context import AiMdGenerator


project_name = "nb_ai_context"
project_root = rf"D:\codes\{project_name}"

project_summary = f"""
- `{project_name}` is a powerful ai llm context gennerator library ,it is uesd for ai llm and rag
- `AiMdGenerator(...)` is the main class to create ai context for llm.
"""


(
    AiMdGenerator(
        rf"D:\codes\nb_ai_context\markdown_gen_files_git_ignore\ai_md_files\{project_name}_all_docs_and_codes.md"
    )
    .set_project_propery(project_name=project_name, project_root=project_root)
    .clear_text()
    .add_project_summary(
        project_summary=project_summary,
        most_core_source_code_file_list=[
            "nb_ai_context/__init__.py",
            "nb_ai_context/ai_md_generator.py",
            "nb_ai_context/contrib/gen_github_proj_ai_md.py",
        ],
    )
    .auto_merge_from_python_project_some_files()
    .show_textfile_info()
    .merge_from_dir(
        relative_dir_name='examples',
        use_gitignore=True,
        as_title=f"{project_name} examples",
        # åªåŒ…å« .py å’Œ .md æ–‡ä»¶
        should_include_suffixes=[".py", ".md"],
        # æ’é™¤ __pycache__ ç›®å½•å’Œç‰¹å®šçš„æµ‹è¯•æ–‡ä»¶
        excluded_dir_name_list=[],
        include_ast_metadata=True,
    )
    .merge_from_dir(
        relative_dir_name=project_name,
        use_gitignore=True,
        as_title=f"{project_name} codes",
        # åªåŒ…å« .py å’Œ .md æ–‡ä»¶
        should_include_suffixes=[".py", ".md"],
        # æ’é™¤ __pycache__ ç›®å½•å’Œç‰¹å®šçš„æµ‹è¯•æ–‡ä»¶
        excluded_dir_name_list=[],
        include_ast_metadata=True,
    )
    .show_textfile_info()
)
```

## git_nb_ai_context.py

```python
import subprocess

import time

def getstatusoutput(cmd):
    try:
        data = subprocess.check_output(cmd, shell=True, universal_newlines=True,
                                       stderr=subprocess.STDOUT, encoding='utf8')  # Must set encoding to utf8 to avoid errors.
        exitcode = 0
    except subprocess.CalledProcessError as ex:
        data = ex.output
        exitcode = ex.returncode
    if data[-1:] == '\n':
        data = data[:-1]
    return exitcode, data

def do_cmd(cmd_strx):
    print(f'exec {cmd_strx}')
    retx = getstatusoutput(cmd_strx)
    print(retx[0])

    print(retx[1], '\n')
    return retx

t0 = time.time()

do_cmd('git pull')

do_cmd('git diff')

do_cmd('git add .')

do_cmd('git commit -m commit')



do_cmd('git push origin')

# print(subprocess.getstatusoutput('git push github'))
print(f'spend_time {time.time() - t0}')


if __name__ == '__main__':

    time.sleep(100000)
```

## nb_ai_context/ai_md_generator.py

````python
import typing
import os
import fnmatch
import ast

from nb_path import NbPath

class AiMdGenerator(NbPath):
    """
    An extremely powerful context generator born for AI collaboration.

    This class is designed to revolutionize how developers interact with Large Language
    Models (LLMs). It intelligently merges multiple project source files into a single,
    well-structured, and context-rich Markdown file, providing the AI with a perfect
    and comprehensive project snapshot.

    The benefits for large AI models are immense:
    1.  **Provides a God's-eye View**: Through a file manifest, clear file boundaries,
        and relative paths, the AI can easily construct the project's overall
        architecture and understand file dependencies and relationships, rather than
        fumbling in the dark.
    2.  **Ensures Information Integrity and Accuracy**: The AI receives complete,
        unabridged source file content, avoiding the chaos, omissions, or context
        loss caused by manual copy-pasting. This enables it to provide more precise
        analysis and suggestions.
    3.  **Enhances Security**: The built-in `use_gitignore` feature is a critical
        security barrier. It automatically ignores files containing sensitive
        information (like API keys or database passwords) such as `.env` or local
        configs, allowing you to share code without fear of accidental leaks.

    Its core methods, `merge_from_files` and `merge_from_dir`, offer extreme
    flexibility. Combined with the elegant chainable calls of `nb_path`, creating a
    high-quality AI context is transformed from a tedious, error-prone manual task
    into a single, delightful line of code.

    Example:
        >>> # Imagine you want an AI to review your entire project
        >>> project_name = "my_project"
        >>> project_summary = '''
        ... This is an excellent Python project that demonstrates best practices.
        ... It includes comprehensive documentation and well-structured code.
        ... '''
        >>> 
        >>> (
        ...     AiMdGenerator("project_context_for_ai.md")
        ...     .set_project_propery(project_name=project_name, project_root="/path/to/your/project")
        ...     .clear_text()  # Clear the old file
        ...     .add_project_summary(
        ...         project_summary=project_summary,
        ...         # Extract metadata (without full source) from core files first
        ...         most_core_source_code_file_list=[
        ...             "src/main.py",
        ...             "src/api.py",
        ...             "src/models.py",
        ...         ]
        ...     )
        ...     .auto_merge_from_python_project_some_files()  # Auto-include README, setup.py, etc.
        ...     .merge_from_dir(
        ...         relative_dir_name="src", # The main source code directory
        ...         as_title="Project Source Code",
        ...         use_gitignore=True,  # Automatically use .gitignore rules
        ...         should_include_suffixes=[".py", ".md"], # Only include specified file types
        ...         include_ast_metadata=True,  # Include AST metadata for Python files
        ...     )
        ...     .merge_from_dir(
        ...         relative_dir_name="tests", # The tests directory
        ...         as_title="Project Tests",
        ...         use_gitignore=True,
        ...         should_include_suffixes=[".py"],
        ...         excluded_dir_name_list=["tests/temp_files"],
        ...         include_ast_metadata=True,
        ...     )
        ... )
    """

    """cn description
    ä¸€ä¸ªæå…¶å¼ºå¤§çš„ã€ä¸º AI åä½œè€Œç”Ÿçš„ä¸Šä¸‹æ–‡ç”Ÿæˆå™¨ã€‚

    æ­¤ç±»æ—¨åœ¨å½»åº•æ”¹å˜å¼€å‘è€…ä¸å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰çš„äº¤äº’æ–¹å¼ã€‚å®ƒèƒ½å¤Ÿæ™ºèƒ½åœ°å°†å¤šä¸ªé¡¹ç›®æºæ–‡ä»¶
    åˆå¹¶æˆä¸€ä¸ªç»“æ„æ¸…æ™°ã€ä¸Šä¸‹æ–‡ä¸°å¯Œçš„å•ä¸€ Markdown æ–‡ä»¶ï¼Œä»è€Œä¸º AI æä¾›ä¸€ä¸ªå®Œç¾ã€å…¨é¢çš„é¡¹ç›®å¿«ç…§ã€‚

    å¯¹ AI å¤§æ¨¡å‹çš„å¥½å¤„æ˜¯å·¨å¤§çš„ï¼š
    1.  **æä¾›ä¸Šå¸è§†è§’**ï¼šé€šè¿‡æ–‡ä»¶æ¸…å•ã€æ¸…æ™°çš„æ–‡ä»¶è¾¹ç•Œå’Œç›¸å¯¹è·¯å¾„ï¼ŒAI èƒ½å¤Ÿè½»æ¾æ„å»ºå‡ºé¡¹ç›®çš„
        æ•´ä½“æ¶æ„ï¼Œç†è§£æ–‡ä»¶é—´çš„ä¾èµ–å’Œå¼•ç”¨å…³ç³»ï¼Œè€Œä¸æ˜¯ç›²äººæ‘¸è±¡ã€‚
    2.  **ç¡®ä¿ä¿¡æ¯çš„å®Œæ•´ä¸å‡†ç¡®**ï¼šAI å¾—åˆ°çš„æ˜¯æœªç»åˆ å‡çš„ã€å®Œæ•´çš„æºæ–‡ä»¶å†…å®¹ï¼Œé¿å…äº†å› æ‰‹åŠ¨
        å¤åˆ¶ç²˜è´´å¯¼è‡´çš„æ ¼å¼æ··ä¹±ã€å†…å®¹é—æ¼æˆ–ä¸Šä¸‹æ–‡ç¼ºå¤±ï¼Œä»è€Œèƒ½ç»™å‡ºæ›´ç²¾å‡†çš„åˆ†æå’Œå»ºè®®ã€‚
    3.  **æå‡å®‰å…¨æ€§**ï¼šå†…ç½®çš„ `use_gitignore` åŠŸèƒ½æ˜¯ä¸€é“å…³é”®çš„å®‰å…¨å±éšœã€‚å®ƒèƒ½è‡ªåŠ¨å¿½ç•¥
        `.env`ã€æœ¬åœ°é…ç½®ç­‰åŒ…å«æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚ API å¯†é’¥ã€æ•°æ®åº“å¯†ç ï¼‰çš„æ–‡ä»¶ï¼Œè®©ä½ åœ¨åˆ†äº«ä»£ç 
        æ—¶æ— éœ€æ‹…å¿ƒæ„å¤–æ³„éœ²ç§˜å¯†ã€‚

    å…¶æ ¸å¿ƒæ–¹æ³• `merge_from_files` å’Œ `merge_from_dir` æä¾›äº†æé«˜çš„çµæ´»æ€§ï¼Œç»“åˆ `nb_path`
    ä¼˜é›…çš„é“¾å¼è°ƒç”¨ï¼Œä½¿å¾—åˆ›å»ºä¸€ä¸ªé«˜è´¨é‡çš„ AI ä¸Šä¸‹æ–‡ä»ç¹çã€æ˜“é”™çš„æ‰‹å·¥åŠ³åŠ¨ï¼Œå˜æˆäº†ä¸€è¡Œ
    èµå¿ƒæ‚¦ç›®çš„ä»£ç ã€‚

    """

    suffix__lang_map = {
        ".py": "python",
        ".md": "markdown",
        ".txt": "text",
        ".json": "json",
        ".yaml": "yaml",
        ".yml": "yaml",
        ".xml": "xml",
        ".html": "html",
        ".css": "css",
        ".js": "javascript",
        ".ts": "typescript",
        ".jsx": "javascript",
        ".tsx": "typescript",
        ".vue": "vue",
        ".php": "php",
        ".java": "java",
        ".c": "c",
        ".cpp": "cpp",
        ".h": "h",
        ".hpp": "hpp",
        ".cs": "csharp",
        ".vb": "vb",
        ".sql": "sql",
        ".bat": "batch",
        ".sh": "shell",
        ".ps1": "powershell",
        ".psm1": "powershell",
        ".psd1": "powershell",
        ".pssc": "powershell",
        ".psscx": "powershell",
    }

    def set_project_propery(self, project_name: str, project_root: typing.Union[os.PathLike, str] ) -> "AiMdGenerator":
        """Sets the project name for the current markdown file."""
        self.project_name = project_name
        self.project_root = project_root
        return self
    
    def _check_project_name(self) -> "AiMdGenerator":
        """Checks if the project name is set."""
        if not hasattr(self, 'project_name'):
            raise ValueError("Project name is not set. Please call set_project_name() first.")
        return self

    def add_project_summary(
        self, 
        project_summary: str, 
        most_core_source_code_file_list: typing.List[str] = None,
        project_root: typing.Union[os.PathLike, str] = None,
    ) -> "AiMdGenerator":
        """
        Adds a project summary to the current markdown file.
        
        Args:
            project_summary: é¡¹ç›®æ¦‚è¿°æ–‡æœ¬
            project_root: é¡¹ç›®æ ¹ç›®å½•ï¼ˆå¦‚æœæä¾›äº† most_core_source_code_file_listï¼‰
            most_core_source_code_file_list: æœ€æ ¸å¿ƒçš„æºç æ–‡ä»¶åˆ—è¡¨ï¼ˆç›¸å¯¹è·¯å¾„ï¼‰
                                             åªæå–è¿™äº›æ–‡ä»¶çš„ AST å…ƒæ•°æ®ï¼Œä¸åŒ…å«å®Œæ•´æºç 
        
        Example:
            >>> (
            ...     AiMdGenerator("output.md")
            ...     .set_project_name("my_project")
            ...     .clear_text()
            ...     .add_project_summary(
            ...         project_summary="è¿™æ˜¯ä¸€ä¸ªä¼˜ç§€çš„é¡¹ç›®...",
            ...         project_root="/path/to/project",
            ...         most_core_source_code_file_list=["src/main.py", "src/api.py"],
            ...     )
            ... )
        """
        self._check_project_name()
        project_root =  project_root or self.project_root 
        str_list = [f"# markdown content namespace: {self.project_name} project summary \n\n"]
        str_list.append(project_summary)
        # str_list.append("\n---\n\n")
        
        # å¦‚æœæä¾›äº†æ ¸å¿ƒæ–‡ä»¶åˆ—è¡¨ï¼Œæå–å®ƒä»¬çš„å…ƒæ•°æ®ï¼ˆä¸åŒ…å«æºç ï¼‰
        if most_core_source_code_file_list and project_root:
            # str_list.append("\n---\n\n")
            str_list.append("\n## ğŸ“‹ Core Source Files Metadata (Entry Points)\n\n")
            str_list.append("ä»¥ä¸‹æ˜¯é¡¹ç›®æœ€æ ¸å¿ƒçš„å…¥å£æ–‡ä»¶çš„ç»“æ„åŒ–å…ƒæ•°æ®ï¼Œå¸®åŠ©å¿«é€Ÿç†è§£é¡¹ç›®æ¶æ„ï¼š\n\n")
            most_core_source_code_file_list_str = ''
            for relative_file_name in most_core_source_code_file_list:
                most_core_source_code_file_list_str += f"- `{relative_file_name}`\n"
            str_list.append(f'\n### the project {self.project_name} most core source code files as follows: \n{most_core_source_code_file_list_str}')
            
            
            project_root_path = NbPath(project_root).resolve()
            
            for relative_file_name in most_core_source_code_file_list:
                file = (project_root_path / relative_file_name).resolve()
                if not file.exists():
                    raise FileNotFoundError(f"File {file} not found.")

                if file.is_file() and file.is_text() and file.suffix == ".py":
                    relative_file_name_posix = file.relative_to(project_root_path).as_posix()
                    
                    self.logger.info(f"æå–æ ¸å¿ƒæ–‡ä»¶å…ƒæ•°æ®ï¼ˆæ— æºç ï¼‰: {relative_file_name_posix}")
                    
                    # åªæå–å…ƒæ•°æ®ï¼Œä¸åŒ…å«æºç 
                    metadata = self._parse_python_file_ast(file)
                    metadata_md = self._format_py_metadata_as_markdown(metadata, relative_file_name_posix)
                    str_list.append(metadata_md)
                    str_list.append("\n")
        
        self.append_text('\n'.join(str_list))
        return self

    def _generate_markdown_header(self, as_title: str, file_text_list: list) -> list:
        """ç”ŸæˆåŒ…å«æ–‡ä»¶æ ‘å’Œæ–‡ä»¶åˆ—è¡¨çš„ Markdown å¤´éƒ¨"""
        str_list = [f"# markdown content namespace: {as_title} \n\n"]

        # 1. ç”Ÿæˆæ–‡ä»¶æ ‘
        str_list.append("## File Tree\n\n")
        str_list.append("```\n")
        tree = {}
        sorted_paths = sorted([item[1] for item in file_text_list])
        for path in sorted_paths:
            parts = path.split('/')
            current_level = tree
            for part in parts:
                if part not in current_level:
                    current_level[part] = {}
                current_level = current_level[part]

        def format_tree(node, prefix=""):
            lines = []
            entries = sorted(node.keys())
            for i, entry in enumerate(entries):
                connector = "â”œâ”€â”€ " if i < len(entries) - 1 else "â””â”€â”€ "
                lines.append(f"{prefix}{connector}{entry}")
                if node[entry]:
                    extension = "â”‚   " if i < len(entries) - 1 else "    "
                    lines.extend(format_tree(node[entry], prefix + extension))
            return lines

        str_list.extend(format_tree(tree))
        str_list.append("\n```\n\n---\n\n")

        # 2. ç”Ÿæˆæ–‡ä»¶åˆ—è¡¨
        str_list.append("## Included Files\n\n")
        for _, relative_file_name_posix, _, _ in file_text_list:
            str_list.append(f"- `{relative_file_name_posix}`\n")
        str_list.append("\n---\n\n")

        return str_list

    def auto_merge_from_python_project_some_files(self, project_root: typing.Union[os.PathLike, str] = None) -> 'AiMdGenerator':
        """è‡ªåŠ¨åˆå¹¶é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ readme.md æˆ–è€…ReADME.md ä»¥åŠsetup.py å’Œ pyproject.toml ï¼Œå¦‚æœæœ‰å°±æ·»åŠ """
        self._check_project_name()
        project_root =  project_root or self.project_root
        file_merge_list = []
        
        # å®šä¹‰è¦æŸ¥æ‰¾çš„æ ¹ç›®å½•æ–‡ä»¶
        root_files_to_check = [
            "README.md",
            # "readme.md",
            "setup.py",
            "pyproject.toml"
        ]
        
        # æ£€æŸ¥æ¯ä¸ªæ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨åˆ™æ·»åŠ åˆ°åˆå¹¶åˆ—è¡¨ä¸­
        project_root_path = NbPath(project_root).resolve()
        for filename in root_files_to_check:
            file_path = project_root_path / filename
            if file_path.is_file() and file_path.is_text():
                file_merge_list.append(filename)
                
        self.merge_from_files(file_merge_list, f"{self.project_name} Project Root Dir Some Files",project_root, )
        return self

    def merge_from_files(
        self,
        relative_file_name_list: typing.List[str],
        as_title: str,
        project_root: typing.Union[os.PathLike, str] = None,
    ) -> "AiMdGenerator":
        """Merges the content of the given files into the current markdown file.
        the current markdown file will be used to upload to ai model for code review and learning.
        """
        self._check_project_name()
        project_root =  project_root or self.project_root
        file_text_list = []
        project_root_path = NbPath(project_root).resolve()
        for relative_file_name in relative_file_name_list:
            file = (project_root_path / relative_file_name).resolve()
            if not file.exists():
                raise FileNotFoundError(f"File {file} not found.")
            if file.is_file() and file.is_text():
                relative_file_name_posix = file.relative_to(
                    project_root_path
                ).as_posix()
                try:
                    text = file.read_text()
                except Exception as e:
                    self.logger.error(f"Error reading file {file}: {e}")
                    text = ""
                file_text_list.append(
                    [file, relative_file_name_posix, file.suffix, text]
                )
                self.logger.debug(f"need merged file: {file}")
            else:
                raise ValueError(f"File {file} is not a text file.")
        str_list = []
        if file_text_list:
            # è°ƒç”¨æ–°å‡½æ•°ç”Ÿæˆå¤´éƒ¨
            str_list.extend(self._generate_markdown_header(as_title, file_text_list))


        for file, relative_file_name_posix, suffix, text in file_text_list:
            # 2. Remove the debug print statement.
            # print(f'file: {file}, relative_file_name_posix: {relative_file_name_posix}, suffix: {suffix}, text: {text}')
            str_list.append(f"--- **start of file: {relative_file_name_posix}** --- \n")
            # 3. Handle .md files separately to ensure their content is rendered correctly.
            #    Other file types are wrapped in code blocks.
            if suffix == ".md":
                str_list.append(text + "\n")
            else:
                lang = self.suffix__lang_map.get(suffix, "text")
                str_list.append(f"``{lang}\n{text}\n```\n")

            str_list.append(f"--- **end of file: {relative_file_name_posix}** --- \n")
            str_list.append("---\n\n")

        # with self.open(mode="a", encoding="utf-8") as f:
        #     f.write("\n".join(str_list))
        self.append_text('\n'.join(str_list))
        self.ensure_utf8_bom()
        return self
        
        
    def merge_from_dir(
        self,
        relative_dir_name: str,
        as_title: str,
        project_root: typing.Union[os.PathLike, str] = None,
        should_include_suffixes: typing.List[str] = [],
        excluded_dir_name_list: typing.List[str] = [],
        excluded_file_name_list: typing.List[str] = [],
        use_gitignore: bool = True,
        dry_run: bool = False,
        include_ast_metadata: bool = True,
    ) -> "AiMdGenerator":
        """Merges the content of the given directory into the current file."""
        project_root =  project_root or self.project_root
        project_root_path = NbPath(project_root).resolve()
        target_dir_path = (project_root_path / relative_dir_name).resolve()
        if not target_dir_path.exists():
            raise FileNotFoundError(f"Directory {target_dir_path} not found.")

        # Use sets for efficient lookups
        excluded_dir_paths = {
            (project_root_path / d).resolve() for d in excluded_dir_name_list
        }
        excluded_file_paths = {
            (project_root_path / f).resolve() for f in excluded_file_name_list
        }

        ignore_patterns = []
        if use_gitignore:
            try:
                gitignore_path = project_root_path.find_git_root() / ".gitignore"
                if gitignore_path.is_file():
                    self.logger.debug(f"Using .gitignore rules from: {gitignore_path}")
                    with open(gitignore_path, "r", encoding="utf-8") as f:
                        for line in f:
                            line = line.strip()
                            if line and not line.startswith("#"):
                                # Gitignore patterns always use forward slashes.
                                # We will compare against the posix version of the relative path
                                # for cross-platform reliability.
                                ignore_patterns.append(line)
            except FileNotFoundError:
                self.logger.warning("use_gitignore is True, but no .git/ or .gitignore file found.")

        relative_paths_to_include = []
        for path_obj in target_dir_path.rglob("*"):
            # Automatically exclude directories starting with a dot at the project root
            try:
                first_part = path_obj.relative_to(project_root_path).parts[0]
                if first_part.startswith('.'):
                    continue
            except (ValueError, IndexError):
                continue
            # Check if the path is within any of the excluded directories
            is_in_excluded_dir = any(
                path_obj == excluded_dir or excluded_dir in path_obj.parents
                for excluded_dir in excluded_dir_paths
            )
            if is_in_excluded_dir:
                continue

            # Check if the path matches any gitignore patterns.
            # Convert the relative path to a posix-style string for reliable matching.
            relative_to_root = path_obj.relative_to(project_root_path)
            relative_posix_path = relative_to_root.as_posix()
            # Use fnmatch for robust gitignore-style pattern matching.
            is_ignored = False
            for p in ignore_patterns:
                # If a pattern does not contain a slash, it matches in any directory.
                # e.g., 'test_git_ignore1.py' should match 'nb_path/example_dir/test_git_ignore1.py'
                if '/' not in p.strip('/'):
                    p_glob = f"**/{p.strip('/')}"
                else:
                    p_glob = p
                if fnmatch.fnmatch(relative_posix_path, p_glob) or fnmatch.fnmatch(relative_posix_path, p):
                    is_ignored = True
                    break
            if is_ignored:
                self.logger.debug(f"Ignoring {relative_to_root} due to .gitignore rule.")
                continue

            if path_obj.is_file():
                # Check if the file itself is excluded
                if path_obj.resolve() in excluded_file_paths:
                    continue
                # Check if the file is a text file
                if not path_obj.is_text():
                    continue
                # Check if the suffix is in the inclusion list (if the list is not empty)
                if (
                    should_include_suffixes
                    and path_obj.suffix not in should_include_suffixes
                ):
                    continue
                relative_paths_to_include.append(
                    path_obj.relative_to(project_root_path).as_posix()
                )

        if dry_run:
            print("\n--- [DRY RUN] AiMdGenerator Execution Plan ---")
            print(f"\nâœ… {len(relative_paths_to_include)} files would be INCLUDED in '{self.name}':")
            for p in sorted(relative_paths_to_include):
                print(f"  - {p}")
            print("\n--- End of DRY RUN ---")
            return self
        else:
            # ä½¿ç”¨å¸¦å…ƒæ•°æ®çš„æ–¹æ³•
            return self.merge_from_files_with_metadata(
                 
                relative_paths_to_include, 
                as_title,
                project_root=project_root,
                include_ast_metadata=include_ast_metadata
            )

    def merge_dir_of_package_examples(self):
        """åˆå¹¶åŒ…çš„examplesç›®å½•åˆ°å½“å‰markdownæ–‡ä»¶"""
        self._check_project_name()
        self.merge_from_dir(
            relative_dir_name=self.project_name,
            use_gitignore=True,
            as_title=f"{self.project_name} codes",
            # åªåŒ…å« .py å’Œ .md æ–‡ä»¶
            should_include_suffixes=[".py", ".md"],
            # æ’é™¤ __pycache__ ç›®å½•å’Œç‰¹å®šçš„æµ‹è¯•æ–‡ä»¶
            excluded_dir_name_list=[],
        ).merge_from_dir(
            relative_dir_name="examples",
            use_gitignore=True,
            as_title=f"{self.project_name} examples",
            # åªåŒ…å« .py å’Œ .md æ–‡ä»¶
            should_include_suffixes=[".py", ".md"],
            # æ’é™¤ __pycache__ ç›®å½•å’Œç‰¹å®šçš„æµ‹è¯•æ–‡ä»¶
            excluded_dir_name_list=[],
            include_ast_metadata=False,
        )
        return self

    def _ast_to_source(self, node) -> str:
        """å°† AST èŠ‚ç‚¹è½¬æ¢ä¸ºæºä»£ç å­—ç¬¦ä¸²ï¼Œå…¼å®¹ Python 3.7+"""
        if node is None:
            return ""
        try:
            # Python 3.9+ æ”¯æŒ ast.unparse
            if hasattr(ast, 'unparse'):
                return ast.unparse(node)
            else:
                # Python 3.7/3.8 çš„å›é€€æ–¹æ¡ˆ
                # å°è¯•ä½¿ç”¨ astor
                try:
                    import astor
                    return astor.to_source(node).strip()
                except ImportError:
                    pass
                
                # ç®€å•çš„æ‰‹å·¥å¤„ç†å¸¸è§æƒ…å†µ
                if isinstance(node, ast.Name):
                    return node.id
                elif isinstance(node, ast.Constant):
                    return repr(node.value)
                elif isinstance(node, ast.Attribute):
                    value = self._ast_to_source(node.value)
                    return f"{value}.{node.attr}"
                elif isinstance(node, ast.Subscript):
                    value = self._ast_to_source(node.value)
                    slice_val = self._ast_to_source(node.slice)
                    return f"{value}[{slice_val}]"
                elif isinstance(node, (ast.List, ast.Tuple)):
                    elts = [self._ast_to_source(e) for e in node.elts]
                    if isinstance(node, ast.List):
                        return f"[{', '.join(elts)}]"
                    else:
                        return f"({', '.join(elts)})"
                else:
                    # å¯¹äºå¤æ‚ç±»å‹ï¼Œè¿”å›ç±»å‹åç§°
                    return node.__class__.__name__
        except Exception:
            return ""

    def _parse_type_annotation(self, annotation) -> str:
        """è§£æç±»å‹æ³¨è§£ï¼Œè¿”å›å­—ç¬¦ä¸²è¡¨ç¤º"""
        return self._ast_to_source(annotation)

    def _extract_function_metadata(self, node: typing.Union[ast.FunctionDef, ast.AsyncFunctionDef]) -> dict:
        """æå–å‡½æ•°/æ–¹æ³•çš„å…ƒæ•°æ®"""
        metadata = {
            "name": node.name,
            "type": "async_function" if isinstance(node, ast.AsyncFunctionDef) else "function",
            "lineno": node.lineno,
            "docstring": ast.get_docstring(node) or "",
            "parameters": [],
            "return_type": self._parse_type_annotation(node.returns),
            "decorators": [self._ast_to_source(dec) for dec in node.decorator_list],
            "is_public": not node.name.startswith("_"),
        }

        # æå–å‚æ•°ä¿¡æ¯
        for arg in node.args.args:
            param_info = {
                "name": arg.arg,
                "type": self._parse_type_annotation(arg.annotation),
                "default": None,
            }
            metadata["parameters"].append(param_info)

        # å¤„ç†é»˜è®¤å‚æ•°
        defaults = node.args.defaults
        if defaults:
            # é»˜è®¤å€¼ä»åå¾€å‰å¯¹åº”å‚æ•°
            num_defaults = len(defaults)
            for i, default in enumerate(defaults):
                param_idx = len(metadata["parameters"]) - num_defaults + i
                if param_idx >= 0:
                    try:
                        metadata["parameters"][param_idx]["default"] = self._ast_to_source(default)
                    except Exception:
                        metadata["parameters"][param_idx]["default"] = "<complex_default>"

        # å¤„ç† *args å’Œ **kwargs
        if node.args.vararg:
            metadata["parameters"].append({
                "name": f"*{node.args.vararg.arg}",
                "type": self._parse_type_annotation(node.args.vararg.annotation),
                "default": None,
            })
        if node.args.kwarg:
            metadata["parameters"].append({
                "name": f"**{node.args.kwarg.arg}",
                "type": self._parse_type_annotation(node.args.kwarg.annotation),
                "default": None,
            })

        return metadata

    def _extract_class_metadata(self, node: ast.ClassDef) -> dict:
        """æå–ç±»çš„å…ƒæ•°æ®"""
        metadata = {
            "name": node.name,
            "type": "class",
            "lineno": node.lineno,
            "docstring": ast.get_docstring(node) or "",
            "bases": [self._ast_to_source(base) for base in node.bases],
            "decorators": [self._ast_to_source(dec) for dec in node.decorator_list],
            "methods": [],
            "properties": [],
            "class_variables": [],
            "is_public": not node.name.startswith("_"),
        }

        # éå†ç±»çš„æˆå‘˜
        for item in node.body:
            if isinstance(item, (ast.FunctionDef, ast.AsyncFunctionDef)):
                method_info = self._extract_function_metadata(item)
                
                # æ£€æŸ¥æ˜¯å¦æ˜¯ property
                is_property = any("property" in dec for dec in method_info["decorators"])
                if is_property:
                    metadata["properties"].append(method_info)
                else:
                    metadata["methods"].append(method_info)
            
            elif isinstance(item, ast.AnnAssign) and isinstance(item.target, ast.Name):
                # ç±»å˜é‡ï¼ˆå¸¦ç±»å‹æ³¨è§£ï¼‰
                value_str = ""
                if item.value:
                    try:
                        value_str = self._ast_to_source(item.value)
                        # é™åˆ¶å€¼çš„é•¿åº¦
                        if len(value_str) > 50:
                            value_str = value_str[:50] + "..."
                    except Exception:
                        value_str = "<value>"
                
                metadata["class_variables"].append({
                    "name": item.target.id,
                    "type": self._parse_type_annotation(item.annotation),
                    "value": value_str,
                    "lineno": item.lineno,
                })
            elif isinstance(item, ast.Assign):
                # ç±»å˜é‡ï¼ˆæ— ç±»å‹æ³¨è§£ï¼‰
                for target in item.targets:
                    if isinstance(target, ast.Name):
                        # æå–å€¼
                        value_str = ""
                        if item.value:
                            try:
                                value_str = self._ast_to_source(item.value)
                                # é™åˆ¶å€¼çš„é•¿åº¦
                                if len(value_str) > 50:
                                    value_str = value_str[:50] + "..."
                            except Exception:
                                value_str = "<value>"
                        
                        metadata["class_variables"].append({
                            "name": target.id,
                            "type": "",
                            "value": value_str,
                            "lineno": item.lineno,
                        })

        return metadata

    def _parse_python_file_ast(self, file_path: NbPath) -> dict:
        """è§£æ Python æ–‡ä»¶çš„ ASTï¼Œæå–æ‰€æœ‰å…ƒæ•°æ®"""
        try:
            source_code = file_path.read_text(encoding="utf-8")
            # ç§»é™¤ BOM (Byte Order Mark) å­—ç¬¦ï¼Œå¦‚æœå­˜åœ¨çš„è¯
            # BOM æ˜¯ U+FEFFï¼Œåœ¨ UTF-8 ç¼–ç ä¸­æ˜¯ \ufeff
            if source_code.startswith('\ufeff'):
                source_code = source_code[1:]
                self.logger.debug(f"Removed BOM from file: {file_path}")
            tree = ast.parse(source_code, filename=str(file_path))
        except Exception as e:
            self.logger.error(f"Failed to parse Python file {file_path}: {e}")
            return {
                "error": str(e),
                "classes": [],
                "functions": [],
                "imports": [],
                "module_docstring": "",
            }

        metadata = {
            "file": str(file_path),
            "module_docstring": ast.get_docstring(tree) or "",
            "classes": [],
            "functions": [],
            "imports": [],
            "constants": [],
        }

        # éå†æ¨¡å—çº§åˆ«çš„èŠ‚ç‚¹
        for node in ast.walk(tree):
            # åªå¤„ç†æ¨¡å—çº§åˆ«çš„å®šä¹‰ï¼ˆé€šè¿‡æ£€æŸ¥çˆ¶èŠ‚ç‚¹ï¼‰
            if isinstance(node, ast.ClassDef):
                # æ£€æŸ¥æ˜¯å¦æ˜¯é¡¶çº§ç±»ï¼ˆä¸åœ¨å…¶ä»–ç±»å†…éƒ¨ï¼‰
                parent = None
                for potential_parent in ast.walk(tree):
                    if isinstance(potential_parent, ast.ClassDef) and node in ast.walk(potential_parent) and node != potential_parent:
                        parent = potential_parent
                        break
                if parent is None:  # é¡¶çº§ç±»
                    metadata["classes"].append(self._extract_class_metadata(node))

            elif isinstance(node, (ast.FunctionDef, ast.AsyncFunctionDef)):
                # æ£€æŸ¥æ˜¯å¦æ˜¯é¡¶çº§å‡½æ•°ï¼ˆä¸åœ¨ç±»å†…éƒ¨ï¼‰
                parent_class = None
                for potential_parent in ast.walk(tree):
                    if isinstance(potential_parent, ast.ClassDef) and node in ast.walk(potential_parent):
                        parent_class = potential_parent
                        break
                if parent_class is None:  # é¡¶çº§å‡½æ•°
                    metadata["functions"].append(self._extract_function_metadata(node))

            elif isinstance(node, (ast.Import, ast.ImportFrom)):
                if isinstance(node, ast.Import):
                    for alias in node.names:
                        metadata["imports"].append({
                            "type": "import",
                            "module": alias.name,
                            "alias": alias.asname,
                            "lineno": node.lineno,
                        })
                else:  # ImportFrom
                    module = node.module or ""
                    for alias in node.names:
                        metadata["imports"].append({
                            "type": "from_import",
                            "module": module,
                            "name": alias.name,
                            "alias": alias.asname,
                            "lineno": node.lineno,
                        })

        return metadata

    def _format_py_metadata_as_markdown(self, metadata: dict, relative_file_name: str) -> str:
        """å°† Python æ–‡ä»¶å…ƒæ•°æ®æ ¼å¼åŒ–ä¸º Markdown"""
        lines = []
        lines.append(f"\n### ğŸ“„ Python File Metadata: `{relative_file_name}`\n")

        # æ¨¡å—æ–‡æ¡£å­—ç¬¦ä¸²
        if metadata.get("module_docstring"):
            lines.append("#### ğŸ“ Module Docstring\n")
            lines.append("```")
            lines.append(metadata["module_docstring"])
            lines.append("```\n")

        # å¯¼å…¥ä¿¡æ¯
        if metadata.get("imports"):
            lines.append("#### ğŸ“¦ Imports\n")
            for imp in metadata["imports"]:  # æ˜¾ç¤ºæ‰€æœ‰ importsï¼Œä¸å†é™åˆ¶æ•°é‡
                if imp["type"] == "import":
                    alias_str = f" as {imp['alias']}" if imp['alias'] else ""
                    lines.append(f"- `import {imp['module']}{alias_str}`")
                else:
                    alias_str = f" as {imp['alias']}" if imp['alias'] else ""
                    lines.append(f"- `from {imp['module']} import {imp['name']}{alias_str}`")
            lines.append("")

        # ç±»ä¿¡æ¯
        if metadata.get("classes"):
            lines.append(f"#### ğŸ›ï¸ Classes ({len(metadata['classes'])})\n")
            for cls in metadata["classes"]:
                # åªæ˜¾ç¤ºå…¬æœ‰ç±»æˆ–æ‰€æœ‰ç±»ï¼ˆæ ¹æ®éœ€è¦ï¼‰
                class_header = f"##### ğŸ“Œ `class {cls['name']}"
                if cls["bases"]:
                    class_header += f"({', '.join(cls['bases'])})"
                class_header += "`"
                lines.append(class_header)
                lines.append(f"*Line: {cls['lineno']}*\n")
                
                if cls["docstring"]:
                    # æ˜¾ç¤ºå®Œæ•´çš„ç±»æ–‡æ¡£å­—ç¬¦ä¸²
                    docstring_lines = cls["docstring"].split("\n")
                    lines.append("**Docstring:**")
                    lines.append("```")
                    lines.extend(docstring_lines)
                    lines.append("```\n")

                # é¦–å…ˆå•ç‹¬æ˜¾ç¤º __init__ æ–¹æ³•ï¼ˆéå¸¸é‡è¦ï¼‰
                init_method = None
                for method in cls["methods"]:
                    if method["name"] == "__init__":
                        init_method = method
                        break
                
                if init_method:
                    lines.append("**ğŸ”§ Constructor (`__init__`):**")
                    params_str = self._format_parameters(init_method["parameters"])
                    lines.append(f"- `def __init__({params_str})`")
                    
                    # æ˜¾ç¤º __init__ çš„å®Œæ•´æ–‡æ¡£å­—ç¬¦ä¸²
                    if init_method["docstring"]:
                        lines.append("  - **Docstring:**")
                        lines.append("  ```")
                        for doc_line in init_method["docstring"].split("\n"):
                            lines.append(f"  {doc_line}")
                        lines.append("  ```")
                    
                    # æ˜¾ç¤ºæ¯ä¸ªå‚æ•°çš„è¯¦ç»†ä¿¡æ¯
                    if init_method["parameters"]:
                        lines.append("  - **Parameters:**")
                        for param in init_method["parameters"]:
                            param_name = param["name"]
                            param_type = f": {param['type']}" if param["type"] else ""
                            param_default = f" = {param['default']}" if param["default"] else ""
                            lines.append(f"    - `{param_name}{param_type}{param_default}`")
                    lines.append("")

                # å…¬æœ‰æ–¹æ³•ï¼ˆæ’é™¤ __init__ï¼‰
                public_methods = [m for m in cls["methods"] if m["is_public"] and m["name"] != "__init__"]
                if public_methods:
                    lines.append(f"**Public Methods ({len(public_methods)}):**")
                    for method in public_methods:
                        params_str = self._format_parameters(method["parameters"])
                        return_str = f" -> {method['return_type']}" if method["return_type"] else ""
                        async_str = "async " if method["type"] == "async_function" else ""
                        
                        decorators_str = ""
                        if method["decorators"]:
                            decorators_str = " " + " ".join([f"`{d}`" for d in method["decorators"]])
                        
                        lines.append(f"- `{async_str}def {method['name']}({params_str}){return_str}`{decorators_str}")
                        
                        # æ˜¾ç¤ºå®Œæ•´çš„æ–‡æ¡£å­—ç¬¦ä¸²
                        if method["docstring"]:
                            # å¦‚æœæ–‡æ¡£å­—ç¬¦ä¸²åªæœ‰ä¸€è¡Œï¼Œç”¨ç®€çŸ­æ ¼å¼æ˜¾ç¤º
                            docstring_lines = method["docstring"].split("\n")
                            if len(docstring_lines) == 1:
                                lines.append(f"  - *{method['docstring'].strip()}*")
                            else:
                                # å¤šè¡Œæ–‡æ¡£å­—ç¬¦ä¸²ï¼Œç”¨ä»£ç å—æ ¼å¼æ˜¾ç¤º
                                lines.append("  - **Docstring:**")
                                lines.append("  ```")
                                for doc_line in docstring_lines:
                                    lines.append(f"  {doc_line}")
                                lines.append("  ```")
                    lines.append("")

                # Properties
                if cls["properties"]:
                    lines.append(f"**Properties ({len(cls['properties'])}):**")
                    for prop in cls["properties"]:
                        return_str = f" -> {prop['return_type']}" if prop["return_type"] else ""
                        lines.append(f"- `@property {prop['name']}{return_str}`")
                    lines.append("")

                # ç±»å˜é‡
                if cls["class_variables"]:
                    lines.append(f"**Class Variables ({len(cls['class_variables'])}):**")
                    for var in cls["class_variables"]:
                        type_str = f": {var['type']}" if var["type"] else ""
                        value_str = f" = {var['value']}" if var.get("value") else ""
                        lines.append(f"- `{var['name']}{type_str}{value_str}`")
                    lines.append("")

        # é¡¶çº§å‡½æ•°
        if metadata.get("functions"):
            public_functions = [f for f in metadata["functions"] if f["is_public"]]
            if public_functions:
                lines.append(f"#### ğŸ”§ Public Functions ({len(public_functions)})\n")
                for func in public_functions:
                    params_str = self._format_parameters(func["parameters"])
                    return_str = f" -> {func['return_type']}" if func["return_type"] else ""
                    async_str = "async " if func["type"] == "async_function" else ""
                    
                    decorators_str = ""
                    if func["decorators"]:
                        decorators_str = " " + " ".join([f"`{d}`" for d in func["decorators"]])
                    
                    lines.append(f"- `{async_str}def {func['name']}({params_str}){return_str}`{decorators_str}")
                    lines.append(f"  - *Line: {func['lineno']}*")
                    
                    if func["docstring"]:
                        # å¦‚æœæ–‡æ¡£å­—ç¬¦ä¸²åªæœ‰ä¸€è¡Œï¼Œç”¨ç®€çŸ­æ ¼å¼æ˜¾ç¤º
                        docstring_lines = func["docstring"].split("\n")
                        if len(docstring_lines) == 1:
                            lines.append(f"  - *{func['docstring'].strip()}*")
                        else:
                            # å¤šè¡Œæ–‡æ¡£å­—ç¬¦ä¸²ï¼Œç”¨ä»£ç å—æ ¼å¼æ˜¾ç¤º
                            lines.append("  - **Docstring:**")
                            lines.append("  ```")
                            for doc_line in docstring_lines:
                                lines.append(f"  {doc_line}")
                            lines.append("  ```")
                    lines.append("")

        lines.append("\n---\n")
        return "\n".join(lines)

    def _format_parameters(self, parameters: list) -> str:
        """æ ¼å¼åŒ–å‡½æ•°å‚æ•°åˆ—è¡¨"""
        param_strs = []
        for param in parameters:
            param_str = param["name"]
            if param["type"]:
                param_str += f": {param['type']}"
            if param["default"]:
                param_str += f" = {param['default']}"
            param_strs.append(param_str)
        return ", ".join(param_strs)

    def merge_from_files_with_metadata(
        self,
        relative_file_name_list: typing.List[str],
        as_title: str,
        project_root: typing.Union[os.PathLike, str] = None,
        include_ast_metadata: bool = True,
        include_file_text: bool = True,
    ) -> "AiMdGenerator":
        """
        åˆå¹¶æ–‡ä»¶å†…å®¹åˆ° Markdownï¼Œå¯¹äº Python æ–‡ä»¶ä¼šé¢å¤–ç”Ÿæˆ AST å…ƒæ•°æ®
        
        Args:
            project_root: é¡¹ç›®æ ¹ç›®å½•
            relative_file_name_list: ç›¸å¯¹æ–‡ä»¶è·¯å¾„åˆ—è¡¨
            as_title: æ ‡é¢˜
            include_ast_metadata: æ˜¯å¦åŒ…å« AST å…ƒæ•°æ®ï¼ˆä»…å¯¹ .py æ–‡ä»¶ï¼‰
            include_file_text: æ˜¯å¦åŒ…å«å®Œæ•´æ–‡ä»¶æºç ï¼ˆFalse æ—¶åªæ˜¾ç¤ºå…ƒæ•°æ®ï¼‰
        """
        self._check_project_name()
        project_root =  project_root or self.project_root
        file_text_list = []
        project_root_path = NbPath(project_root).resolve()
        
        for relative_file_name in relative_file_name_list:
            file = (project_root_path / relative_file_name).resolve()
            if not file.exists():
                raise FileNotFoundError(f"File {file} not found.")
            if file.is_file() and file.is_text():
                relative_file_name_posix = file.relative_to(project_root_path).as_posix()
                try:
                    text = file.read_text()
                except Exception as e:
                    self.logger.error(f"Error reading file {file}: {e}")
                    text = ""
                
                file_text_list.append([file, relative_file_name_posix, file.suffix, text])
                self.logger.debug(f"need merged file: {file}")
            else:
                raise ValueError(f"File {file} is not a text file.")
        
        str_list = []
        if file_text_list:
            str_list.extend(self._generate_markdown_header(as_title, file_text_list))

        for file, relative_file_name_posix, suffix, text in file_text_list:
            # å¦‚æœä¸åŒ…å«æ–‡ä»¶å†…å®¹ï¼Œåªè¾“å‡ºå…ƒæ•°æ®ï¼ˆä»…å¯¹ Python æ–‡ä»¶ï¼‰
            if not include_file_text:
                if suffix == ".py" and include_ast_metadata:
                    # åªæ˜¾ç¤ºå…ƒæ•°æ®ï¼Œä¸æ˜¾ç¤ºæºç 
                    metadata = self._parse_python_file_ast(file)
                    metadata_md = self._format_py_metadata_as_markdown(metadata, relative_file_name_posix)
                    str_list.append(metadata_md)
                    str_list.append("\n")
                # é Python æ–‡ä»¶è·³è¿‡
                continue
            
            # æ­£å¸¸æµç¨‹ï¼šåŒ…å«æ–‡ä»¶å†…å®¹
            str_list.append(f"--- **start of file: {relative_file_name_posix}** --- \n")
            
            # å¯¹äº Python æ–‡ä»¶ï¼Œæ·»åŠ  AST å…ƒæ•°æ®
            if suffix == ".py" and include_ast_metadata:
                metadata = self._parse_python_file_ast(file)
                metadata_md = self._format_py_metadata_as_markdown(metadata, relative_file_name_posix)
                str_list.append(metadata_md)
            
            # æ·»åŠ å®Œæ•´çš„æ–‡ä»¶å†…å®¹
            if suffix == ".md":
                str_list.append(text + "\n")
            else:
                lang = self.suffix__lang_map.get(suffix, "text")
                str_list.append(f"```{lang}\n{text}\n```\n")

            str_list.append(f"--- **end of file: {relative_file_name_posix}** --- \n")
            str_list.append("---\n\n")

        self.append_text('\n'.join(str_list))
        self.ensure_utf8_bom()
        return self
````

## nb_ai_context/contrib/about.md

```markdown
some contribution about nb_path
```

## nb_ai_context/contrib/gen_github_proj_ai_md.py

```python
"""
Generate tutorials and code from any GitHub project into a markdown file for AI context

Download GitHub project zip file
https://codeload.github.com/fastapi/sqlmodel/zip/refs/heads/main
https://codeload.github.com/fastapi/sqlmodel/zip/refs/tags/0.0.25

Unzip the file
Generate markdown file
"""

import typing
from nb_path import NbPath
from nb_ai_context import AiMdGenerator
import re


def extract_repo_name(github_url):
    # Match GitHub codeload URL pattern
    pattern = r"https://codeload\.github\.com/[^/]+/([^/]+)"
    match = re.search(pattern, github_url)
    if match:
        return match.group(1)
    return None


def gen_github_proj_docs_and_codes_ai_md(
    github_zip_url: str,
    output_md_path: str,
    docs_dir_name: str,
    codes_dir_name: str,
    readme_file: str,
    should_include_suffixes: list = None,
    excluded_dir_name_list: typing.List[str] = [],
    excluded_file_name_list: typing.List[str] = [],
):
    """
    Generate a Markdown document containing README, tutorials, and source code from a GitHub repository URL

    Args:
        github_zip_url: GitHub repository zip download link
                       Example: https://codeload.github.com/fastapi/sqlmodel/zip/refs/heads/main
        output_md_path: Output Markdown file path
        readme_file: README file name, default is "README.md"
        docs_dir_name: Documentation directory name, e.g. "docs"
        codes_dir_name: Source code directory name, e.g. "sqlmodel"
        should_include_suffixes: List of file extensions to include,
                                By default includes ['.py', '.java', '.go', '.md', '.html']
    """
    project_name = extract_repo_name(github_zip_url)
    if should_include_suffixes is None:
        should_include_suffixes = [".py", ".java", ".go", ".md", ".html"]

    with NbPath.tempdir() as temp_dir:
        # Download zip file
        zip_file = temp_dir / "repo.zip"
        zip_file.download_from_url(github_zip_url)

        # Unzip the file
        unzip_dir = zip_file.unzip_to(temp_dir / "unzip")
        project_root = list(unzip_dir.iterdir())[
            0
        ]  # Get the project root directory after extraction

        print(f"tempdir github project_root: {project_root}")

        # Create AiMdGenerator instance and chain calls

        md_generator = (
            AiMdGenerator(output_md_path)
            .set_project_propery(project_name=project_name, project_root=project_root)
            .clear_text()
            .merge_from_files(
                relative_file_name_list=[readme_file],
                as_title=f"{project_name}  README",
            )
            .merge_from_dir(
                relative_dir_name=docs_dir_name,
                as_title=f"{project_name}  Documentation",
                should_include_suffixes=should_include_suffixes,
                use_gitignore=False,
                excluded_dir_name_list=excluded_dir_name_list,
                excluded_file_name_list=excluded_file_name_list,
            )
            .merge_from_dir(
                relative_dir_name=codes_dir_name,
                as_title=f"{project_name}  Source Code",
                should_include_suffixes=should_include_suffixes,
                use_gitignore=False,
                excluded_dir_name_list=excluded_dir_name_list,
                excluded_file_name_list=excluded_file_name_list,
            )
            .show_textfile_info()
        )

        return md_generator


def gen_github_proj_all_dirs_ai_md(
    github_zip_url: str,
    output_md_path: str,
    should_include_suffixes: list = None,
    excluded_dir_name_list: typing.List[str] = [],
    excluded_file_name_list: typing.List[str] = [],
):
    """
    ç”Ÿæˆgithubçš„é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶åˆ°markdownï¼Œ
    """
    project_name = extract_repo_name(github_zip_url)
    if should_include_suffixes is None:
        should_include_suffixes = [".py", ".java", ".go", ".md", ".html"]

    with NbPath.tempdir() as temp_dir:
        # Download zip file
        zip_file = temp_dir / "repo.zip"
        zip_file.download_from_url(github_zip_url)

        # Unzip the file
        unzip_dir = zip_file.unzip_to(temp_dir / "unzip")
        project_root = list(unzip_dir.iterdir())[
            0
        ]  # Get the project root directory after extraction

        print(f"tempdir github project_root: {project_root}")

        # Create AiMdGenerator instance and chain calls

        md_generator = (
            AiMdGenerator(output_md_path)
            .set_project_propery(project_name=project_name, project_root=project_root)
            .clear_text()
            .merge_from_dir(
                relative_dir_name=".",
                as_title=f"{project_name}  all files",
                should_include_suffixes=should_include_suffixes,
                use_gitignore=False,
                excluded_dir_name_list=excluded_dir_name_list,
                excluded_file_name_list=excluded_file_name_list,
            )
            .show_textfile_info()
        )

        return md_generator


if __name__ == "__main__":
    # Example: Generate documentation for sqlmodel project
    gen_github_proj_docs_and_codes_ai_md(
        github_zip_url="https://codeload.github.com/fastapi/sqlmodel/zip/refs/heads/main",
        output_md_path=NbPath(
            r"D:\codes\nb_ai_context\markdown_gen_files_git_ignore\ai_md_files\other_peoples"
        )
        .joinpath("sqlmodel_all_docs_and_codes.md")
        .ensure_parent(),
        readme_file="README.md",
        docs_dir_name="docs",
        codes_dir_name="sqlmodel",
        should_include_suffixes=[
            ".py",
            ".md",
        ],
    )

    gen_github_proj_all_dirs_ai_md(
        github_zip_url="https://codeload.github.com/fastapi/sqlmodel/zip/refs/heads/main",
        output_md_path=NbPath(
            r"D:\codes\nb_ai_context\markdown_gen_files_git_ignore\ai_md_files\other_peoples"
        )
        .joinpath("sqlmodel_all_dirs.md")
        .ensure_parent(),
    )
```

## nb_ai_context/__init__.py

```python
from nb_path import NbPath
from .ai_md_generator import AiMdGenerator

from .contrib.gen_github_proj_ai_md import gen_github_proj_docs_and_codes_ai_md,gen_github_proj_all_dirs_ai_md
```

## pub_pypi_nb_ai_context.py

```python
import os
import sys
import shutil
import time
import git_nb_ai_context

# sys.path.append(os.path.dirname(os.path.dirname(os.path.abspath(__file__))))

t_start = time.time()
os.system("python -m build")
t_end = time.time()
print(f"build time: {t_end - t_start}")

t_start = time.time()
os.system("twine upload dist/*")
t_end = time.time()
print(f"upload time: {t_end - t_start}")

if os.path.exists("dist"):
    shutil.rmtree("dist")


print(time.strftime("%Y-%m-%d %H:%M:%S"))

time.sleep(1000000)
```

## pyproject.toml

```text
[build-system]
requires = ["setuptools>=45", "wheel", "setuptools_scm[toml]>=6.2"]
build-backend = "setuptools.build_meta"

[project]
name = "nb_ai_context"
version = "1.5"
description = "éå¸¸å¼ºåŠ›çš„å¯¹ä»»æ„ité¡¹ç›®ç”Ÿæˆaiä¸Šä¸‹æ–‡å•ä¸ªmarkdownæ–‡æ¡£ï¼Œä¸¢ç»™å¤§æ¨¡å‹æˆ–è€…çŸ¥è¯†åº“ï¼Œéå¸¸å¼ºåŠ›ï¼Œå¤§æ¨¡å‹å¹»è§‰å¤§å¹…åº¦å‡å°‘ã€‚å°¤å…¶æ˜¯å¯¹pythoné¡¹ç›®è¿˜æœ‰ä¸“é—¨çš„astè¯­æ³•æ ‘è§£æ"
keywords = ["ai", "ai context", "llm", "rag", "python","ast","ast metadata","ai context generator","markdown"]
authors = [
    {name = "ydf0509", email = "ydf0509@xxx.com"},
]
license = {text = "MIT"}
readme = "README.md"
requires-python = ">=3.7"
classifiers = [
    "Development Status :: 3 - Alpha",
    "Intended Audience :: Developers",
    "License :: OSI Approved :: MIT License",
    "Programming Language :: Python :: 3",
    "Programming Language :: Python :: 3.7",
    "Programming Language :: Python :: 3.8",
    "Programming Language :: Python :: 3.9",
    "Programming Language :: Python :: 3.10",
    "Programming Language :: Python :: 3.11",
    "Programming Language :: Python :: 3.12",
    "Programming Language :: Python :: 3.13",
    "Programming Language :: Python :: 3.14",
]
dependencies = [
    "typing_extensions>=3.7; python_version < '3.8'",
    "nb_path",
    "nb_log",
]

[project.optional-dependencies]
test = [
    "pytest>=6.0",
    "pytest-asyncio>=0.14",
]
dev = [
    "black>=21.0",
    "flake8>=3.8",
    "mypy>=0.812",
]

[project.urls]
Homepage = "https://github.com/ydf0509/nb_ai_context"
Repository = "https://github.com/ydf0509/nb_ai_context"
Issues = "https://github.com/ydf0509/nb_ai_context/issues"

[tool.setuptools.packages.find]
where = ["."]
include = ["nb_ai_context*"]

[tool.setuptools.package-data]
nb_ai_context = ["py.typed", "contrib/README.md"]
```

## README.md

````markdown
# nb_ai_context

[![PyPI version](https://img.shields.io/pypi/v/nb_ai_context.svg)](https://pypi.org/project/nb_ai_context/)
[![Python versions](https://img.shields.io/pypi/pyversions/nb_ai_context.svg)](https://pypi.org/project/nb_ai_context/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

ğŸš€ **æå…¶å¼ºå¤§çš„ AI ä¸Šä¸‹æ–‡ç”Ÿæˆå™¨** - å°†ä»»æ„ IT é¡¹ç›®åˆå¹¶ç”Ÿæˆä¸º1ä¸ªç»“æ„åŒ– Markdown æ–‡æ¡£ï¼Œæ–¹ä¾¿ä¸€æ¬¡ä¸Šä¼ ç»™aiå¤§æ¨¡å‹æˆ–è€…ragçŸ¥è¯†åº“ã€‚  

**`nb_ai_context` ç”Ÿæˆçš„markdownæ–‡ä»¶ ä¼ ç»™  `google ai studio` ï¼Œç”Ÿæˆä»£ç è´¨é‡å’Œå‡†ç¡®ç‡ï¼Œè¿œè¿œåŠæ‰“åœ¨ `cursor` `trae` `qoder` `gemini-code-assit` ç­‰ai ideä¸­å†™ä»£ç ã€‚**

<pre style="color: red;font-weight: bold;background-color:yellow;padding: 10px;border-radius: 5px;font-size: 16px;">
æœ¬äººå®æµ‹ï¼š
å°† nb_ai_context å¯¹é¡¹ç›®æ•™ç¨‹+æºç ç”Ÿæˆçš„å•ä¸ªmarkdownæ–‡ä»¶ ä¼ ç»™ `google ai studio` ç½‘é¡µç‰ˆ
çš„1000kä¸Šä¸‹æ–‡+gemini 3.0pro å¤§æ¨¡å‹ï¼Œå†æé—®è®©geminiå†™ä»£ç ï¼Œä»£ç ç”Ÿæˆçš„å‡†ç¡®ç‡å’Œè´¨é‡è¿œè¿œåŠæ‰“åœ¨ 
cursor trae qoderç­‰ai ideæˆ–gemini-code-assitç­‰ ç¼–ç¨‹æ’ä»¶ é‡Œé¢æé—®å†™ä»£ç ã€‚

 `google ai studio` ä¼˜ç‚¹æ˜¯1000kä¸Šä¸‹æ–‡ä»¥åŠå…è´¹ã€‚å”¯ä¸€ç¼ºç‚¹æ˜¯ä»–åœ¨ç½‘é¡µç”Ÿæˆä»£ç ï¼Œè€Œä¸æ˜¯ç›´æ¥æ“ä½œ
 ä¿®æ”¹ä½ çš„æœ¬åœ°ä»£ç æ–‡ä»¶ã€‚

 `nb_ai_context` ç”Ÿæˆçš„markdownä¸¢ç»™`google ai studio`å®Œçˆ†cursor traeç­‰ideä¸­å†™ä»£ç  
 ä¸»è¦åŸå› æ˜¯ï¼š  
`google ai studio` ç½‘é¡µç‰ˆæ˜¯å…¨é‡é˜…è¯»æ¨ç†ä½ ä¸Šä¼ çš„æ–‡ä»¶ï¼Œè€Œ aiç¼–ç¨‹ide å¯¹é•¿æ•™ç¨‹æˆ–è€…æºç ï¼Œ
ai agentè¯•å›¾é‡‡å–å…³é”®å­—æœç´¢åŒ¹é…å†æŠ•å–‚ä¸Šä¸‹æ–‡ç»™aiå¤§æ¨¡å‹ï¼Œï¼ˆæœ‰æ—¶å€™æ¨¡ç³Šæœç´¢çš„å…³é”®å­—å‹æ ¹æœä¸åˆ°å†…å®¹ï¼Œ
å› ä¸ºaié€ å‡ºæ¥çš„å…³é”®å­—ä¸æ˜¯å®Œå®Œå…¨å…¨çš„åŒ¹é…ä½ çš„å‡½æ•°åå­—æˆ–è€…æ•™ç¨‹å†…å®¹ï¼Œæ‰€ä»¥å°±æœä¸åˆ°ï¼Œ
ä¾‹å¦‚è¿‘ä¹‰è¯ï¼Œä½ ä»£ç ç”¨åˆ«çš„å•è¯è¡¨ç¤ºï¼Œaiå´ç”¨è‡ªå·±çš„å•è¯æ¥è¡¨ç¤ºï¼Œé å…³é”®å­—å‹æ ¹å°±æœä¸åˆ°å†…å®¹ï¼Œagentå’‹æŠ•å–‚aiå¤§æ¨¡å‹ï¼Ÿï¼‰
ai ide è¿™ç§æ–¹å¼ç®€ç›´æ˜¯ç®¡ä¸­çª¥è±¹ ä¸€å¶éšœç›®ä¸è§æ³°å±±ã€‚

æœ€æ ¹æœ¬åŸå› è¿˜æ˜¯ï¼š  
ai ide ä¸ºäº†å‡å°‘æˆæœ¬ï¼Œé˜²æ­¢tokenæ¶ˆè€—å¤§ï¼Œä¸ä¼šå…¨é‡æŠŠæºç æ•™ç¨‹å–‚ç»™aiå¤§æ¨¡å‹ï¼Œä¸ç„¶çš„é ç”¨æˆ·äº¤çš„é‚£20ç¾å…ƒçš„æœˆä¼šå‘˜ï¼Œ
cursorè¦äºå¾—è£¤è¡©æ²¡å¾—ç©¿ã€‚100ä¸‡ tokensä¸Šä¸‹æ–‡è¾“å…¥ï¼Œcalude gemini gpt ä»·æ ¼å¤§çº¦æ˜¯3ç¾å…ƒï¼Œç›¸å½“äº20å…ƒäººæ°‘å¸ï¼Œ
å¦‚æœé—®ä¸€æ¬¡å°±20å…ƒäººæ°‘å¸ï¼Œcursoræ¯ä¸ªæœˆç»™ä½ ç”¨8æ¬¡å°±è¦å¼€å§‹äºè¡€æœ¬äº†ï¼Œ(å¦å¤–tokensè¾“å‡ºä»·æ ¼è¿œé«˜äºè¾“å…¥ä»·æ ¼ï¼‰ï¼Œ
ç°åœ¨cursorè¿˜ç»™ä½ æ¯æœˆç”¨500æ¬¡ï¼Œé‚£ä»–åªèƒ½ä»èŠ‚çº¦tokensä¸‹æ‰‹äº†ï¼Œå…·ä½“è¡¨ç°å°±æ˜¯cursorä¸å…¨é‡æŠŠæ‰€æœ‰æ•™ç¨‹å’Œæºç 
å‘ç»™aiå¤§æ¨¡å‹æ¨ç†ã€‚

`nb_ai_context` å¯¹å¤§å‹ç¼–ç¨‹é¡¹ç›®çš„æ•ˆæœå°¤ä¸ºçªå‡ºï¼Œè¿œè¿œåŠæ‰“ cursor trae qoder gemini-code-assit ç­‰ai ideä¸­å†™ä»£ç ã€‚
</pre>

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ¯ ä¸ºä»€ä¹ˆéœ€è¦ nb_ai_contextï¼Ÿ

å½“ä½ æƒ³è®© AI å¤§æ¨¡å‹ï¼ˆå¦‚ ChatGPTã€Claudeï¼‰ç†è§£ä½ çš„æ•´ä¸ªé¡¹ç›®æ—¶ï¼Œæ‰‹åŠ¨å¤åˆ¶ç²˜è´´ä»£ç æ—¢ç¹çåˆå®¹æ˜“å‡ºé”™ã€‚`nb_ai_context` å½»åº•è§£å†³äº†è¿™ä¸ªç—›ç‚¹ï¼š

- âœ… **è‡ªåŠ¨åŒ–åˆå¹¶** - ä¸€é”®å°†æ•´ä¸ªé¡¹ç›®åˆå¹¶ä¸ºå•ä¸ª Markdown æ–‡ä»¶
- âœ… **ç»“æ„åŒ–è¾“å‡º** - åŒ…å«æ–‡ä»¶æ ‘ã€æ–‡ä»¶è¾¹ç•Œã€ç›¸å¯¹è·¯å¾„ï¼ŒAI èƒ½å®Œç¾ç†è§£é¡¹ç›®æ¶æ„
- âœ… **æ™ºèƒ½å…ƒæ•°æ®æå–** - å¯¹ Python é¡¹ç›®æä¾› AST è¯­æ³•æ ‘è§£æï¼Œè‡ªåŠ¨ç”Ÿæˆç±»ã€å‡½æ•°ã€æ–¹æ³•ç­¾å
- âœ… **å®‰å…¨å¯é ** - å†…ç½® `.gitignore` æ”¯æŒï¼Œè‡ªåŠ¨æ’é™¤æ•æ„Ÿä¿¡æ¯ï¼ˆAPI å¯†é’¥ã€.env æ–‡ä»¶ç­‰ï¼‰
- âœ… **çµæ´»å¯æ§** - æ”¯æŒæ–‡ä»¶è¿‡æ»¤ã€ç›®å½•æ’é™¤ã€è‡ªå®šä¹‰æ–‡ä»¶ç±»å‹
- âœ… **GitHub é¡¹ç›®æ”¯æŒ** - ç›´æ¥ä» GitHub zip ä¸‹è½½åœ°å€ç”Ÿæˆæ–‡æ¡£

### ğŸ’¡ **å…³é”®ä¼˜åŠ¿å¯¹æ¯”**
| æ–¹æ¡ˆ | ä¸Šä¸‹æ–‡å®Œæ•´æ€§ | Token æ¶ˆè€— | å®‰å…¨æ€§ | æˆæœ¬ |
|------|--------------|------------|--------|------|
| **Cursor/trae/qoder** | âŒ åˆ†æ®µé˜…è¯» | âš ï¸ é«˜ | âš ï¸ éœ€æ‰‹åŠ¨è¿‡æ»¤ | ğŸ’° ä»˜è´¹æ¬¡æ•°é™åˆ¶ |
| **æ‰‹åŠ¨å¤åˆ¶ç²˜è´´** | âŒ æ˜“é—æ¼ | âŒ æé«˜ | âŒ æ˜“æ³„éœ²æ•æ„Ÿä¿¡æ¯ | â° è€—æ—¶ |
| **nb_ai_context** | âœ… å®Œæ•´ç»“æ„åŒ– | âœ… AST å…ƒæ•°æ®ä¼˜åŒ– | âœ… è‡ªåŠ¨ `.gitignore` | ğŸ†“ å…è´¹å·¥å…· |



### ğŸ å¯¹ AI å¤§æ¨¡å‹çš„å·¨å¤§ä»·å€¼

1. **æä¾›ä¸Šå¸è§†è§’** ğŸ“
   - æ¸…æ™°çš„æ–‡ä»¶æ ‘å’Œæ–‡ä»¶è¾¹ç•Œ
   - å®Œæ•´çš„ç›¸å¯¹è·¯å¾„ä¿¡æ¯
   - AI èƒ½è½»æ¾æ„å»ºé¡¹ç›®çš„æ•´ä½“æ¶æ„å›¾

2. **ç¡®ä¿ä¿¡æ¯å®Œæ•´æ€§** ğŸ“š
   - æœªç»åˆ å‡çš„å®Œæ•´æºç 
   - é¿å…æ‰‹åŠ¨å¤åˆ¶å¯¼è‡´çš„æ ¼å¼æ··ä¹±
   - é›¶ä¸Šä¸‹æ–‡ç¼ºå¤±ï¼ŒAI åˆ†ææ›´ç²¾å‡†

3. **å¢å¼ºå®‰å…¨æ€§** ğŸ”’
   - è‡ªåŠ¨éµå¾ª `.gitignore` è§„åˆ™
   - é˜²æ­¢æ•æ„Ÿä¿¡æ¯æ³„éœ²
   - æ”¾å¿ƒåˆ†äº«ä»£ç ç»™ AI

4. **Python é¡¹ç›®ä¸“å±ä¼˜åŒ–** ğŸ
   - AST è¯­æ³•æ ‘è§£æ
   - è‡ªåŠ¨æå–ç±»ã€å‡½æ•°ã€æ–¹æ³•ç­¾å
   - å‚æ•°ç±»å‹ã€è¿”å›å€¼ã€è£…é¥°å™¨ä¸€ç›®äº†ç„¶

## ğŸ“¦ å®‰è£…

```bash
pip install nb_ai_context
```

**ä¾èµ–é¡¹ï¼š**
- Python >= 3.7
- nb_path
- nb_log

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¤ºä¾‹ 1ï¼šä¸ºæœ¬åœ° Python é¡¹ç›®ç”Ÿæˆ AI ä¸Šä¸‹æ–‡

```python
from nb_ai_context import AiMdGenerator

project_name = "my_awesome_project"
project_root = r"D:\codes\my_awesome_project"

project_summary = f"""
- `{project_name}` æ˜¯ä¸€ä¸ªä¼˜ç§€çš„ Python Web åº”ç”¨
- ä½¿ç”¨ FastAPI æ¡†æ¶
- åŒ…å«å®Œæ•´çš„ç”¨æˆ·è®¤è¯å’Œæƒé™ç®¡ç†
"""

(
    AiMdGenerator(rf"D:\ai_docs\{project_name}_for_ai.md")
    .set_project_propery(project_name=project_name, project_root=project_root)
    .clear_text()  # æ¸…ç©ºæ—§å†…å®¹
    .add_project_summary(
        project_summary=project_summary,
        # æ ¸å¿ƒæ–‡ä»¶åˆ—è¡¨ï¼ˆåªæå–å…ƒæ•°æ®ï¼Œä¸åŒ…å«å®Œæ•´æºç ï¼‰
        most_core_source_code_file_list=[
            "src/main.py",
            "src/api.py",
            "src/models.py",
        ],
    )
    .auto_merge_from_python_project_some_files()  # è‡ªåŠ¨åŒ…å« README.mdã€setup.pyã€pyproject.toml
    .merge_from_dir(
        relative_dir_name="src",
        as_title=f"{project_name} æºä»£ç ",
        use_gitignore=True,  # ä½¿ç”¨ .gitignore è§„åˆ™
        should_include_suffixes=[".py", ".md"],  # åªåŒ…å«æŒ‡å®šæ–‡ä»¶ç±»å‹
        include_ast_metadata=True,  # åŒ…å« AST å…ƒæ•°æ®
    )
    .merge_from_dir(
        relative_dir_name="tests",
        as_title=f"{project_name} æµ‹è¯•ä»£ç ",
        use_gitignore=True,
        should_include_suffixes=[".py"],
        excluded_dir_name_list=["tests/temp"],  # æ’é™¤ç‰¹å®šç›®å½•
        include_ast_metadata=True,
    )
    .show_textfile_info()  # æ˜¾ç¤ºç”Ÿæˆçš„æ–‡ä»¶ä¿¡æ¯
)
```

### ç¤ºä¾‹ 2ï¼šä» GitHub é¡¹ç›®ç”Ÿæˆ AI æ–‡æ¡£

```python
from nb_ai_context import gen_github_proj_docs_and_codes_ai_md
from nb_path import NbPath

# ç”Ÿæˆ SQLModel é¡¹ç›®çš„æ–‡æ¡£å’Œä»£ç 
gen_github_proj_docs_and_codes_ai_md(
    github_zip_url="https://codeload.github.com/fastapi/sqlmodel/zip/refs/heads/main",
    output_md_path=r"D:\ai_docs\sqlmodel_all_docs_and_codes.md",
    readme_file="README.md",
    docs_dir_name="docs",  # æ–‡æ¡£ç›®å½•
    codes_dir_name="sqlmodel",  # æºç ç›®å½•
    should_include_suffixes=[".py", ".md"],
    excluded_dir_name_list=["tests", "__pycache__"],
    excluded_file_name_list=["test_*.py"],
)
```

### ç¤ºä¾‹ 3ï¼šç”Ÿæˆ GitHub é¡¹ç›®çš„æ‰€æœ‰æ–‡ä»¶

```python
from nb_ai_context import gen_github_proj_all_dirs_ai_md

# ç”Ÿæˆæ•´ä¸ªé¡¹ç›®çš„æ‰€æœ‰æ–‡ä»¶
gen_github_proj_all_dirs_ai_md(
    github_zip_url="https://codeload.github.com/fastapi/sqlmodel/zip/refs/heads/main",
    output_md_path=r"D:\ai_docs\sqlmodel_all_files.md",
    should_include_suffixes=[".py", ".md", ".html"],
    excluded_dir_name_list=["node_modules", ".git", "__pycache__"],
)
```


## ä¸ºä»€ä¹ˆè¦è¿™ä¸ª nb_ai_context ï¼Ÿè„±äº†è£¤å­æ”¾å±ï¼Ÿè®©cusror trae å»é˜…è¯»é¡¹ç›®çš„æºç å’Œæ•™ç¨‹ï¼Œè¿˜èƒ½åœ¨ideé‡Œé¢ç”Ÿæˆä»£ç ï¼Œè¿™ä¸æ›´é¦™å—ï¼Ÿ(é¢„åˆ¤è´¨ç–‘)

- 1. æœ‰æ—¶å€™æ˜¯éideç¯å¢ƒé—®é¡¹ç›®çš„ç”¨æ³•

- 2. cursor å¤ªè´µäº†ï¼Œç»å¸¸æé—®cursoræµªè´¹å®è´µæ¬¡æ•°ï¼Œè¦æŠŠå®è´µæ¬¡æ•°ç•™ç»™çœŸæ­£çš„ä»£ç ç”Ÿæˆï¼Œè€Œä¸æ˜¯æé—®ã€‚
     cursor trae å­˜åœ¨ä¸Šä¸‹æ–‡å¤ªçŸ­ï¼Œè°ƒæ•™æˆä¸ç§¯æé˜…è¯»å…¨é‡æºç å’Œæ•™ç¨‹ç­‰é—®é¢˜ã€‚

- 3. å¯ä»¥ä½œä¸º rag åœ¨çº¿çŸ¥è¯†åº“ä½¿ç”¨ï¼Œè®©aiå¤§æ¨¡å‹é˜…è¯»ç”Ÿæˆçš„markdownï¼Œç„¶åå›ç­”é—®é¢˜ã€‚

- 4. å¯ä»¥æŠŠç”Ÿæˆçš„markdownä¸¢ç»™å…è´¹ä¸”ä¸Šä¸‹æ–‡æ— æ•Œé«˜è¾¾1000k çš„ `google ai studio` å»é˜…è¯»ï¼Œclaude gptæ‰256k tokenï¼Œå›½å†…å¤§æ¨¡å‹æ‰128k tokenï¼Œå‹æ ¹ä¸å¤Ÿç”¨ï¼Œ  
     åªæœ‰  google ai studio + gemini 3.0pro æ‰èƒ½å®Œæ•´é˜…è¯»é¡¹ç›®æºç åŠ æ•™ç¨‹ï¼Œå¹¶ä¸”å…è´¹ä½¿ç”¨ã€‚ 

- 5. `google ai studio` å¯¹äº4M ä»¥å†…çš„æ–‡ä»¶ï¼Œå¯ä»¥ä¸€æ¬¡æ€§å…¨é‡é˜…è¯»å…¨æ–‡+æ¨ç†ï¼Œå¹¶ä¸”å…è´¹ä½¿ç”¨ã€‚
     ä¸€èˆ¬ä¸‰æ–¹åŒ…é¡¹ç›®çš„æºç åŠ æ•™ç¨‹è¿œæ²¡æœ‰è¾¾åˆ°4Mã€‚
     å¦‚æœæ˜¯ç”¨æˆ·è‡ªå·±çš„çœŸå®é¡¹ç›®è€Œéæ¡†æ¶æˆ–è€…ä¸‰æ–¹åŒ…é¡¹ç›®ï¼Œé¡¹ç›®ä¸­å¯èƒ½åŒ…å«å¤§é‡å†™æ³•æ¨¡å¼éå¸¸é‡å¤çš„éœ€æ±‚ä»£ç ï¼Œä»£ç åŠ æ•™ç¨‹åŠ èµ·æ¥å¯èƒ½ä¼šè¶…è¿‡4Mï¼Œä½†æ˜¯ ç”¨æˆ·é¡¹ç›®æ ¸å¿ƒå…¬å…±å…¥å£å‡½æ•°å’Œç±»çš„ç”¨æ³•çš„æºç  + æ•™ç¨‹ ç»å¯¹ä¸è¶…è¿‡1Mã€‚

- 6. `nb_ai_context` æ”¯æŒæŒ‰æ–‡ä»¶å¤¹åˆå¹¶å’Œè¿‡æ»¤éœ€è¦åˆå¹¶çš„æ–‡ä»¶ï¼Œå¹¶ä¸”`nb_ai_context` æ”¯æŒ `ast` è§£æ ä»»ä½•pythonæ–‡ä»¶çš„ ç±» å‡½æ•° å…¥å‚ æ³¨é‡Š ç­‰ å…ƒä¿¡æ¯ï¼Œå¤§å¹…å‡å°‘tokenæ¶ˆè€—ï¼Œè®©aiæŠ“ä½é‡ç‚¹ã€‚  
     `AiMdGenerator.add_project_summary(most_core_source_code_file_list=[...])` æ”¯æŒæ·»åŠ é¡¹ç›®æ¦‚è¿°å’Œæ ¸å¿ƒæ–‡ä»¶å…ƒæ•°æ®ï¼Œè®©aiå¿«é€ŸæŠ“ä½é‡ç‚¹ã€‚  
     ä¸ç®¡é¡¹ç›®å¤šå¤æ‚æœ‰å‡ ç™¾ä¸ªclassç±»å’Œæ¨¡å—ï¼Œä½†çœŸæ­£èƒ½ä½œä¸ºå…¬å…±ä½¿ç”¨å…¥å£çš„æ¨¡å—ä¸€èˆ¬ä¸ä¼šè¶…è¿‡10ä¸ªã€‚  
     ä¾‹å¦‚ `funboost` é¡¹ç›® `python`æ–‡ä»¶é«˜è¾¾å‡ ç™¾ä¸ªï¼Œä½†çœŸæ­£èƒ½ä½œä¸ºæ¡†æ¶ä½¿ç”¨ç”¨æˆ·çº§åˆ«çš„å…¬å…±ä½¿ç”¨å…¥å£çš„pythonæ–‡ä»¶ä¹Ÿå°±ä¸‰å››ä¸ªï¼Œå…¶ä»–çš„pythonæ–‡ä»¶å‹æ ¹æ²¡æœºä¼šè¢«ç»ˆç«¯ç”¨æˆ·ç›´æ¥importå¹¶ä½¿ç”¨ã€‚


- 10. æœ€æœ€ä¸»è¦çš„åŸå› ï¼ï¼ï¼ cursor trae å†…ç½®çš„å¤§æ¨¡å‹éƒ½ä¸ä¹–ä¹–é˜…è¯»æ‰€æœ‰æºç å’Œæ•™ç¨‹ï¼Œå³ä½¿ä½ æ˜ç¡®å‘å‡ºæŒ‡ä»¤å¼ºè¿«ä»–é˜…è¯»æ‰€æœ‰æ•™ç¨‹å’Œæºç ï¼Œä»–ä¹Ÿä¼šå·æ‡’ä¸è¯»ï¼Œåªè¯»éƒ¨åˆ†ä»£ç ï¼Œå¯¼è‡´å¹»è§‰ç‡æé«˜ã€‚
      ä¸ºä»€ä¹ˆ cursor trae é‡Œé¢çš„å¤§æ¨¡å‹ä¸å…¨é‡é˜…è¯»å‘¢ï¼Œå› ä¸ºä»–æ—©å°±é¢„åˆ¤äº†æœ‰æµæ°“ç©å®¶æ¶æ„æ»¥ç”¨å¤§æ¨¡å‹ç®—åŠ›ï¼Œ å¦‚æœä½ è®©cursor + claude é˜…è¯»cç›˜ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œcursorå’Œclaude ä¼šè¿™ä¹ˆä¹–å—ï¼Ÿ
      cç›˜ä¸‹çš„æ–‡æœ¬æ–‡ä»¶é«˜è¾¾å‡ ç™¾äº¿è¡Œï¼Œå¦‚æœè¯»å®Œä¸€æ¬¡å°±ä¼šæ¶ˆè€—ä»·å€¼å‡ åä¸‡ç¾å…ƒçš„tokensï¼Œå¤§æ¨¡å‹å‚å•†äºå¾—è£¤è¡©æ²¡å¾—ç©¿ï¼Œä½ æ‰20ç¾å…ƒçš„åŒ…æœˆä¼šå‘˜ï¼Œcursorå’Œclaudeå‚å®¶ä¸è¢«ä½ è–…ç§ƒå™œçš®ï¼Ÿ
      æ‰€ä»¥ä¸ç®¡ç”¨æˆ·æ€ä¹ˆå¼ºè¿«cursor  traeå»é˜…è¯»æ‰€æœ‰æºç å’Œæ•™ç¨‹ï¼Œcursor å’Œ claude å’Œtraeéƒ½ä¸ä¼šå¬ä½ çš„è¯ã€‚

- 11. trae å’Œ cursor è¢«è°ƒæ•™é™åˆ¶äº†ï¼Œ traeä¸€æ¬¡æœ€å¤šé˜…è¯»200è¡Œï¼Œqoderä¸€æ¬¡æœ€å¤šé˜…è¯»1000è¡Œï¼Œå¯¹è¶…é•¿æ•™ç¨‹ï¼Œéœ€è¦åˆ†å¤šæ¬¡é˜…è¯»ï¼Œå¯¼è‡´å¹»è§‰ç‡æé«˜ï¼Œä½ è®©è¿™ç§ ai ide + å¤§æ¨¡å‹å»æ€»ç»“ é¡¹ç›®çš„ä¸­å¿ƒæ€æƒ³éå¸¸ä¸é è°±ã€‚ 
      å¹¶ä¸”åˆ†æ®µé˜…è¯»äº¤äº’æ¬¡æ•°é«˜è¾¾å‡ åæ¬¡ï¼Œå¤ªè´¹ç­‰å¾…æ—¶é—´äº†ã€‚
      å¹¶ä¸” ai ideé‡Œé¢é˜…è¯»é•¿æ–‡ä»¶ä¼šåˆ†æ‰¹é˜…è¯»ç›´åˆ°20æ¬¡å°±ä¼šè‡ªåŠ¨åœæ­¢ï¼Œä¾‹å¦‚æ–‡ä»¶æœ‰10000è¡Œï¼Œtraeä¸€æ¬¡é˜…è¯»200è¡Œï¼Œéœ€è¦50æ¬¡äº¤äº’ï¼Œä½†ai ideè®¾ç½®äº†æœ€å¤šäº¤äº’20æ¬¡å°±ä¼šè‡ªåŠ¨åœæ­¢ï¼›è¿™æ˜¯å› ä¸ºæ‹…å¿ƒæµæ°“æ¶æ„ç”¨æˆ·è®©ä»–é˜…è¯»1äº¿è¡Œçš„æ–‡ä»¶å¯¼è‡´è‡ªå·±è¡€äºï¼Œæ‰€ä»¥æœ€å¤šåˆ†æ®µé˜…è¯»20æ¬¡å°±ä¼šåœæ­¢ã€‚

- 12. è§£å†³ 10å’Œ11çš„ç—›ç‚¹é—®é¢˜ï¼Œ åªæœ‰ `google ai studio` æ‰èƒ½åšåˆ° ï¼Œ æˆ–è€…ä½¿ç”¨ragä¹Ÿå‹‰å¼ºå¯ä»¥ã€‚
      æŠŠæ–‡æ¡£ä¸Šä¼ ç»™ `google ai studio` ç½‘é¡µç‰ˆçš„1000kä¸Šä¸‹æ–‡çš„gemini pro è¿™ç§æ–¹å¼æœ€å¼ºï¼Œ å…¶æ¬¡æ˜¯ `rag`æ–¹å¼ã€‚
      å¯¹ 4Mä»¥å†…çš„æ–‡æ¡£ï¼ˆå¤§çº¦å°±æ˜¯1000k tokensï¼‰ï¼Œ æ¨èä½¿ç”¨  `google ai studio`ï¼Œä¸è¦ä½¿ç”¨ `rag` æ–¹å¼ã€‚
      è¶…è¿‡4Mæ–‡æ¡£çš„ä¸Šä¸‹æ–‡ï¼Œçªç ´äº†gemini 1000k token ä¸Šé™ï¼Œæ— æ³•ä½¿ç”¨ï¼Œæ­¤æ—¶éœ€è¦ä½¿ç”¨ `rag`æ–¹å¼ã€‚

- 13. ä¸€äº›ç½‘å€ï¼š
       google ai studio ç½‘å€  [https://aistudio.google.com/](https://aistudio.google.com/)    
       æ™ºè°±æ¸…è¨€ aiæ™ºèƒ½ä½“ç½‘å€ï¼Œå¯ä»¥æ”¯æŒå…è´¹rag  [chatglm.cn/main/gdetail/69168f75e8e6a00da25f55cc?lang=zh](chatglm.cn/main/gdetail/69168f75e8e6a00da25f55cc?lang=zh)    
       è…¾è®¯imaçŸ¥è¯†åº“ [ima.qq.com](https://ima.qq.com/)    



## ğŸ“– æ ¸å¿ƒ API è¯¦è§£

### AiMdGenerator ç±»

`AiMdGenerator` æ˜¯æ ¸å¿ƒç±»ï¼Œç»§æ‰¿è‡ª `NbPath`ï¼Œæ”¯æŒä¼˜é›…çš„é“¾å¼è°ƒç”¨ã€‚

#### ä¸»è¦æ–¹æ³•

##### 1. `set_project_propery(project_name, project_root)`
è®¾ç½®é¡¹ç›®åç§°å’Œæ ¹ç›®å½•ï¼ˆå¿…é¡»é¦–å…ˆè°ƒç”¨ï¼‰

```python
.set_project_propery(
    project_name="my_project",
    project_root=r"D:\codes\my_project"
)
```

##### 2. `add_project_summary(project_summary, most_core_source_code_file_list)`
æ·»åŠ é¡¹ç›®æ¦‚è¿°å’Œæ ¸å¿ƒæ–‡ä»¶å…ƒæ•°æ®

```python
.add_project_summary(
    project_summary="é¡¹ç›®æè¿°...",
    most_core_source_code_file_list=[
        "src/main.py",  # åªæå–è¿™äº›æ–‡ä»¶çš„ AST å…ƒæ•°æ®ï¼Œä¸åŒ…å«å®Œæ•´æºç 
        "src/api.py",
    ]
)
```

##### 3. `auto_merge_from_python_project_some_files()`
è‡ªåŠ¨åˆå¹¶é¡¹ç›®æ ¹ç›®å½•çš„å…³é”®æ–‡ä»¶ï¼ˆREADME.mdã€setup.pyã€pyproject.tomlï¼‰

```python
.auto_merge_from_python_project_some_files()
```

##### 4. `merge_from_files(relative_file_name_list, as_title)`
åˆå¹¶æŒ‡å®šæ–‡ä»¶åˆ—è¡¨

```python
.merge_from_files(
    relative_file_name_list=["docs/intro.md", "docs/api.md"],
    as_title="é¡¹ç›®æ–‡æ¡£"
)
```

##### 5. `merge_from_dir()` â­ æœ€å¼ºå¤§çš„æ–¹æ³•
åˆå¹¶æ•´ä¸ªç›®å½•çš„æ–‡ä»¶

```python
.merge_from_dir(
    relative_dir_name="src",           # ç›¸å¯¹ç›®å½•å
    as_title="æºä»£ç ",                  # ç« èŠ‚æ ‡é¢˜
    should_include_suffixes=[".py"],   # åŒ…å«çš„æ–‡ä»¶ç±»å‹
    excluded_dir_name_list=[],         # æ’é™¤çš„ç›®å½•åˆ—è¡¨
    excluded_file_name_list=[],        # æ’é™¤çš„æ–‡ä»¶åˆ—è¡¨
    use_gitignore=True,                # ä½¿ç”¨ .gitignore è§„åˆ™
    include_ast_metadata=True,         # åŒ…å« Python AST å…ƒæ•°æ®
)
```

**å‚æ•°è¯´æ˜ï¼š**
- `relative_dir_name`: ç›¸å¯¹äºé¡¹ç›®æ ¹ç›®å½•çš„è·¯å¾„
- `as_title`: åœ¨ç”Ÿæˆçš„ Markdown ä¸­çš„ç« èŠ‚æ ‡é¢˜
- `should_include_suffixes`: åªåŒ…å«è¿™äº›åç¼€çš„æ–‡ä»¶ï¼ˆç•™ç©ºåˆ™åŒ…å«æ‰€æœ‰æ–‡æœ¬æ–‡ä»¶ï¼‰
- `excluded_dir_name_list`: è¦æ’é™¤çš„ç›®å½•åˆ—è¡¨
- `excluded_file_name_list`: è¦æ’é™¤çš„æ–‡ä»¶åˆ—è¡¨
- `use_gitignore`: æ˜¯å¦éµå¾ª `.gitignore` è§„åˆ™ï¼ˆå¼ºçƒˆæ¨èå¼€å¯ï¼‰
- `include_ast_metadata`: å¯¹ Python æ–‡ä»¶æ˜¯å¦ç”Ÿæˆ AST å…ƒæ•°æ®
- `dry_run`: é¢„è§ˆæ¨¡å¼ï¼Œåªæ˜¾ç¤ºå°†è¦åŒ…å«çš„æ–‡ä»¶ï¼Œä¸å®é™…ç”Ÿæˆ

##### 6. `merge_from_files_with_metadata()`
å¸¦å…ƒæ•°æ®çš„æ–‡ä»¶åˆå¹¶ï¼ˆæ›´é«˜çº§çš„æ§åˆ¶ï¼‰

```python
.merge_from_files_with_metadata(
    relative_file_name_list=["src/main.py"],
    as_title="æ ¸å¿ƒä»£ç ",
    include_ast_metadata=True,   # æ˜¯å¦åŒ…å« AST å…ƒæ•°æ®
    include_file_text=True,      # æ˜¯å¦åŒ…å«å®Œæ•´æºç 
)
```

##### 7. `show_textfile_info()`
æ˜¾ç¤ºç”Ÿæˆæ–‡ä»¶çš„ç»Ÿè®¡ä¿¡æ¯

```python
.show_textfile_info()  # æ‰“å°æ–‡ä»¶å¤§å°ã€è¡Œæ•°ç­‰ä¿¡æ¯
```

### GitHub é¡¹ç›®å¤„ç†å‡½æ•°

#### `gen_github_proj_docs_and_codes_ai_md()`
ç”Ÿæˆ GitHub é¡¹ç›®çš„ READMEã€æ–‡æ¡£å’Œæºç 

```python
from nb_ai_context import gen_github_proj_docs_and_codes_ai_md

gen_github_proj_docs_and_codes_ai_md(
    github_zip_url="https://codeload.github.com/owner/repo/zip/refs/heads/main",
    output_md_path="output.md",
    readme_file="README.md",
    docs_dir_name="docs",
    codes_dir_name="src",
    should_include_suffixes=[".py", ".md"],
    excluded_dir_name_list=["tests"],
    excluded_file_name_list=["test_*.py"],
)
```

#### `gen_github_proj_all_dirs_ai_md()`
ç”Ÿæˆ GitHub é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶

```python
from nb_ai_context import gen_github_proj_all_dirs_ai_md

gen_github_proj_all_dirs_ai_md(
    github_zip_url="https://codeload.github.com/owner/repo/zip/refs/heads/main",
    output_md_path="output_all.md",
    should_include_suffixes=[".py", ".java", ".go", ".md"],
    excluded_dir_name_list=["node_modules", ".git"],
)
```

## ğŸ Python AST å…ƒæ•°æ®æå–

å¯¹äº Python æ–‡ä»¶ï¼Œ`nb_ai_context` ä¼šè‡ªåŠ¨æå–ä»¥ä¸‹å…ƒæ•°æ®ï¼š

### æå–å†…å®¹
- âœ… **æ¨¡å—æ–‡æ¡£å­—ç¬¦ä¸²**
- âœ… **å¯¼å…¥è¯­å¥** (import / from import)
- âœ… **ç±»å®šä¹‰**
  - ç±»åã€ç»§æ‰¿å…³ç³»ã€è£…é¥°å™¨
  - ç±»æ–‡æ¡£å­—ç¬¦ä¸²
  - å…¬æœ‰æ–¹æ³•ï¼ˆå«å‚æ•°ç±»å‹ã€è¿”å›å€¼ã€è£…é¥°å™¨ï¼‰
  - å±æ€§ (@property)
  - ç±»å˜é‡
- âœ… **é¡¶çº§å‡½æ•°**
  - å‡½æ•°ç­¾åï¼ˆå‚æ•°ç±»å‹ã€é»˜è®¤å€¼ã€è¿”å›å€¼ï¼‰
  - è£…é¥°å™¨
  - æ–‡æ¡£å­—ç¬¦ä¸²
  - å¼‚æ­¥å‡½æ•°æ ‡è¯†

### å…ƒæ•°æ®ç¤ºä¾‹è¾“å‡º

```markdown
### ğŸ“„ Python File Metadata: `src/main.py`

#### ğŸ“ Module Docstring
```
è¿™æ˜¯ä¸»æ¨¡å—ï¼ŒåŒ…å«åº”ç”¨çš„å…¥å£ç‚¹
```

#### ğŸ“¦ Imports
- `import os`
- `from typing import List, Optional`
- `from fastapi import FastAPI`

#### ğŸ›ï¸ Classes (2)

##### ğŸ“Œ `class UserService(BaseService)`
*Line: 15*

**Docstring:**
```
ç”¨æˆ·æœåŠ¡ç±»ï¼Œå¤„ç†ç”¨æˆ·ç›¸å…³çš„ä¸šåŠ¡é€»è¾‘
```

**Public Methods (3):**
- `def get_user(user_id: int) -> Optional[User]`
  - *è·å–ç”¨æˆ·ä¿¡æ¯*
- `async def create_user(name: str, email: str) -> User`
  - *åˆ›å»ºæ–°ç”¨æˆ·*
- `def update_user(user_id: int, **kwargs) -> bool`

**Properties (1):**
- `@property user_count -> int`

#### ğŸ”§ Public Functions (2)
- `async def startup_event() -> None`
  - *Line: 120*
  - *åº”ç”¨å¯åŠ¨äº‹ä»¶å¤„ç†*
```

## ğŸ¨ ç”Ÿæˆçš„ Markdown ç»“æ„

ç”Ÿæˆçš„ Markdown æ–‡æ¡£ç»“æ„æ¸…æ™°ï¼ŒåŒ…å«ï¼š

```markdown
# markdown content namespace: é¡¹ç›®æ¦‚è¿°

é¡¹ç›®æè¿°...

## ğŸ“‹ Core Source Files Metadata (Entry Points)
æ ¸å¿ƒæ–‡ä»¶çš„ AST å…ƒæ•°æ®ï¼ˆä¸å«æºç ï¼‰

---

# markdown content namespace: é¡¹ç›®æ ¹ç›®å½•æ–‡ä»¶

## File Tree
```
â”œâ”€â”€ README.md
â”œâ”€â”€ setup.py
â””â”€â”€ pyproject.toml
```

## Included Files
- `README.md`
- `setup.py`
- `pyproject.toml`

---

--- **start of file: README.md** ---
ï¼ˆæ–‡ä»¶å†…å®¹ï¼‰
--- **end of file: README.md** ---

---

# markdown content namespace: æºä»£ç 

## File Tree
ï¼ˆæ–‡ä»¶æ ‘ï¼‰

## Included Files
ï¼ˆæ–‡ä»¶åˆ—è¡¨ï¼‰

--- **start of file: src/main.py** ---

### ğŸ“„ Python File Metadata: `src/main.py`
ï¼ˆAST å…ƒæ•°æ®ï¼‰

```python
ï¼ˆå®Œæ•´æºç ï¼‰
```

--- **end of file: src/main.py** ---
```

## ğŸ”§ é«˜çº§ç”¨æ³•

### 1. é¢„è§ˆæ¨¡å¼ï¼ˆDry Runï¼‰

```python
(
    AiMdGenerator("output.md")
    .set_project_propery("my_project", r"D:\codes\my_project")
    .merge_from_dir(
        relative_dir_name="src",
        as_title="æºä»£ç ",
        dry_run=True,  # åªé¢„è§ˆï¼Œä¸å®é™…ç”Ÿæˆ
    )
)
```

### 2. åªæå–å…ƒæ•°æ®ï¼Œä¸åŒ…å«æºç 

```python
(
    AiMdGenerator("output.md")
    .set_project_propery("my_project", r"D:\codes\my_project")
    .merge_from_files_with_metadata(
        relative_file_name_list=["src/main.py"],
        as_title="æ ¸å¿ƒä»£ç æ¶æ„",
        include_ast_metadata=True,  # åŒ…å«å…ƒæ•°æ®
        include_file_text=False,    # ä¸åŒ…å«æºç 
    )
)
```

### 3. æ”¯æŒçš„æ–‡ä»¶ç±»å‹

`AiMdGenerator` æ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€çš„è¯­æ³•é«˜äº®ï¼š

```python
suffix__lang_map = {
    ".py": "python",
    ".java": "java",
    ".go": "go",
    ".js": "javascript",
    ".ts": "typescript",
    ".jsx": "javascript",
    ".tsx": "typescript",
    ".vue": "vue",
    ".php": "php",
    ".c": "c",
    ".cpp": "cpp",
    ".cs": "csharp",
    ".sql": "sql",
    ".sh": "shell",
    ".ps1": "powershell",
    ".md": "markdown",
    ".json": "json",
    ".yaml": "yaml",
    ".xml": "xml",
    ".html": "html",
    ".css": "css",
    # ... æ›´å¤š
}
```

## ğŸ¯ å®é™…åº”ç”¨åœºæ™¯

### 1. AI ä»£ç å®¡æŸ¥
ç”Ÿæˆå®Œæ•´é¡¹ç›®ä¸Šä¸‹æ–‡ï¼Œè®© AI å…¨é¢å®¡æŸ¥ä»£ç è´¨é‡ã€å®‰å…¨æ¼æ´ã€æ€§èƒ½é—®é¢˜ã€‚

### 2. æŠ€æœ¯æ–‡æ¡£ç”Ÿæˆ
å¿«é€Ÿä¸ºæ–°å›¢é˜Ÿæˆå‘˜ç”Ÿæˆé¡¹ç›®æ¦‚è§ˆæ–‡æ¡£ï¼Œé…åˆ AI è§£é‡Šä»£ç é€»è¾‘ã€‚

### 3. çŸ¥è¯†åº“æ„å»º
å°†é¡¹ç›®å†…å®¹å¯¼å…¥ RAG çŸ¥è¯†åº“ï¼Œå®ç°æ™ºèƒ½ä»£ç æœç´¢å’Œé—®ç­”ã€‚

### 4. é¡¹ç›®è¿ç§»å’Œé‡æ„
è®© AI ç†è§£æ•´ä¸ªé¡¹ç›®åï¼Œæä¾›é‡æ„å»ºè®®æˆ–è¿ç§»åˆ°æ–°æ¡†æ¶ã€‚

### 5. å­¦ä¹ å¼€æºé¡¹ç›®
ä¸‹è½½ GitHub é¡¹ç›®åç”Ÿæˆç»“æ„åŒ–æ–‡æ¡£ï¼Œé…åˆ AI å¿«é€Ÿç†è§£é¡¹ç›®æ¶æ„ã€‚

## ğŸ”’ å®‰å…¨æ€§

### `.gitignore` æ”¯æŒ

è®¾ç½® `use_gitignore=True` æ—¶ï¼Œä¼šè‡ªåŠ¨éµå¾ªé¡¹ç›®çš„ `.gitignore` è§„åˆ™ï¼š

```python
.merge_from_dir(
    relative_dir_name="src",
    use_gitignore=True,  # è‡ªåŠ¨æ’é™¤ .envã€*.log ç­‰æ•æ„Ÿæ–‡ä»¶
)
```

### è‡ªåŠ¨æ’é™¤
- è‡ªåŠ¨æ’é™¤ä»¥ `.` å¼€å¤´çš„éšè—ç›®å½•ï¼ˆå¦‚ `.git`ã€`.venv`ï¼‰
- æ”¯æŒæ‰‹åŠ¨æ’é™¤ç‰¹å®šç›®å½•å’Œæ–‡ä»¶

## ğŸ“Š æ€§èƒ½ç‰¹æ€§

- âœ… é«˜æ•ˆçš„æ–‡ä»¶éå†å’Œè¿‡æ»¤
- âœ… æ™ºèƒ½æ–‡æœ¬æ–‡ä»¶æ£€æµ‹
- âœ… æ”¯æŒå¤§å‹é¡¹ç›®ï¼ˆæ•°åƒä¸ªæ–‡ä»¶ï¼‰
- âœ… é“¾å¼è°ƒç”¨ï¼Œä»£ç ç®€æ´ä¼˜é›…

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ”— ç›¸å…³é“¾æ¥

- **GitHub**: https://github.com/ydf0509/nb_ai_context
- **PyPI**: https://pypi.org/project/nb_ai_context/
- **Issues**: https://github.com/ydf0509/nb_ai_context/issues

## ğŸ’¡ å¸¸è§é—®é¢˜

### Q: ç”Ÿæˆçš„ Markdown æ–‡ä»¶å¤ªå¤§æ€ä¹ˆåŠï¼Ÿ
A: ä½¿ç”¨ `should_include_suffixes` é™åˆ¶æ–‡ä»¶ç±»å‹ï¼Œæˆ–ä½¿ç”¨ `excluded_dir_name_list` æ’é™¤ä¸é‡è¦çš„ç›®å½•ï¼ˆå¦‚ `node_modules`ã€`venv`ï¼‰ã€‚

### Q: å¦‚ä½•åªç”Ÿæˆä»£ç ç»“æ„ï¼Œä¸åŒ…å«æºç ï¼Ÿ
A: ä½¿ç”¨ `merge_from_files_with_metadata()` æ–¹æ³•ï¼Œè®¾ç½® `include_file_text=False`ã€‚

### Q: æ”¯æŒå“ªäº›ç¼–ç¨‹è¯­è¨€ï¼Ÿ
A: æ‰€æœ‰æ–‡æœ¬æ–‡ä»¶éƒ½æ”¯æŒï¼Œä½† Python æ–‡ä»¶æœ‰ç‰¹æ®Šçš„ AST å…ƒæ•°æ®æå–æ”¯æŒã€‚



## ğŸŒŸ Star History

å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ª Star â­ï¸ï¼

---

**nb_ai_context** - è®© AI çœŸæ­£ç†è§£ä½ çš„ä»£ç  ğŸš€
````

## tests/ai_codes/demo_init_extraction.py

```python
"""
æ¼”ç¤º __init__ æ–¹æ³•å‚æ•°æå–åŠŸèƒ½çš„ç¤ºä¾‹ä»£ç 
"""
from typing import Optional, List, Dict


class DatabaseConnection:
    """æ•°æ®åº“è¿æ¥ç±»
    
    ç®¡ç†æ•°æ®åº“è¿æ¥æ± å’ŒæŸ¥è¯¢æ“ä½œ
    """
    
    def __init__(
        self,
        host: str,
        port: int = 3306,
        username: str = "root",
        password: str = "",
        database: Optional[str] = None,
        charset: str = "utf8mb4",
        pool_size: int = 10,
        timeout: float = 30.0,
        ssl_config: Optional[Dict[str, str]] = None,
        auto_commit: bool = True,
        *args,
        **kwargs
    ):
        """åˆå§‹åŒ–æ•°æ®åº“è¿æ¥
        
        Args:
            host: æ•°æ®åº“ä¸»æœºåœ°å€
            port: æ•°æ®åº“ç«¯å£å·ï¼Œé»˜è®¤ 3306
            username: ç”¨æˆ·åï¼Œé»˜è®¤ root
            password: å¯†ç 
            database: æ•°æ®åº“åç§°ï¼ˆå¯é€‰ï¼‰
            charset: å­—ç¬¦é›†ï¼Œé»˜è®¤ utf8mb4
            pool_size: è¿æ¥æ± å¤§å°
            timeout: è¿æ¥è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
            ssl_config: SSL é…ç½®å­—å…¸
            auto_commit: æ˜¯å¦è‡ªåŠ¨æäº¤äº‹åŠ¡
            *args: é¢å¤–çš„ä½ç½®å‚æ•°
            **kwargs: é¢å¤–çš„å…³é”®å­—å‚æ•°
        """
        self.host = host
        self.port = port
        self.username = username
        self.password = password
        self.database = database
        self.charset = charset
        self.pool_size = pool_size
        self.timeout = timeout
        self.ssl_config = ssl_config or {}
        self.auto_commit = auto_commit
    
    def connect(self) -> bool:
        """å»ºç«‹æ•°æ®åº“è¿æ¥"""
        return True
    
    def execute(self, query: str, params: Optional[tuple] = None) -> List[Dict]:
        """æ‰§è¡Œ SQL æŸ¥è¯¢"""
        return []
    
    def close(self):
        """å…³é—­æ•°æ®åº“è¿æ¥"""
        pass
    
    @property
    def is_connected(self) -> bool:
        """æ£€æŸ¥æ˜¯å¦å·²è¿æ¥"""
        return True


class SimpleLogger:
    """ç®€å•çš„æ—¥å¿—ç±»ï¼ˆæ²¡æœ‰ __init__ å‚æ•°ï¼‰"""
    
    def log(self, message: str):
        """è®°å½•æ—¥å¿—"""
        print(message)
    
    def error(self, message: str):
        """è®°å½•é”™è¯¯"""
        print(f"ERROR: {message}")


# ä½¿ç”¨ AiMdGenerator ç”Ÿæˆè¿™ä¸ªæ–‡ä»¶çš„ AST å…ƒæ•°æ®
if __name__ == "__main__":
    from nb_ai_context import AiMdGenerator
    from nb_path import NbPath
    
    # è·å–å½“å‰æ–‡ä»¶è·¯å¾„
    current_file = NbPath(__file__)
    project_root = current_file.parent.parent.parent  # å›åˆ°é¡¹ç›®æ ¹ç›®å½•
    
    output_path = current_file.parent.parent / "ai_docs" / "demo_init_extraction_output.md"
    output_path.ensure_parent()
    
    print(f"å½“å‰æ–‡ä»¶: {current_file}")
    print(f"é¡¹ç›®æ ¹ç›®å½•: {project_root}")
    print(f"è¾“å‡ºè·¯å¾„: {output_path}")
    
    # ç”Ÿæˆ Markdown
    (
        AiMdGenerator(str(output_path))
        .set_project_propery(
            project_name="demo",
            project_root=str(project_root)
        )
        .clear_text()
        .merge_from_files(
            relative_file_name_list=[str(current_file.relative_to(project_root))],
            as_title="æ¼”ç¤º __init__ æå–åŠŸèƒ½",
        )
        .show_textfile_info()
    )
    
    print(f"\nâœ… å·²ç”Ÿæˆ Markdown æ–‡ä»¶: {output_path}")
    print(f"\nè¯·æŸ¥çœ‹æ–‡ä»¶å†…å®¹ï¼Œå¯ä»¥çœ‹åˆ°ï¼š")
    print("  1. DatabaseConnection ç±»çš„ __init__ æ–¹æ³•è¢«å•ç‹¬çªå‡ºæ˜¾ç¤º")
    print("  2. æ‰€æœ‰å‚æ•°ï¼ˆåŒ…æ‹¬ç±»å‹ã€é»˜è®¤å€¼ï¼‰éƒ½è¢«è¯¦ç»†åˆ—å‡º")
    print("  3. æ”¯æŒå¤æ‚ç±»å‹å¦‚ Optional[Dict[str, str]]")
    print("  4. æ”¯æŒ *args å’Œ **kwargs")
    print("  5. SimpleLogger ç±»ï¼ˆæ²¡æœ‰è‡ªå®šä¹‰ __init__ï¼‰ä¹Ÿèƒ½æ­£å¸¸å¤„ç†")
    
    # è¯»å–å¹¶æ˜¾ç¤ºéƒ¨åˆ†å†…å®¹
    content = output_path.read_text(encoding="utf-8")
    
    # æŸ¥æ‰¾å¹¶æ˜¾ç¤º __init__ éƒ¨åˆ†
    if "ğŸ”§ Constructor (`__init__`):" in content:
        print("\n" + "="*80)
        print("ç”Ÿæˆçš„ __init__ å…ƒæ•°æ®é¢„è§ˆï¼š")
        print("="*80)
        
        start_idx = content.index("ğŸ”§ Constructor (`__init__`):")
        # æ‰¾åˆ°ä¸‹ä¸€ä¸ª ** å¼€å¤´çš„éƒ¨åˆ†ï¼ˆPublic Methods æˆ– Propertiesï¼‰
        end_markers = ["**Public Methods", "**Properties", "**Class Variables"]
        end_idx = len(content)
        for marker in end_markers:
            if marker in content[start_idx:]:
                potential_end = start_idx + content[start_idx:].index(marker)
                if potential_end < end_idx:
                    end_idx = potential_end
        
        print(content[start_idx:end_idx])
    else:
        print("\nâš ï¸ æœªæ‰¾åˆ° __init__ æ„é€ å™¨ä¿¡æ¯")
```

## tests/ai_codes/test_init_extraction.py

````python
"""
æµ‹è¯• __init__ æ–¹æ³•å‚æ•°æå–åŠŸèƒ½
"""
from nb_ai_context import AiMdGenerator
from nb_path import NbPath
import tempfile
import os


# åˆ›å»ºä¸€ä¸ªæµ‹è¯•ç”¨çš„ Python æ–‡ä»¶
test_code = '''
"""æµ‹è¯•æ¨¡å—"""
from typing import Optional, List


class UserService:
    """ç”¨æˆ·æœåŠ¡ç±»
    
    è¿™æ˜¯ä¸€ä¸ªå¤„ç†ç”¨æˆ·ç›¸å…³ä¸šåŠ¡çš„æœåŠ¡ç±»
    """
    
    def __init__(
        self, 
        database_url: str,
        timeout: int = 30,
        max_connections: int = 10,
        enable_cache: bool = True,
        allowed_domains: Optional[List[str]] = None,
        **kwargs
    ):
        """åˆå§‹åŒ–ç”¨æˆ·æœåŠ¡
        
        Args:
            database_url: æ•°æ®åº“è¿æ¥URL
            timeout: è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
            max_connections: æœ€å¤§è¿æ¥æ•°
            enable_cache: æ˜¯å¦å¯ç”¨ç¼“å­˜
            allowed_domains: å…è®¸çš„åŸŸååˆ—è¡¨
        """
        self.database_url = database_url
        self.timeout = timeout
        self.max_connections = max_connections
        self.enable_cache = enable_cache
        self.allowed_domains = allowed_domains or []
    
    def get_user(self, user_id: int) -> dict:
        """è·å–ç”¨æˆ·ä¿¡æ¯"""
        pass
    
    def create_user(self, name: str, email: str) -> bool:
        """åˆ›å»ºæ–°ç”¨æˆ·"""
        pass
    
    @property
    def connection_count(self) -> int:
        """å½“å‰è¿æ¥æ•°"""
        return 0


class SimpleClass:
    """ä¸€ä¸ªæ²¡æœ‰ __init__ æ–¹æ³•çš„ç®€å•ç±»"""
    
    def do_something(self):
        """åšä¸€äº›äº‹æƒ…"""
        pass
'''


def test_init_extraction():
    """æµ‹è¯• __init__ æ–¹æ³•æå–"""
    
    # åˆ›å»ºä¸´æ—¶ç›®å½•å’Œæ–‡ä»¶
    with tempfile.TemporaryDirectory() as temp_dir:
        # åˆ›å»ºæµ‹è¯•æ–‡ä»¶
        test_file = os.path.join(temp_dir, "test_service.py")
        with open(test_file, "w", encoding="utf-8") as f:
            f.write(test_code)
        
        # ç”Ÿæˆ AI Markdown
        output_path = os.path.join(temp_dir, "test_output.md")
        
        (
            AiMdGenerator(output_path)
            .set_project_propery(
                project_name="test_project",
                project_root=temp_dir
            )
            .clear_text()
            .merge_from_files(
                relative_file_name_list=["test_service.py"],
                as_title="æµ‹è¯•ä»£ç ",
            )
            .show_textfile_info()
        )
        
        # è¯»å–ç”Ÿæˆçš„å†…å®¹
        with open(output_path, "r", encoding="utf-8") as f:
            content = f.read()
        
        print("\n" + "="*80)
        print("ç”Ÿæˆçš„ Markdown å†…å®¹ï¼ˆAST å…ƒæ•°æ®éƒ¨åˆ†ï¼‰ï¼š")
        print("="*80)
        
        # åªæ‰“å°å…ƒæ•°æ®éƒ¨åˆ†
        if "### ğŸ“„ Python File Metadata:" in content:
            metadata_start = content.index("### ğŸ“„ Python File Metadata:")
            metadata_end = content.index("```python", metadata_start) if "```python" in content[metadata_start:] else len(content)
            print(content[metadata_start:metadata_end])
        
        # éªŒè¯å…³é”®å†…å®¹
        assert "ğŸ”§ Constructor (`__init__`):" in content, "ç¼ºå°‘ __init__ æ„é€ å™¨æ ‡é¢˜"
        assert "database_url: str" in content, "ç¼ºå°‘ database_url å‚æ•°"
        assert "timeout: int = 30" in content, "ç¼ºå°‘ timeout å‚æ•°åŠé»˜è®¤å€¼"
        assert "enable_cache: bool = True" in content, "ç¼ºå°‘ enable_cache å‚æ•°åŠé»˜è®¤å€¼"
        assert "Optional[List[str]]" in content, "ç¼ºå°‘å¤æ‚ç±»å‹æ³¨è§£"
        assert "**kwargs" in content, "ç¼ºå°‘ kwargs å‚æ•°"
        
        print("\nâœ… æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼__init__ æ–¹æ³•å‚æ•°æå–æˆåŠŸï¼")
        print("\nå…³é”®ç‰¹æ€§éªŒè¯ï¼š")
        print("  âœ“ __init__ æ–¹æ³•è¢«å•ç‹¬æ˜¾ç¤º")
        print("  âœ“ å‚æ•°ç±»å‹æ³¨è§£æ­£ç¡®æå–")
        print("  âœ“ é»˜è®¤å€¼æ­£ç¡®æ˜¾ç¤º")
        print("  âœ“ å¤æ‚ç±»å‹ï¼ˆOptional[List[str]]ï¼‰æ­£ç¡®è§£æ")
        print("  âœ“ **kwargs ç­‰ç‰¹æ®Šå‚æ•°æ­£ç¡®å¤„ç†")
        print("  âœ“ æ²¡æœ‰ __init__ çš„ç±»ä¹Ÿèƒ½æ­£å¸¸å¤„ç†")


if __name__ == "__main__":
    test_init_extraction()
````

## tests/ai_docs/CHANGELOG_init_extraction.md

````markdown
# æ›´æ–°æ—¥å¿— - __init__ æ–¹æ³•å‚æ•°æå–åŠŸèƒ½

## ğŸ“… æ›´æ–°æ—¶é—´
2025-11-21

## ğŸ¯ æ›´æ–°å†…å®¹

### æ–°å¢åŠŸèƒ½ï¼šçªå‡ºæ˜¾ç¤ºç±»çš„ `__init__` æ„é€ æ–¹æ³•

åœ¨ `AiMdGenerator` ç”Ÿæˆçš„ Python æ–‡ä»¶ AST å…ƒæ•°æ®ä¸­ï¼Œç±»çš„ `__init__` æ–¹æ³•ç°åœ¨ä¼šè¢«**å•ç‹¬æå–å¹¶è¯¦ç»†å±•ç¤º**ã€‚

## ğŸ”§ æŠ€æœ¯ä¿®æ”¹

### ä¿®æ”¹æ–‡ä»¶
- `nb_ai_context/ai_md_generator.py`

### ä¿®æ”¹ä½ç½®
- æ–¹æ³•ï¼š`_format_py_metadata_as_markdown`
- è¡Œæ•°ï¼šçº¦ 730-760 è¡Œ

### ä¿®æ”¹å†…å®¹

#### 1. æŸ¥æ‰¾ __init__ æ–¹æ³•
```python
# é¦–å…ˆå•ç‹¬æ˜¾ç¤º __init__ æ–¹æ³•ï¼ˆéå¸¸é‡è¦ï¼‰
init_method = None
for method in cls["methods"]:
    if method["name"] == "__init__":
        init_method = method
        break
```

#### 2. å•ç‹¬æ˜¾ç¤ºæ„é€ å™¨ä¿¡æ¯
```python
if init_method:
    lines.append("**ğŸ”§ Constructor (`__init__`):**")
    params_str = self._format_parameters(init_method["parameters"])
    lines.append(f"- `def __init__({params_str})`")
    
    # æ˜¾ç¤º __init__ çš„æ–‡æ¡£å­—ç¬¦ä¸²
    if init_method["docstring"]:
        first_line = init_method["docstring"].split("\n")[0].strip()
        if first_line:
            lines.append(f"  - *{first_line}*")
    
    # æ˜¾ç¤ºæ¯ä¸ªå‚æ•°çš„è¯¦ç»†ä¿¡æ¯
    if init_method["parameters"]:
        lines.append("  - **Parameters:**")
        for param in init_method["parameters"]:
            param_name = param["name"]
            param_type = f": {param['type']}" if param["type"] else ""
            param_default = f" = {param['default']}" if param["default"] else ""
            lines.append(f"    - `{param_name}{param_type}{param_default}`")
    lines.append("")
```

#### 3. ä»å…¬æœ‰æ–¹æ³•åˆ—è¡¨ä¸­æ’é™¤ __init__
```python
# å…¬æœ‰æ–¹æ³•ï¼ˆæ’é™¤ __init__ï¼‰
public_methods = [m for m in cls["methods"] if m["is_public"] and m["name"] != "__init__"]
```

## ğŸ“Š è¾“å‡ºæ ¼å¼ç¤ºä¾‹

### ä¿®æ”¹å‰
```markdown
**Public Methods (5):**
- `def __init__(database_url: str, timeout: int = 30)`
- `def get_user(user_id: int) -> dict`
- `def create_user(name: str, email: str) -> bool`
- `def update_user(user_id: int) -> bool`
- `def delete_user(user_id: int) -> bool`
```

### ä¿®æ”¹å
```markdown
**ğŸ”§ Constructor (`__init__`):**
- `def __init__(database_url: str, timeout: int = 30, max_connections: int = 10, enable_cache: bool = True, **kwargs)`
  - *åˆå§‹åŒ–æ•°æ®åº“æœåŠ¡*
  - **Parameters:**
    - `database_url: str`
    - `timeout: int = 30`
    - `max_connections: int = 10`
    - `enable_cache: bool = True`
    - `**kwargs`

**Public Methods (4):**
- `def get_user(user_id: int) -> dict`
  - *è·å–ç”¨æˆ·ä¿¡æ¯*
- `def create_user(name: str, email: str) -> bool`
  - *åˆ›å»ºæ–°ç”¨æˆ·*
- `def update_user(user_id: int) -> bool`
  - *æ›´æ–°ç”¨æˆ·ä¿¡æ¯*
- `def delete_user(user_id: int) -> bool`
  - *åˆ é™¤ç”¨æˆ·*
```

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### æ”¯æŒçš„å‚æ•°ç±»å‹
- âœ… ä½ç½®å‚æ•°ï¼š`param`
- âœ… å¸¦ç±»å‹æ³¨è§£çš„å‚æ•°ï¼š`param: str`
- âœ… å¸¦é»˜è®¤å€¼çš„å‚æ•°ï¼š`param: int = 10`
- âœ… å¯é€‰ç±»å‹ï¼š`param: Optional[str] = None`
- âœ… å¤æ‚ç±»å‹ï¼š`param: Optional[Dict[str, List[int]]] = None`
- âœ… å¯å˜ä½ç½®å‚æ•°ï¼š`*args`
- âœ… å¯å˜å…³é”®å­—å‚æ•°ï¼š`**kwargs`

### æ˜¾ç¤ºå†…å®¹
1. **å®Œæ•´æ–¹æ³•ç­¾å** - ä¸€è¡Œæ˜¾ç¤ºæ‰€æœ‰å‚æ•°
2. **æ–‡æ¡£å­—ç¬¦ä¸²** - æ˜¾ç¤º docstring çš„ç¬¬ä¸€è¡Œ
3. **å‚æ•°è¯¦ç»†åˆ—è¡¨** - æ¯ä¸ªå‚æ•°å•ç‹¬ä¸€è¡Œï¼ŒåŒ…å«ï¼š
   - å‚æ•°å
   - ç±»å‹æ³¨è§£ï¼ˆå¦‚æœæœ‰ï¼‰
   - é»˜è®¤å€¼ï¼ˆå¦‚æœæœ‰ï¼‰

## ğŸ’¡ ä¸ºä»€ä¹ˆè¿™ä¸ªæ”¹è¿›å¾ˆé‡è¦ï¼Ÿ

### å¯¹å¼€å‘è€…çš„ä»·å€¼
1. **å¿«é€Ÿç†è§£** - ä¸€çœ¼çœ‹å‡ºå¦‚ä½•åˆ›å»ºç±»çš„å®ä¾‹
2. **å‡†ç¡®ä½¿ç”¨** - çŸ¥é“å“ªäº›å‚æ•°å¿…éœ€ï¼Œå“ªäº›å¯é€‰
3. **ç±»å‹å®‰å…¨** - æ¸…æ¥šæ¯ä¸ªå‚æ•°çš„ç±»å‹çº¦æŸ
4. **é»˜è®¤é…ç½®** - äº†è§£é»˜è®¤å€¼ï¼Œå‡å°‘ä¸å¿…è¦çš„å‚æ•°ä¼ é€’

### å¯¹ AI å¤§æ¨¡å‹çš„ä»·å€¼
1. **æ›´å¥½çš„ä»£ç ç”Ÿæˆ** - AI èƒ½å‡†ç¡®ç”Ÿæˆç±»çš„å®ä¾‹åŒ–ä»£ç 
2. **å‡å°‘å¹»è§‰** - æ˜ç¡®çš„å‚æ•°ä¿¡æ¯å‡å°‘ AI çš„çŒœæµ‹
3. **ç†è§£é¡¹ç›®æ¶æ„** - æ„é€ å‡½æ•°å‚æ•°åæ˜ äº†ç±»çš„ä¾èµ–å…³ç³»
4. **æå‡å‡†ç¡®æ€§** - å®Œæ•´çš„ç±»å‹ä¿¡æ¯å¸®åŠ© AI ç†è§£ä»£ç æ„å›¾

## ğŸ”„ å…¼å®¹æ€§è¯´æ˜

- âœ… **å‘åå…¼å®¹** - ä¸å½±å“ç°æœ‰åŠŸèƒ½
- âœ… **ä¼˜é›…é™çº§** - å¦‚æœç±»æ²¡æœ‰ `__init__` æ–¹æ³•ï¼Œä¸ä¼šæ˜¾ç¤ºæ„é€ å™¨éƒ¨åˆ†
- âœ… **æ— ç ´åæ€§** - ä¸æ”¹å˜å…¶ä»–æ–¹æ³•çš„æ˜¾ç¤ºæ–¹å¼
- âœ… **é€‚ç”¨æ‰€æœ‰åœºæ™¯** - å¯¹æ‰€æœ‰ Python ç±»éƒ½ç”Ÿæ•ˆ

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹ä»£ç 
```python
from nb_ai_context import AiMdGenerator

(
    AiMdGenerator("output.md")
    .set_project_propery(
        project_name="my_project",
        project_root=r"D:\codes\my_project"
    )
    .clear_text()
    .merge_from_dir(
        relative_dir_name="src",
        as_title="æºä»£ç ",
        should_include_suffixes=[".py"],
        include_ast_metadata=True,  # å¼€å¯ AST å…ƒæ•°æ®æå–
    )
)
```

ç”Ÿæˆçš„ Markdown ä¸­ï¼Œæ¯ä¸ª Python ç±»çš„ `__init__` æ–¹æ³•éƒ½ä¼šè¢«ç‰¹åˆ«çªå‡ºæ˜¾ç¤ºã€‚

## ğŸ¯ å®é™…åº”ç”¨åœºæ™¯

### 1. API æ–‡æ¡£ç”Ÿæˆ
å¿«é€Ÿç”Ÿæˆç±»çš„æ„é€ å‡½æ•°æ–‡æ¡£ï¼Œæ–¹ä¾¿ç”¨æˆ·æŸ¥é˜…ã€‚

### 2. ä»£ç å®¡æŸ¥
å®¡æŸ¥è€…èƒ½å¿«é€Ÿäº†è§£ç±»çš„åˆå§‹åŒ–éœ€æ±‚å’Œä¾èµ–ã€‚

### 3. AI è¾…åŠ©ç¼–ç¨‹
AI èƒ½å‡†ç¡®ç†è§£å¦‚ä½•å®ä¾‹åŒ–ç±»ï¼Œç”Ÿæˆæ­£ç¡®çš„ä»£ç ã€‚

### 4. æ–°äººä¸Šæ‰‹
æ–°å›¢é˜Ÿæˆå‘˜èƒ½å¿«é€Ÿç†è§£é¡¹ç›®ä¸­å„ä¸ªç±»çš„ä½¿ç”¨æ–¹å¼ã€‚

### 5. é‡æ„å‚è€ƒ
é‡æ„æ—¶èƒ½æ¸…æ¥šçœ‹åˆ°ç±»çš„æ„é€ ä¾èµ–ï¼Œé¿å…é—æ¼ã€‚

## ğŸš€ ä¸‹ä¸€æ­¥è®¡åˆ’

å¯èƒ½çš„å¢å¼ºæ–¹å‘ï¼š
- [ ] æ”¯æŒæå– `@dataclass` çš„å­—æ®µä¿¡æ¯
- [ ] æ”¯æŒæå– `@attrs` è£…é¥°å™¨ç±»çš„å±æ€§
- [ ] æ”¯æŒæ˜¾ç¤º `__new__` æ–¹æ³•ï¼ˆå¦‚æœæœ‰ï¼‰
- [ ] æ”¯æŒæå–ç±»çš„ç»§æ‰¿é“¾ä¸­æ‰€æœ‰ `__init__` å‚æ•°

## ğŸ“ åé¦ˆ

å¦‚æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·è®¿é—®ï¼š
- GitHub Issues: https://github.com/ydf0509/nb_ai_context/issues

---

**nb_ai_context** - è®© AI çœŸæ­£ç†è§£ä½ çš„ä»£ç  ğŸš€
````

## tests/ai_docs/complete_docstring_extraction.md

````markdown
# å®Œæ•´æ–‡æ¡£å­—ç¬¦ä¸²æå–åŠŸèƒ½

## ğŸ“… æ›´æ–°æ—¶é—´
2025-11-21

## ğŸ¯ é—®é¢˜æè¿°

ä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼ŒAST å…ƒæ•°æ®æå–æ—¶å¯¹æ–‡æ¡£å­—ç¬¦ä¸²ï¼ˆdocstringï¼‰è¿›è¡Œäº†æˆªæ–­å¤„ç†ï¼š
- **ç±»çš„ docstring**ï¼šåªæ˜¾ç¤ºå‰ 3 è¡Œï¼Œåé¢ç”¨ `...` çœç•¥
- **`__init__` æ–¹æ³•çš„ docstring**ï¼šåªæ˜¾ç¤ºç¬¬ 1 è¡Œ
- **æ™®é€šæ–¹æ³•çš„ docstring**ï¼šåªæ˜¾ç¤ºç¬¬ 1 è¡Œ
- **é¡¶çº§å‡½æ•°çš„ docstring**ï¼šåªæ˜¾ç¤ºç¬¬ 1 è¡Œ

è¿™å¯¼è‡´å¾ˆå¤šé‡è¦çš„æ–‡æ¡£ä¿¡æ¯ä¸¢å¤±ï¼Œç‰¹åˆ«æ˜¯å¯¹äºåƒ funboost è¿™æ ·æœ‰è¯¦ç»†æ–‡æ¡£çš„é¡¹ç›®ã€‚

## âœ¨ è§£å†³æ–¹æ¡ˆ

ç°åœ¨æ‰€æœ‰æ–‡æ¡£å­—ç¬¦ä¸²éƒ½ä¼š**å®Œæ•´æ˜¾ç¤º**ï¼š

### 1. ç±»çš„ docstring - å®Œæ•´æ˜¾ç¤º

```python
# ä¿®æ”¹å‰
docstring_lines = cls["docstring"].split("\n")[:3]  # åªå–å‰3è¡Œ
if len(cls["docstring"].split("\n")) > 3:
    lines.append("...")

# ä¿®æ”¹å
docstring_lines = cls["docstring"].split("\n")  # æ˜¾ç¤ºæ‰€æœ‰è¡Œ
```

### 2. `__init__` æ–¹æ³•çš„ docstring - å®Œæ•´æ˜¾ç¤º

```python
# ä¿®æ”¹å‰
first_line = init_method["docstring"].split("\n")[0].strip()
if first_line:
    lines.append(f"  - *{first_line}*")

# ä¿®æ”¹å
if init_method["docstring"]:
    lines.append("  - **Docstring:**")
    lines.append("  ```")
    for doc_line in init_method["docstring"].split("\n"):
        lines.append(f"  {doc_line}")
    lines.append("  ```")
```

### 3. æ™®é€šæ–¹æ³•çš„ docstring - æ™ºèƒ½æ˜¾ç¤º

```python
# æ–°é€»è¾‘ï¼šæ ¹æ®è¡Œæ•°æ™ºèƒ½é€‰æ‹©æ ¼å¼
if method["docstring"]:
    docstring_lines = method["docstring"].split("\n")
    if len(docstring_lines) == 1:
        # å•è¡Œæ–‡æ¡£ï¼šç®€çŸ­æ ¼å¼
        lines.append(f"  - *{method['docstring'].strip()}*")
    else:
        # å¤šè¡Œæ–‡æ¡£ï¼šä»£ç å—æ ¼å¼
        lines.append("  - **Docstring:**")
        lines.append("  ```")
        for doc_line in docstring_lines:
            lines.append(f"  {doc_line}")
        lines.append("  ```")
```

### 4. é¡¶çº§å‡½æ•°çš„ docstring - æ™ºèƒ½æ˜¾ç¤º

ä¸æ™®é€šæ–¹æ³•ç›¸åŒçš„é€»è¾‘ã€‚

## ğŸ“Š æ•ˆæœå¯¹æ¯”

### ä¿®æ”¹å‰ âŒ

```markdown
**Docstring:**
```
funboostæå…¶é‡è§†ä»£ç èƒ½åœ¨pycharmä¸‹è‡ªåŠ¨è¡¥å…¨ã€‚å…ƒç¼–ç¨‹ç»å¸¸é€ æˆåœ¨pycharmä¸‹ä»£ç æ— æ³•è‡ªåŠ¨è¡¥å…¨æç¤ºï¼Œä¸»è¦æ˜¯å®ç°ä»£ç è¡¥å…¨éš¾ã€‚
è¿™ç§__call__å†™æ³•åœ¨pycahrmä¸‹ ä¸ä»…èƒ½è¡¥å…¨æ¶ˆè´¹å‡½æ•°çš„ push consumeç­‰æ–¹æ³•ï¼Œä¹Ÿèƒ½è¡¥å…¨å‡½æ•°æœ¬èº«çš„å…¥å‚ï¼Œä¸€ä¸¾ä¸¤å¾—ã€‚ä»£ç èƒ½è‡ªåŠ¨è¡¥å…¨å¾ˆé‡è¦ã€‚
...
```

**ğŸ”§ Constructor (`__init__`):**
- `def __init__(self, queue_name: typing.Union[BoosterParams, str] = None, **kwargs)`
  - *@boost è¿™æ˜¯funboostæ¡†æ¶æœ€é‡è¦çš„ä¸€ä¸ªå‡½æ•°ï¼Œå¿…é¡»çœ‹æ‡‚BoosterParamsé‡Œé¢çš„å…¥å‚æœ‰å“ªäº›ã€‚*
```

### ä¿®æ”¹å âœ…

```markdown
**Docstring:**
```
funboostæå…¶é‡è§†ä»£ç èƒ½åœ¨pycharmä¸‹è‡ªåŠ¨è¡¥å…¨ã€‚å…ƒç¼–ç¨‹ç»å¸¸é€ æˆåœ¨pycharmä¸‹ä»£ç æ— æ³•è‡ªåŠ¨è¡¥å…¨æç¤ºï¼Œä¸»è¦æ˜¯å®ç°ä»£ç è¡¥å…¨éš¾ã€‚
è¿™ç§__call__å†™æ³•åœ¨pycahrmä¸‹ ä¸ä»…èƒ½è¡¥å…¨æ¶ˆè´¹å‡½æ•°çš„ push consumeç­‰æ–¹æ³•ï¼Œä¹Ÿèƒ½è¡¥å…¨å‡½æ•°æœ¬èº«çš„å…¥å‚ï¼Œä¸€ä¸¾ä¸¤å¾—ã€‚ä»£ç èƒ½è‡ªåŠ¨è¡¥å…¨å¾ˆé‡è¦ã€‚
ä¸€ä¸ªå‡½æ•°funè¢« boostè£…é¥°å™¨è£…é¥°åï¼Œ isinstance(fun,Booster) ä¸ºTrue.

pydatinc pycharmç¼–ç¨‹ä»£ç è¡¥å…¨,è¯·å®‰è£… pydanticæ’ä»¶, åœ¨pycharmçš„  file -> settings -> Plugins -> è¾“å…¥ pydantic æœç´¢,ç‚¹å‡»å®‰è£… pydantic æ’ä»¶.

Booster æ˜¯æŠŠConsumer å’Œ Publisherçš„æ–¹æ³•é›†ä¸ºä¸€ä½“ã€‚
```

**ğŸ”§ Constructor (`__init__`):**
- `def __init__(self, queue_name: typing.Union[BoosterParams, str] = None, **kwargs)`
  - **Docstring:**
  ```
  @boost è¿™æ˜¯funboostæ¡†æ¶æœ€é‡è¦çš„ä¸€ä¸ªå‡½æ•°ï¼Œå¿…é¡»çœ‹æ‡‚BoosterParamsé‡Œé¢çš„å…¥å‚æœ‰å“ªäº›ã€‚
  pydatinc pycharmç¼–ç¨‹ä»£ç è¡¥å…¨,è¯·å®‰è£… pydanticæ’ä»¶, åœ¨pycharmçš„  file -> settings -> Plugins -> è¾“å…¥ pydantic æœç´¢,ç‚¹å‡»å®‰è£… pydantic æ’ä»¶.
  (é«˜ç‰ˆæœ¬çš„pycharm pydanticæ˜¯å†…ç½®æ”¯æŒä»£ç è¡¥å…¨çš„,ç”±æ­¤å¯è§,pydanticå¤ªå¥½äº†,pycharmå®˜æ–¹éƒ½æ¥æ”¯æŒ)
  
  å¼ºçƒˆå»ºè®®æ‰€æœ‰å…¥å‚æ”¾åœ¨ BoosterParams() ä¸­,ä¸è¦ç›´æ¥åœ¨BoosterParamsä¹‹å¤–ä¼ å‚.ç°åœ¨æ˜¯å…¼å®¹è€çš„ç›´æ¥åœ¨@boostä¸­ä¼ å‚æ–¹å¼.
  å»ºè®®ä¸è¦ç»™ç¬¬ä¸€ä¸ªå…¥å‚queue_nameä¼ é€’å­—ç¬¦ä¸²ï¼Œè€Œæ˜¯æ°¸è¿œä¼ é€’BoosterParamsç±»å‹ï¼Œ ä¾‹å¦‚ @boost(BoosterParams(queue_name='queue_test_f01', qps=0.2, ))
  
  ```python
  # @boost('queue_test_f01', qps=0.2, ) # è€çš„å…¥å‚æ–¹å¼
  @boost(BoosterParams(queue_name='queue_test_f01', qps=0.2, )) # æ–°çš„å…¥å‚æ–¹å¼
  def f(a, b):
      print(a + b)
  
  for i in range(10, 20):
      f.pub(dict(a=i, b=i * 2))
      f.push(i, i * 2)
  f.consume()
  ```
  
  @boost('queue_test_f01', qps=0.2, ) 
  @boost(BoosterParams(queue_name='queue_test_f01', qps=0.2, ))
  @Booster(BoosterParams(queue_name='queue_test_f01', qps=0.2, ))
  @BoosterParams(queue_name='queue_test_f01', qps=0.2, )
  ä»¥ä¸Š4ç§å†™æ³•ç­‰æ•ˆã€‚
  ```
  - **Parameters:**
    - `self`
    - `queue_name: typing.Union[BoosterParams, str] = None`
    - `**kwargs`
```

## ğŸ”§ æŠ€æœ¯å®ç°

### ä¿®æ”¹æ–‡ä»¶
- `nb_ai_context/ai_md_generator.py`

### ä¿®æ”¹çš„ä½ç½®

1. **ç±»çš„ docstring**ï¼ˆçº¦ 720-728 è¡Œï¼‰
   - ç§»é™¤äº† `[:3]` åˆ‡ç‰‡
   - ç§»é™¤äº† `...` çœç•¥æ ‡è®°

2. **`__init__` æ–¹æ³•çš„ docstring**ï¼ˆçº¦ 738-752 è¡Œï¼‰
   - ä»å•è¡Œæ˜¾ç¤ºæ”¹ä¸ºå®Œæ•´å¤šè¡Œä»£ç å—æ˜¾ç¤º
   - æ·»åŠ  "Docstring:" æ ‡é¢˜
   - ä¿æŒé€‚å½“çš„ç¼©è¿›

3. **æ™®é€šæ–¹æ³•çš„ docstring**ï¼ˆçº¦ 771-783 è¡Œï¼‰
   - æ·»åŠ æ™ºèƒ½åˆ¤æ–­é€»è¾‘
   - å•è¡Œï¼šç®€çŸ­æ ¼å¼ `*text*`
   - å¤šè¡Œï¼šä»£ç å—æ ¼å¼

4. **é¡¶çº§å‡½æ•°çš„ docstring**ï¼ˆçº¦ 819-833 è¡Œï¼‰
   - ä¸æ™®é€šæ–¹æ³•ç›¸åŒçš„æ™ºèƒ½åˆ¤æ–­é€»è¾‘

## âœ… ä¼˜åŠ¿

### 1. ä¿¡æ¯å®Œæ•´æ€§
- âœ… ä¸å†æˆªæ–­é‡è¦çš„æ–‡æ¡£ä¿¡æ¯
- âœ… å®Œæ•´ä¿ç•™ä½œè€…çš„æ„å›¾å’Œè¯´æ˜
- âœ… ç‰¹åˆ«é€‚åˆæœ‰è¯¦ç»†æ–‡æ¡£çš„é¡¹ç›®ï¼ˆå¦‚ funboostï¼‰

### 2. AI ç†è§£èƒ½åŠ›æå‡
- âœ… AI èƒ½è·å–å®Œæ•´çš„ä½¿ç”¨è¯´æ˜
- âœ… èƒ½çœ‹åˆ°å®Œæ•´çš„ç¤ºä¾‹ä»£ç 
- âœ… ç†è§£å¤šç§ä½¿ç”¨æ–¹å¼å’Œæ³¨æ„äº‹é¡¹

### 3. æ ¼å¼ä¼˜åŒ–
- âœ… å•è¡Œæ–‡æ¡£ï¼šä¿æŒç®€æ´ï¼Œç”¨æ–œä½“æ˜¾ç¤º
- âœ… å¤šè¡Œæ–‡æ¡£ï¼šä½¿ç”¨ä»£ç å—ï¼Œä¿æŒæ ¼å¼
- âœ… é€‚å½“çš„ç¼©è¿›ï¼Œä¿æŒå±‚æ¬¡ç»“æ„æ¸…æ™°

## ğŸ“ å®é™…æ¡ˆä¾‹

### æ¡ˆä¾‹ï¼šfunboost çš„ Booster ç±»

åŸå§‹ä»£ç ï¼š
```python
class Booster:
    """
    funboostæå…¶é‡è§†ä»£ç èƒ½åœ¨pycharmä¸‹è‡ªåŠ¨è¡¥å…¨ã€‚å…ƒç¼–ç¨‹ç»å¸¸é€ æˆåœ¨pycharmä¸‹ä»£ç æ— æ³•è‡ªåŠ¨è¡¥å…¨æç¤ºï¼Œä¸»è¦æ˜¯å®ç°ä»£ç è¡¥å…¨éš¾ã€‚
    è¿™ç§__call__å†™æ³•åœ¨pycahrmä¸‹ ä¸ä»…èƒ½è¡¥å…¨æ¶ˆè´¹å‡½æ•°çš„ push consumeç­‰æ–¹æ³•ï¼Œä¹Ÿèƒ½è¡¥å…¨å‡½æ•°æœ¬èº«çš„å…¥å‚ï¼Œä¸€ä¸¾ä¸¤å¾—ã€‚ä»£ç èƒ½è‡ªåŠ¨è¡¥å…¨å¾ˆé‡è¦ã€‚
    ä¸€ä¸ªå‡½æ•°funè¢« boostè£…é¥°å™¨è£…é¥°åï¼Œ isinstance(fun,Booster) ä¸ºTrue.

    pydatinc pycharmç¼–ç¨‹ä»£ç è¡¥å…¨,è¯·å®‰è£… pydanticæ’ä»¶, åœ¨pycharmçš„  file -> settings -> Plugins -> è¾“å…¥ pydantic æœç´¢,ç‚¹å‡»å®‰è£… pydantic æ’ä»¶.

    Booster æ˜¯æŠŠConsumer å’Œ Publisherçš„æ–¹æ³•é›†ä¸ºä¸€ä½“ã€‚
    """
    
    def __init__(self, queue_name: typing.Union[BoosterParams, str] = None, **kwargs):
        """
        @boost è¿™æ˜¯funboostæ¡†æ¶æœ€é‡è¦çš„ä¸€ä¸ªå‡½æ•°ï¼Œå¿…é¡»çœ‹æ‡‚BoosterParamsé‡Œé¢çš„å…¥å‚æœ‰å“ªäº›ã€‚
        pydatinc pycharmç¼–ç¨‹ä»£ç è¡¥å…¨,è¯·å®‰è£… pydanticæ’ä»¶...
        
        å¼ºçƒˆå»ºè®®æ‰€æœ‰å…¥å‚æ”¾åœ¨ BoosterParams() ä¸­...
        
        ```python
        # ç¤ºä¾‹ä»£ç 
        @boost(BoosterParams(queue_name='queue_test_f01', qps=0.2, ))
        def f(a, b):
            print(a + b)
        ```
        
        ä»¥ä¸Š4ç§å†™æ³•ç­‰æ•ˆã€‚
        """
        pass
```

ç°åœ¨ç”Ÿæˆçš„ AST å…ƒæ•°æ®ä¼š**å®Œæ•´æ˜¾ç¤º**ï¼š
- æ‰€æœ‰ 7 è¡Œçš„ç±»æ–‡æ¡£å­—ç¬¦ä¸²
- `__init__` æ–¹æ³•ä¸­åŒ…å«ç¤ºä¾‹ä»£ç çš„å®Œæ•´æ–‡æ¡£å­—ç¬¦ä¸²

## ğŸ¯ é€‚ç”¨åœºæ™¯

ç‰¹åˆ«é€‚åˆä»¥ä¸‹ç±»å‹çš„é¡¹ç›®ï¼š
1. **æ¡†æ¶ç±»é¡¹ç›®** - å¦‚ funboostã€FastAPI ç­‰ï¼Œéœ€è¦è¯¦ç»†çš„ä½¿ç”¨è¯´æ˜
2. **åº“é¡¹ç›®** - æœ‰è¯¦ç»†çš„ API æ–‡æ¡£å’Œç¤ºä¾‹
3. **æ•™å­¦é¡¹ç›®** - ä»£ç ä¸­åŒ…å«å¤§é‡æ³¨é‡Šå’Œè¯´æ˜
4. **ä¼ä¸šé¡¹ç›®** - æœ‰è§„èŒƒçš„æ–‡æ¡£å­—ç¬¦ä¸²æ ‡å‡†

## ğŸ”„ å…¼å®¹æ€§

- âœ… å®Œå…¨å‘åå…¼å®¹
- âœ… å•è¡Œæ–‡æ¡£å­—ç¬¦ä¸²ä¿æŒç®€æ´æ ¼å¼
- âœ… å¤šè¡Œæ–‡æ¡£å­—ç¬¦ä¸²ä½¿ç”¨ä»£ç å—æ ¼å¼
- âœ… ä¸å½±å“å…¶ä»–åŠŸèƒ½

## ğŸ’¡ æœ€ä½³å®è·µ

### ç¼–å†™æ–‡æ¡£å­—ç¬¦ä¸²æ—¶çš„å»ºè®®

1. **ç¬¬ä¸€è¡Œåº”è¯¥æ˜¯ç®€çŸ­çš„æ¦‚è¿°**
   ```python
   """ç®€çŸ­çš„åŠŸèƒ½æè¿°
   
   è¯¦ç»†çš„è¯´æ˜...
   """
   ```

2. **åŒ…å«ç¤ºä¾‹ä»£ç **
   ```python
   """åˆå§‹åŒ–é…ç½®
   
   Example:
       ```python
       config = Config(host="localhost", port=3306)
       ```
   """
   ```

3. **è¯´æ˜å‚æ•°å’Œè¿”å›å€¼**
   ```python
   """æ‰§è¡ŒæŸ¥è¯¢
   
   Args:
       query: SQL æŸ¥è¯¢è¯­å¥
       params: æŸ¥è¯¢å‚æ•°
       
   Returns:
       æŸ¥è¯¢ç»“æœåˆ—è¡¨
   """
   ```

ç°åœ¨è¿™äº›è¯¦ç»†çš„æ–‡æ¡£éƒ½ä¼šè¢«å®Œæ•´æå–åˆ° AI ä¸Šä¸‹æ–‡ä¸­ï¼

---

**nb_ai_context** - å®Œæ•´ã€å‡†ç¡®åœ°ä¸º AI æä¾›ä»£ç ä¸Šä¸‹æ–‡ ğŸš€
````

## tests/ai_docs/init_extraction_feature.md

````markdown
# __init__ æ–¹æ³•å‚æ•°æå–åŠŸèƒ½è¯´æ˜

## ğŸ¯ åŠŸèƒ½æè¿°

ç°åœ¨ `AiMdGenerator` åœ¨æå– Python ç±»çš„ AST å…ƒæ•°æ®æ—¶ï¼Œä¼š**å•ç‹¬çªå‡ºæ˜¾ç¤º**ç±»çš„ `__init__` æ„é€ æ–¹æ³•åŠå…¶æ‰€æœ‰å‚æ•°ä¿¡æ¯ã€‚

## âœ¨ ä¸ºä»€ä¹ˆè¿™å¾ˆé‡è¦ï¼Ÿ

ç±»çš„ `__init__` æ–¹æ³•å®šä¹‰äº†å¦‚ä½•åˆ›å»ºç±»çš„å®ä¾‹ï¼Œå…¶å‚æ•°åˆ—è¡¨æ˜¯ç†è§£å¦‚ä½•ä½¿ç”¨è¯¥ç±»çš„å…³é”®ï¼š

- âœ… çŸ¥é“éœ€è¦ä¼ é€’å“ªäº›å‚æ•°
- âœ… äº†è§£å‚æ•°çš„ç±»å‹æ³¨è§£
- âœ… æŸ¥çœ‹å“ªäº›å‚æ•°æœ‰é»˜è®¤å€¼
- âœ… å¿«é€Ÿç†è§£ç±»çš„åˆå§‹åŒ–é€»è¾‘

## ğŸ“Š ä¿®æ”¹å‰åå¯¹æ¯”

### ä¿®æ”¹å‰ âŒ

`__init__` æ–¹æ³•æ··åœ¨æ™®é€šçš„å…¬æœ‰æ–¹æ³•åˆ—è¡¨ä¸­ï¼Œä¸å¤Ÿçªå‡ºï¼š

```markdown
**Public Methods (5):**
- `def __init__(database_url: str, timeout: int = 30, max_connections: int = 10)`
- `def get_user(user_id: int) -> dict`
- `def create_user(name: str, email: str) -> bool`
- `def update_user(user_id: int, **kwargs) -> bool`
- `def delete_user(user_id: int) -> bool`
```

### ä¿®æ”¹å âœ…

`__init__` æ–¹æ³•è¢«å•ç‹¬æå–ï¼Œå¹¶è¯¦ç»†æ˜¾ç¤ºæ¯ä¸ªå‚æ•°ï¼š

```markdown
**ğŸ”§ Constructor (`__init__`):**
- `def __init__(database_url: str, timeout: int = 30, max_connections: int = 10, enable_cache: bool = True, allowed_domains: Optional[List[str]] = None, **kwargs)`
  - *åˆå§‹åŒ–ç”¨æˆ·æœåŠ¡*
  - **Parameters:**
    - `database_url: str`
    - `timeout: int = 30`
    - `max_connections: int = 10`
    - `enable_cache: bool = True`
    - `allowed_domains: Optional[List[str]] = None`
    - `**kwargs`

**Public Methods (4):**
- `def get_user(user_id: int) -> dict`
  - *è·å–ç”¨æˆ·ä¿¡æ¯*
- `def create_user(name: str, email: str) -> bool`
  - *åˆ›å»ºæ–°ç”¨æˆ·*
- `def update_user(user_id: int, **kwargs) -> bool`
  - *æ›´æ–°ç”¨æˆ·ä¿¡æ¯*
- `def delete_user(user_id: int) -> bool`
  - *åˆ é™¤ç”¨æˆ·*
```

## ğŸ”§ æŠ€æœ¯å®ç°

ä¿®æ”¹ä½ç½®ï¼š`nb_ai_context/ai_md_generator.py` çš„ `_format_py_metadata_as_markdown` æ–¹æ³•

### æ ¸å¿ƒé€»è¾‘

1. **æŸ¥æ‰¾ __init__ æ–¹æ³•**
   ```python
   init_method = None
   for method in cls["methods"]:
       if method["name"] == "__init__":
           init_method = method
           break
   ```

2. **å•ç‹¬æ˜¾ç¤ºæ„é€ å™¨**
   - ä½¿ç”¨ä¸“é—¨çš„æ ‡é¢˜ `ğŸ”§ Constructor (\`__init__\`):`
   - æ˜¾ç¤ºå®Œæ•´çš„æ–¹æ³•ç­¾å
   - æ˜¾ç¤ºæ–‡æ¡£å­—ç¬¦ä¸²
   - **é€ä¸ªåˆ—å‡ºæ¯ä¸ªå‚æ•°åŠå…¶ç±»å‹å’Œé»˜è®¤å€¼**

3. **ä»æ™®é€šæ–¹æ³•ä¸­æ’é™¤**
   ```python
   public_methods = [m for m in cls["methods"] if m["is_public"] and m["name"] != "__init__"]
   ```

## ğŸ“ å®Œæ•´ç¤ºä¾‹

å‡è®¾æœ‰ä»¥ä¸‹ Python ç±»ï¼š

```python
from typing import Optional, List

class UserService:
    """ç”¨æˆ·æœåŠ¡ç±»"""
    
    def __init__(
        self, 
        database_url: str,
        timeout: int = 30,
        max_connections: int = 10,
        enable_cache: bool = True,
        allowed_domains: Optional[List[str]] = None,
        **kwargs
    ):
        """åˆå§‹åŒ–ç”¨æˆ·æœåŠ¡
        
        Args:
            database_url: æ•°æ®åº“è¿æ¥URL
            timeout: è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
            max_connections: æœ€å¤§è¿æ¥æ•°
            enable_cache: æ˜¯å¦å¯ç”¨ç¼“å­˜
            allowed_domains: å…è®¸çš„åŸŸååˆ—è¡¨
        """
        self.database_url = database_url
        self.timeout = timeout
    
    def get_user(self, user_id: int) -> dict:
        """è·å–ç”¨æˆ·ä¿¡æ¯"""
        pass
    
    def create_user(self, name: str, email: str) -> bool:
        """åˆ›å»ºæ–°ç”¨æˆ·"""
        pass
```

### ç”Ÿæˆçš„ AST å…ƒæ•°æ® Markdown

```markdown
### ğŸ“„ Python File Metadata: `src/user_service.py`

#### ğŸ“¦ Imports
- `from typing import Optional, List`

#### ğŸ›ï¸ Classes (1)

##### ğŸ“Œ `class UserService`
*Line: 3*

**Docstring:**
```
ç”¨æˆ·æœåŠ¡ç±»
```

**ğŸ”§ Constructor (`__init__`):**
- `def __init__(database_url: str, timeout: int = 30, max_connections: int = 10, enable_cache: bool = True, allowed_domains: Optional[List[str]] = None, **kwargs)`
  - *åˆå§‹åŒ–ç”¨æˆ·æœåŠ¡*
  - **Parameters:**
    - `database_url: str`
    - `timeout: int = 30`
    - `max_connections: int = 10`
    - `enable_cache: bool = True`
    - `allowed_domains: Optional[List[str]] = None`
    - `**kwargs`

**Public Methods (2):**
- `def get_user(user_id: int) -> dict`
  - *è·å–ç”¨æˆ·ä¿¡æ¯*
- `def create_user(name: str, email: str) -> bool`
  - *åˆ›å»ºæ–°ç”¨æˆ·*
```

## âœ… ä¼˜åŠ¿æ€»ç»“

1. **æ›´æ¸…æ™°** - `__init__` ä½œä¸ºç±»çš„æ„é€ å™¨ï¼Œè¢«ç‰¹åˆ«çªå‡ºæ˜¾ç¤º
2. **æ›´è¯¦ç»†** - æ¯ä¸ªå‚æ•°å•ç‹¬ä¸€è¡Œï¼Œç±»å‹å’Œé»˜è®¤å€¼ä¸€ç›®äº†ç„¶
3. **æ›´æ˜“è¯»** - AI å’Œäººç±»éƒ½èƒ½å¿«é€Ÿç†è§£å¦‚ä½•å®ä¾‹åŒ–è¿™ä¸ªç±»
4. **æ›´ä¸“ä¸š** - ç¬¦åˆ API æ–‡æ¡£çš„æ ‡å‡†æ ¼å¼

## ğŸ¯ å¯¹ AI å¤§æ¨¡å‹çš„ä»·å€¼

å½“ AI çœ‹åˆ°è¿™æ ·çš„å…ƒæ•°æ®æ—¶ï¼Œå®ƒèƒ½ç«‹å³ç†è§£ï¼š

- è¿™ä¸ªç±»éœ€è¦ä»€ä¹ˆå‚æ•°æ‰èƒ½åˆ›å»ºå®ä¾‹
- å“ªäº›å‚æ•°æ˜¯å¿…éœ€çš„ï¼Œå“ªäº›æ˜¯å¯é€‰çš„
- å‚æ•°çš„ç±»å‹çº¦æŸæ˜¯ä»€ä¹ˆ
- æœ‰å“ªäº›é»˜è®¤é…ç½®

è¿™å¤§å¤§æå‡äº† AI ç”Ÿæˆæ­£ç¡®ä»£ç çš„èƒ½åŠ›ï¼

## ğŸ”„ å…¼å®¹æ€§

- âœ… å¦‚æœç±»æ²¡æœ‰ `__init__` æ–¹æ³•ï¼Œä¸ä¼šæ˜¾ç¤ºæ„é€ å™¨éƒ¨åˆ†
- âœ… ä¸å½±å“å…¶ä»–æ–¹æ³•çš„æ˜¾ç¤º
- âœ… å®Œå…¨å‘åå…¼å®¹
- âœ… æ”¯æŒæ‰€æœ‰ç±»å‹çš„å‚æ•°ï¼ˆä½ç½®å‚æ•°ã€å…³é”®å­—å‚æ•°ã€*argsã€**kwargsï¼‰
````

## tests/ai_docs/UPDATE_SUMMARY.md

````markdown
# nb_ai_context æ›´æ–°æ‘˜è¦

## ğŸ“… æ›´æ–°æ—¥æœŸ
2025-11-21

## ğŸ¯ æœ¬æ¬¡æ›´æ–°çš„ä¸¤ä¸ªé‡è¦åŠŸèƒ½

### åŠŸèƒ½ 1ï¸âƒ£ï¼šçªå‡ºæ˜¾ç¤ºç±»çš„ `__init__` æ„é€ æ–¹æ³• â­â­â­â­â­

#### é—®é¢˜
ä¹‹å‰ `__init__` æ–¹æ³•æ··åœ¨æ™®é€šå…¬æœ‰æ–¹æ³•åˆ—è¡¨ä¸­ï¼Œä¸å¤Ÿçªå‡ºã€‚

#### è§£å†³æ–¹æ¡ˆ
- âœ… `__init__` æ–¹æ³•è¢«å•ç‹¬æå–ï¼Œä½¿ç”¨ä¸“é—¨çš„æ ‡é¢˜ `ğŸ”§ Constructor (\`__init__\`):`
- âœ… æ˜¾ç¤ºå®Œæ•´çš„æ–¹æ³•ç­¾å
- âœ… æ˜¾ç¤ºå®Œæ•´çš„æ–‡æ¡£å­—ç¬¦ä¸²
- âœ… **é€ä¸ªåˆ—å‡ºæ¯ä¸ªå‚æ•°**ï¼ŒåŒ…æ‹¬ç±»å‹æ³¨è§£å’Œé»˜è®¤å€¼
- âœ… æ”¯æŒæ‰€æœ‰å‚æ•°ç±»å‹ï¼šä½ç½®å‚æ•°ã€å…³é”®å­—å‚æ•°ã€`*args`ã€`**kwargs`
- âœ… ä»å…¬æœ‰æ–¹æ³•åˆ—è¡¨ä¸­æ’é™¤ï¼Œé¿å…é‡å¤

#### æ•ˆæœ
```markdown
**ğŸ”§ Constructor (`__init__`):**
- `def __init__(database_url: str, timeout: int = 30, max_connections: int = 10, **kwargs)`
  - **Docstring:**
  ```
  åˆå§‹åŒ–æ•°æ®åº“æœåŠ¡
  
  Args:
      database_url: æ•°æ®åº“è¿æ¥URL
      timeout: è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
      max_connections: æœ€å¤§è¿æ¥æ•°
  ```
  - **Parameters:**
    - `database_url: str`
    - `timeout: int = 30`
    - `max_connections: int = 10`
    - `**kwargs`

**Public Methods (4):**  ğŸ‘ˆ æ³¨æ„ï¼š__init__ å·²è¢«æ’é™¤ï¼Œæ•°é‡å‡å°‘äº†
- `def get_user(user_id: int) -> dict`
- ...
```

---

### åŠŸèƒ½ 2ï¸âƒ£ï¼šå®Œæ•´æ˜¾ç¤ºæ–‡æ¡£å­—ç¬¦ä¸² â­â­â­â­â­

#### é—®é¢˜
ä¹‹å‰ç‰ˆæœ¬å¯¹æ–‡æ¡£å­—ç¬¦ä¸²è¿›è¡Œäº†æˆªæ–­ï¼š
- ç±»çš„ docstringï¼šåªæ˜¾ç¤ºå‰ 3 è¡Œ
- `__init__` æ–¹æ³•ï¼šåªæ˜¾ç¤ºç¬¬ 1 è¡Œ
- æ™®é€šæ–¹æ³•ï¼šåªæ˜¾ç¤ºç¬¬ 1 è¡Œ
- é¡¶çº§å‡½æ•°ï¼šåªæ˜¾ç¤ºç¬¬ 1 è¡Œ

è¿™å¯¼è‡´**å¤§é‡é‡è¦æ–‡æ¡£ä¿¡æ¯ä¸¢å¤±**ï¼

#### è§£å†³æ–¹æ¡ˆ

##### 1. ç±»çš„ docstring - **å®Œæ•´æ˜¾ç¤º**
```python
# ä¹‹å‰ï¼šåªæ˜¾ç¤ºå‰3è¡Œ
docstring_lines = cls["docstring"].split("\n")[:3]

# ç°åœ¨ï¼šæ˜¾ç¤ºæ‰€æœ‰è¡Œ
docstring_lines = cls["docstring"].split("\n")
```

##### 2. `__init__` æ–¹æ³•çš„ docstring - **å®Œæ•´æ˜¾ç¤º**
```markdown
**ğŸ”§ Constructor (`__init__`):**
- `def __init__(...)`
  - **Docstring:**
  ```
  å®Œæ•´çš„æ–‡æ¡£å­—ç¬¦ä¸²
  åŒ…æ‹¬æ‰€æœ‰è¡Œ
  åŒ…æ‹¬ç¤ºä¾‹ä»£ç 
  åŒ…æ‹¬æ³¨æ„äº‹é¡¹
  ```
  - **Parameters:**
    - ...
```

##### 3. æ™®é€šæ–¹æ³•çš„ docstring - **æ™ºèƒ½æ˜¾ç¤º**
- å•è¡Œæ–‡æ¡£ï¼šä¿æŒç®€æ´ `*ç®€çŸ­æè¿°*`
- å¤šè¡Œæ–‡æ¡£ï¼šä½¿ç”¨ä»£ç å—æ ¼å¼ï¼Œå®Œæ•´æ˜¾ç¤º

##### 4. é¡¶çº§å‡½æ•°çš„ docstring - **æ™ºèƒ½æ˜¾ç¤º**
- ä¸æ™®é€šæ–¹æ³•ç›¸åŒçš„é€»è¾‘

#### æ•ˆæœå¯¹æ¯”

**ä¿®æ”¹å‰** âŒ
```markdown
**Docstring:**
```
funboostæå…¶é‡è§†ä»£ç èƒ½åœ¨pycharmä¸‹è‡ªåŠ¨è¡¥å…¨ã€‚
è¿™ç§__call__å†™æ³•åœ¨pycahrmä¸‹ ä¸ä»…èƒ½è¡¥å…¨æ¶ˆè´¹å‡½æ•°çš„ push consumeç­‰æ–¹æ³•...
...  ğŸ‘ˆ åé¢çš„é‡è¦ä¿¡æ¯éƒ½è¢«æˆªæ–­äº†ï¼
```

**ğŸ”§ Constructor (`__init__`):**
- `def __init__(...)`
  - *@boost è¿™æ˜¯funboostæ¡†æ¶æœ€é‡è¦çš„ä¸€ä¸ªå‡½æ•°*  ğŸ‘ˆ åªæœ‰ç¬¬ä¸€è¡Œ
```

**ä¿®æ”¹å** âœ…
```markdown
**Docstring:**
```
funboostæå…¶é‡è§†ä»£ç èƒ½åœ¨pycharmä¸‹è‡ªåŠ¨è¡¥å…¨ã€‚å…ƒç¼–ç¨‹ç»å¸¸é€ æˆåœ¨pycharmä¸‹ä»£ç æ— æ³•è‡ªåŠ¨è¡¥å…¨æç¤ºï¼Œä¸»è¦æ˜¯å®ç°ä»£ç è¡¥å…¨éš¾ã€‚
è¿™ç§__call__å†™æ³•åœ¨pycahrmä¸‹ ä¸ä»…èƒ½è¡¥å…¨æ¶ˆè´¹å‡½æ•°çš„ push consumeç­‰æ–¹æ³•ï¼Œä¹Ÿèƒ½è¡¥å…¨å‡½æ•°æœ¬èº«çš„å…¥å‚ï¼Œä¸€ä¸¾ä¸¤å¾—ã€‚ä»£ç èƒ½è‡ªåŠ¨è¡¥å…¨å¾ˆé‡è¦ã€‚
ä¸€ä¸ªå‡½æ•°funè¢« boostè£…é¥°å™¨è£…é¥°åï¼Œ isinstance(fun,Booster) ä¸ºTrue.

pydatinc pycharmç¼–ç¨‹ä»£ç è¡¥å…¨,è¯·å®‰è£… pydanticæ’ä»¶, åœ¨pycharmçš„  file -> settings -> Plugins -> è¾“å…¥ pydantic æœç´¢,ç‚¹å‡»å®‰è£… pydantic æ’ä»¶.

Booster æ˜¯æŠŠConsumer å’Œ Publisherçš„æ–¹æ³•é›†ä¸ºä¸€ä½“ã€‚
```
ğŸ‘† æ‰€æœ‰ä¿¡æ¯éƒ½å®Œæ•´ä¿ç•™ï¼

**ğŸ”§ Constructor (`__init__`):**
- `def __init__(queue_name: typing.Union[BoosterParams, str] = None, **kwargs)`
  - **Docstring:**
  ```
  @boost è¿™æ˜¯funboostæ¡†æ¶æœ€é‡è¦çš„ä¸€ä¸ªå‡½æ•°ï¼Œå¿…é¡»çœ‹æ‡‚BoosterParamsé‡Œé¢çš„å…¥å‚æœ‰å“ªäº›ã€‚
  pydatinc pycharmç¼–ç¨‹ä»£ç è¡¥å…¨,è¯·å®‰è£… pydanticæ’ä»¶...
  
  å¼ºçƒˆå»ºè®®æ‰€æœ‰å…¥å‚æ”¾åœ¨ BoosterParams() ä¸­...
  
  ```python
  # ç¤ºä¾‹ä»£ç 
  @boost(BoosterParams(queue_name='queue_test_f01', qps=0.2, ))
  def f(a, b):
      print(a + b)
  ```
  
  ä»¥ä¸Š4ç§å†™æ³•ç­‰æ•ˆã€‚
  ```
  ğŸ‘† åŒ…æ‹¬ç¤ºä¾‹ä»£ç åœ¨å†…çš„æ‰€æœ‰æ–‡æ¡£éƒ½å®Œæ•´æ˜¾ç¤ºï¼
  - **Parameters:**
    - `queue_name: typing.Union[BoosterParams, str] = None`
    - `**kwargs`
```

---

## ğŸ¯ ä¸ºä»€ä¹ˆè¿™ä¸¤ä¸ªåŠŸèƒ½éå¸¸é‡è¦ï¼Ÿ

### å¯¹å¼€å‘è€…çš„ä»·å€¼
1. **å¿«é€Ÿç†è§£ç±»çš„ä½¿ç”¨æ–¹å¼** - `__init__` å‚æ•°ä¸€ç›®äº†ç„¶
2. **å®Œæ•´çš„æ–‡æ¡£ä¿¡æ¯** - ä¸å†é”™è¿‡é‡è¦çš„ä½¿ç”¨è¯´æ˜å’Œç¤ºä¾‹
3. **æ›´å¥½çš„ä»£ç å®¡æŸ¥** - å®Œæ•´çš„ä¸Šä¸‹æ–‡ä¿¡æ¯
4. **æ–°äººå‹å¥½** - è¯¦ç»†çš„æ–‡æ¡£å¸®åŠ©å¿«é€Ÿä¸Šæ‰‹

### å¯¹ AI å¤§æ¨¡å‹çš„ä»·å€¼
1. **å‡†ç¡®çš„ä»£ç ç”Ÿæˆ** - çŸ¥é“å¦‚ä½•æ­£ç¡®å®ä¾‹åŒ–ç±»
2. **å‡å°‘å¹»è§‰** - å®Œæ•´çš„æ–‡æ¡£ä¿¡æ¯å‡å°‘ AI çš„çŒœæµ‹
3. **ç†è§£é¡¹ç›®æ¶æ„** - ä»æ„é€ å‡½æ•°å‚æ•°ç†è§£ç±»çš„ä¾èµ–å…³ç³»
4. **å®Œæ•´çš„ç¤ºä¾‹ä»£ç ** - å­¦ä¹ é¡¹ç›®çš„æœ€ä½³å®è·µ

### ç‰¹åˆ«é€‚åˆçš„é¡¹ç›®ç±»å‹
- âœ… **æ¡†æ¶ç±»é¡¹ç›®**ï¼šå¦‚ funboostã€FastAPI ç­‰
- âœ… **åº“é¡¹ç›®**ï¼šæœ‰è¯¦ç»†çš„ API æ–‡æ¡£
- âœ… **æ•™å­¦é¡¹ç›®**ï¼šä»£ç ä¸­åŒ…å«å¤§é‡æ³¨é‡Šå’Œè¯´æ˜
- âœ… **ä¼ä¸šé¡¹ç›®**ï¼šæœ‰è§„èŒƒçš„æ–‡æ¡£å­—ç¬¦ä¸²æ ‡å‡†

---

## ğŸ”§ æŠ€æœ¯å®ç°

### ä¿®æ”¹æ–‡ä»¶
`nb_ai_context/ai_md_generator.py`

### ä¿®æ”¹çš„æ–¹æ³•
`_format_py_metadata_as_markdown()`

### ä¿®æ”¹çš„è¡Œæ•°åŒºé—´
- 720-726 è¡Œï¼šç±»çš„ docstring
- 735-756 è¡Œï¼š`__init__` æ–¹æ³•çš„æå–å’Œæ˜¾ç¤º
- 759 è¡Œï¼šä»å…¬æœ‰æ–¹æ³•ä¸­æ’é™¤ `__init__`
- 773-785 è¡Œï¼šæ™®é€šæ–¹æ³•çš„ docstring
- 819-833 è¡Œï¼šé¡¶çº§å‡½æ•°çš„ docstring

---

## âœ… å…¼å®¹æ€§ä¿è¯

- âœ… **å®Œå…¨å‘åå…¼å®¹** - ä¸å½±å“ç°æœ‰åŠŸèƒ½
- âœ… **ä¼˜é›…é™çº§** - å¦‚æœç±»æ²¡æœ‰ `__init__`ï¼Œä¸æ˜¾ç¤ºæ„é€ å™¨éƒ¨åˆ†
- âœ… **æ™ºèƒ½æ ¼å¼åŒ–** - å•è¡Œ/å¤šè¡Œæ–‡æ¡£è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„æ˜¾ç¤ºæ ¼å¼
- âœ… **æ— ç ´åæ€§** - ä¸æ”¹å˜å…¶ä»–éƒ¨åˆ†çš„è¡Œä¸º

---

## ğŸ“Š å®é™…åº”ç”¨åœºæ™¯

### åœºæ™¯ 1ï¼šç†è§£æ¡†æ¶çš„æ ¸å¿ƒç±»
```python
# funboost çš„ Booster ç±»
# ç°åœ¨èƒ½çœ‹åˆ°å®Œæ•´çš„ 7 è¡Œç±»æ–‡æ¡£ + __init__ çš„è¯¦ç»†ä½¿ç”¨è¯´æ˜ï¼ˆåŒ…æ‹¬4ç§ç­‰æ•ˆå†™æ³•ï¼‰
```

### åœºæ™¯ 2ï¼šå­¦ä¹ æ­£ç¡®çš„ä½¿ç”¨æ–¹å¼
```python
# ä» __init__ å‚æ•°åˆ—è¡¨çœ‹å‡ºï¼š
# - å“ªäº›å‚æ•°æ˜¯å¿…éœ€çš„
# - å“ªäº›å‚æ•°æœ‰é»˜è®¤å€¼
# - å‚æ•°çš„ç±»å‹çº¦æŸ
# - ä»æ–‡æ¡£å­—ç¬¦ä¸²çœ‹åˆ°ç¤ºä¾‹ä»£ç 
```

### åœºæ™¯ 3ï¼šAI ä»£ç ç”Ÿæˆ
```python
# AI ç°åœ¨èƒ½çœ‹åˆ°å®Œæ•´ä¿¡æ¯ï¼š
# - æ„é€ å‡½æ•°çš„æ‰€æœ‰å‚æ•°
# - æ¯ä¸ªå‚æ•°çš„ç±»å‹å’Œé»˜è®¤å€¼
# - è¯¦ç»†çš„ä½¿ç”¨è¯´æ˜å’Œç¤ºä¾‹
# â†’ ç”Ÿæˆçš„ä»£ç æ›´å‡†ç¡®ï¼
```

---

## ğŸš€ ä½¿ç”¨æ–¹å¼ä¸å˜

```python
from nb_ai_context import AiMdGenerator

(
    AiMdGenerator("output.md")
    .set_project_propery(
        project_name="my_project",
        project_root=r"D:\codes\my_project"
    )
    .clear_text()
    .merge_from_dir(
        relative_dir_name="src",
        as_title="æºä»£ç ",
        should_include_suffixes=[".py"],
        include_ast_metadata=True,  # å¼€å¯ AST å…ƒæ•°æ®æå–
    )
)
```

ç”Ÿæˆçš„ Markdown æ–‡ä»¶ä¸­ï¼Œæ¯ä¸ªç±»çš„ `__init__` æ–¹æ³•éƒ½ä¼šè¢«çªå‡ºæ˜¾ç¤ºï¼Œæ‰€æœ‰æ–‡æ¡£å­—ç¬¦ä¸²éƒ½ä¼šå®Œæ•´ä¿ç•™ï¼

---

## ğŸ“ ç›¸å…³æ–‡æ¡£

- `tests/ai_docs/init_extraction_feature.md` - __init__ æå–åŠŸèƒ½è¯¦ç»†è¯´æ˜
- `tests/ai_docs/CHANGELOG_init_extraction.md` - __init__ åŠŸèƒ½æ›´æ–°æ—¥å¿—
- `tests/ai_docs/complete_docstring_extraction.md` - å®Œæ•´æ–‡æ¡£å­—ç¬¦ä¸²æå–è¯´æ˜
- `tests/ai_codes/demo_init_extraction.py` - æ¼”ç¤ºç¤ºä¾‹ä»£ç 

---

**nb_ai_context** - è®© AI è·å¾—å®Œæ•´ã€å‡†ç¡®çš„ä»£ç ä¸Šä¸‹æ–‡ ğŸš€

ç°åœ¨æ”¯æŒï¼š
- âœ… çªå‡ºæ˜¾ç¤º `__init__` æ„é€ æ–¹æ³•
- âœ… å®Œæ•´æ˜¾ç¤ºæ‰€æœ‰æ–‡æ¡£å­—ç¬¦ä¸²
- âœ… æ™ºèƒ½æ ¼å¼åŒ–è¾“å‡º
- âœ… å®Œç¾æ”¯æŒå¤æ‚é¡¹ç›®ï¼ˆå¦‚ funboostï¼‰
````

## Statistics

- Total Files: 16
- Total Characters: 97240
- Total Tokens: 0
`````

## tests/ai_codes/demo_init_extraction.py

```python
from typing import Optional, List, Dict
â‹®----
class DatabaseConnection:
    """æ•°æ®åº“è¿æ¥ç±»
    
    ç®¡ç†æ•°æ®åº“è¿æ¥æ± å’ŒæŸ¥è¯¢æ“ä½œ
    """
â‹®----
def __init__(
        self,
        host: str,
        port: int = 3306,
        username: str = "root",
        password: str = "",
        database: Optional[str] = None,
        charset: str = "utf8mb4",
        pool_size: int = 10,
        timeout: float = 30.0,
        ssl_config: Optional[Dict[str, str]] = None,
        auto_commit: bool = True,
        *args,
        **kwargs
    ):
    """åˆå§‹åŒ–æ•°æ®åº“è¿æ¥
        
        Args:
            host: æ•°æ®åº“ä¸»æœºåœ°å€
            port: æ•°æ®åº“ç«¯å£å·ï¼Œé»˜è®¤ 3306
            username: ç”¨æˆ·åï¼Œé»˜è®¤ root
            password: å¯†ç 
            database: æ•°æ®åº“åç§°ï¼ˆå¯é€‰ï¼‰
            charset: å­—ç¬¦é›†ï¼Œé»˜è®¤ utf8mb4
            pool_size: è¿æ¥æ± å¤§å°
            timeout: è¿æ¥è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
            ssl_config: SSL é…ç½®å­—å…¸
            auto_commit: æ˜¯å¦è‡ªåŠ¨æäº¤äº‹åŠ¡
            *args: é¢å¤–çš„ä½ç½®å‚æ•°
            **kwargs: é¢å¤–çš„å…³é”®å­—å‚æ•°
        """
â‹®----
def connect(self) -> bool:
    """å»ºç«‹æ•°æ®åº“è¿æ¥"""
â‹®----
def execute(self, query: str, params: Optional[tuple] = None) -> List[Dict]:
    """æ‰§è¡Œ SQL æŸ¥è¯¢"""
â‹®----
def close(self):
    """å…³é—­æ•°æ®åº“è¿æ¥"""
â‹®----
@property
â‹®----
@property
    def is_connected(self) -> bool:
    """æ£€æŸ¥æ˜¯å¦å·²è¿æ¥"""
â‹®----
class SimpleLogger:
    """ç®€å•çš„æ—¥å¿—ç±»ï¼ˆæ²¡æœ‰ __init__ å‚æ•°ï¼‰"""
â‹®----
def log(self, message: str):
    """è®°å½•æ—¥å¿—"""
â‹®----
def error(self, message: str):
    """è®°å½•é”™è¯¯"""
â‹®----
from nb_ai_context import AiMdGenerator
from nb_path import NbPath
```

## tests/ai_codes/test_file_content_backquotes.py

```python
import sys
import os
â‹®----
from nb_ai_context.ai_md_generator import AiMdGenerator, FILE_CONTENT_BACKQUOTES
â‹®----
def test_file_content_backquotes():
    """æµ‹è¯• FILE_CONTENT_BACKQUOTES æ˜¯å¦æ­£ç¡®å®šä¹‰"""
â‹®----
def test_markdown_generation():
    """æµ‹è¯•ç”Ÿæˆçš„ Markdown æ˜¯å¦ä½¿ç”¨äº† FILE_CONTENT_BACKQUOTES"""
```

## tests/ai_codes/test_init_extraction.py

```python
from nb_ai_context import AiMdGenerator
from nb_path import NbPath
import tempfile
import os
â‹®----
test_code = '''
"""æµ‹è¯•æ¨¡å—"""
from typing import Optional, List


class UserService:
    """ç”¨æˆ·æœåŠ¡ç±»
    
    è¿™æ˜¯ä¸€ä¸ªå¤„ç†ç”¨æˆ·ç›¸å…³ä¸šåŠ¡çš„æœåŠ¡ç±»
    """
    
    def __init__(
        self, 
        database_url: str,
        timeout: int = 30,
        max_connections: int = 10,
        enable_cache: bool = True,
        allowed_domains: Optional[List[str]] = None,
        **kwargs
    ):
        """åˆå§‹åŒ–ç”¨æˆ·æœåŠ¡
        
        Args:
            database_url: æ•°æ®åº“è¿æ¥URL
            timeout: è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
            max_connections: æœ€å¤§è¿æ¥æ•°
            enable_cache: æ˜¯å¦å¯ç”¨ç¼“å­˜
            allowed_domains: å…è®¸çš„åŸŸååˆ—è¡¨
        """
        self.database_url = database_url
        self.timeout = timeout
        self.max_connections = max_connections
        self.enable_cache = enable_cache
        self.allowed_domains = allowed_domains or []
    
    def get_user(self, user_id: int) -> dict:
        """è·å–ç”¨æˆ·ä¿¡æ¯"""
        pass
    
    def create_user(self, name: str, email: str) -> bool:
        """åˆ›å»ºæ–°ç”¨æˆ·"""
        pass
    
    @property
    def connection_count(self) -> int:
        """å½“å‰è¿æ¥æ•°"""
        return 0


class SimpleClass:
    """ä¸€ä¸ªæ²¡æœ‰ __init__ æ–¹æ³•çš„ç®€å•ç±»"""
    
    def do_something(self):
        """åšä¸€äº›äº‹æƒ…"""
        pass
'''
â‹®----
def test_init_extraction():
    """æµ‹è¯• __init__ æ–¹æ³•æå–"""
```

## tests/ai_docs/CHANGELOG_init_extraction.md

````markdown
# æ›´æ–°æ—¥å¿— - __init__ æ–¹æ³•å‚æ•°æå–åŠŸèƒ½

## ğŸ“… æ›´æ–°æ—¶é—´
2025-11-21

## ğŸ¯ æ›´æ–°å†…å®¹

### æ–°å¢åŠŸèƒ½ï¼šçªå‡ºæ˜¾ç¤ºç±»çš„ `__init__` æ„é€ æ–¹æ³•

åœ¨ `AiMdGenerator` ç”Ÿæˆçš„ Python æ–‡ä»¶ AST å…ƒæ•°æ®ä¸­ï¼Œç±»çš„ `__init__` æ–¹æ³•ç°åœ¨ä¼šè¢«**å•ç‹¬æå–å¹¶è¯¦ç»†å±•ç¤º**ã€‚

## ğŸ”§ æŠ€æœ¯ä¿®æ”¹

### ä¿®æ”¹æ–‡ä»¶
- `nb_ai_context/ai_md_generator.py`

### ä¿®æ”¹ä½ç½®
- æ–¹æ³•ï¼š`_format_py_metadata_as_markdown`
- è¡Œæ•°ï¼šçº¦ 730-760 è¡Œ

### ä¿®æ”¹å†…å®¹

#### 1. æŸ¥æ‰¾ __init__ æ–¹æ³•
```python
# é¦–å…ˆå•ç‹¬æ˜¾ç¤º __init__ æ–¹æ³•ï¼ˆéå¸¸é‡è¦ï¼‰
init_method = None
for method in cls["methods"]:
    if method["name"] == "__init__":
        init_method = method
        break
```

#### 2. å•ç‹¬æ˜¾ç¤ºæ„é€ å™¨ä¿¡æ¯
```python
if init_method:
    lines.append("**ğŸ”§ Constructor (`__init__`):**")
    params_str = self._format_parameters(init_method["parameters"])
    lines.append(f"- `def __init__({params_str})`")
    
    # æ˜¾ç¤º __init__ çš„æ–‡æ¡£å­—ç¬¦ä¸²
    if init_method["docstring"]:
        first_line = init_method["docstring"].split("\n")[0].strip()
        if first_line:
            lines.append(f"  - *{first_line}*")
    
    # æ˜¾ç¤ºæ¯ä¸ªå‚æ•°çš„è¯¦ç»†ä¿¡æ¯
    if init_method["parameters"]:
        lines.append("  - **Parameters:**")
        for param in init_method["parameters"]:
            param_name = param["name"]
            param_type = f": {param['type']}" if param["type"] else ""
            param_default = f" = {param['default']}" if param["default"] else ""
            lines.append(f"    - `{param_name}{param_type}{param_default}`")
    lines.append("")
```

#### 3. ä»å…¬æœ‰æ–¹æ³•åˆ—è¡¨ä¸­æ’é™¤ __init__
```python
# å…¬æœ‰æ–¹æ³•ï¼ˆæ’é™¤ __init__ï¼‰
public_methods = [m for m in cls["methods"] if m["is_public"] and m["name"] != "__init__"]
```

## ğŸ“Š è¾“å‡ºæ ¼å¼ç¤ºä¾‹

### ä¿®æ”¹å‰
```markdown
**Public Methods (5):**
- `def __init__(database_url: str, timeout: int = 30)`
- `def get_user(user_id: int) -> dict`
- `def create_user(name: str, email: str) -> bool`
- `def update_user(user_id: int) -> bool`
- `def delete_user(user_id: int) -> bool`
```

### ä¿®æ”¹å
```markdown
**ğŸ”§ Constructor (`__init__`):**
- `def __init__(database_url: str, timeout: int = 30, max_connections: int = 10, enable_cache: bool = True, **kwargs)`
  - *åˆå§‹åŒ–æ•°æ®åº“æœåŠ¡*
  - **Parameters:**
    - `database_url: str`
    - `timeout: int = 30`
    - `max_connections: int = 10`
    - `enable_cache: bool = True`
    - `**kwargs`

**Public Methods (4):**
- `def get_user(user_id: int) -> dict`
  - *è·å–ç”¨æˆ·ä¿¡æ¯*
- `def create_user(name: str, email: str) -> bool`
  - *åˆ›å»ºæ–°ç”¨æˆ·*
- `def update_user(user_id: int) -> bool`
  - *æ›´æ–°ç”¨æˆ·ä¿¡æ¯*
- `def delete_user(user_id: int) -> bool`
  - *åˆ é™¤ç”¨æˆ·*
```

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### æ”¯æŒçš„å‚æ•°ç±»å‹
- âœ… ä½ç½®å‚æ•°ï¼š`param`
- âœ… å¸¦ç±»å‹æ³¨è§£çš„å‚æ•°ï¼š`param: str`
- âœ… å¸¦é»˜è®¤å€¼çš„å‚æ•°ï¼š`param: int = 10`
- âœ… å¯é€‰ç±»å‹ï¼š`param: Optional[str] = None`
- âœ… å¤æ‚ç±»å‹ï¼š`param: Optional[Dict[str, List[int]]] = None`
- âœ… å¯å˜ä½ç½®å‚æ•°ï¼š`*args`
- âœ… å¯å˜å…³é”®å­—å‚æ•°ï¼š`**kwargs`

### æ˜¾ç¤ºå†…å®¹
1. **å®Œæ•´æ–¹æ³•ç­¾å** - ä¸€è¡Œæ˜¾ç¤ºæ‰€æœ‰å‚æ•°
2. **æ–‡æ¡£å­—ç¬¦ä¸²** - æ˜¾ç¤º docstring çš„ç¬¬ä¸€è¡Œ
3. **å‚æ•°è¯¦ç»†åˆ—è¡¨** - æ¯ä¸ªå‚æ•°å•ç‹¬ä¸€è¡Œï¼ŒåŒ…å«ï¼š
   - å‚æ•°å
   - ç±»å‹æ³¨è§£ï¼ˆå¦‚æœæœ‰ï¼‰
   - é»˜è®¤å€¼ï¼ˆå¦‚æœæœ‰ï¼‰

## ğŸ’¡ ä¸ºä»€ä¹ˆè¿™ä¸ªæ”¹è¿›å¾ˆé‡è¦ï¼Ÿ

### å¯¹å¼€å‘è€…çš„ä»·å€¼
1. **å¿«é€Ÿç†è§£** - ä¸€çœ¼çœ‹å‡ºå¦‚ä½•åˆ›å»ºç±»çš„å®ä¾‹
2. **å‡†ç¡®ä½¿ç”¨** - çŸ¥é“å“ªäº›å‚æ•°å¿…éœ€ï¼Œå“ªäº›å¯é€‰
3. **ç±»å‹å®‰å…¨** - æ¸…æ¥šæ¯ä¸ªå‚æ•°çš„ç±»å‹çº¦æŸ
4. **é»˜è®¤é…ç½®** - äº†è§£é»˜è®¤å€¼ï¼Œå‡å°‘ä¸å¿…è¦çš„å‚æ•°ä¼ é€’

### å¯¹ AI å¤§æ¨¡å‹çš„ä»·å€¼
1. **æ›´å¥½çš„ä»£ç ç”Ÿæˆ** - AI èƒ½å‡†ç¡®ç”Ÿæˆç±»çš„å®ä¾‹åŒ–ä»£ç 
2. **å‡å°‘å¹»è§‰** - æ˜ç¡®çš„å‚æ•°ä¿¡æ¯å‡å°‘ AI çš„çŒœæµ‹
3. **ç†è§£é¡¹ç›®æ¶æ„** - æ„é€ å‡½æ•°å‚æ•°åæ˜ äº†ç±»çš„ä¾èµ–å…³ç³»
4. **æå‡å‡†ç¡®æ€§** - å®Œæ•´çš„ç±»å‹ä¿¡æ¯å¸®åŠ© AI ç†è§£ä»£ç æ„å›¾

## ğŸ”„ å…¼å®¹æ€§è¯´æ˜

- âœ… **å‘åå…¼å®¹** - ä¸å½±å“ç°æœ‰åŠŸèƒ½
- âœ… **ä¼˜é›…é™çº§** - å¦‚æœç±»æ²¡æœ‰ `__init__` æ–¹æ³•ï¼Œä¸ä¼šæ˜¾ç¤ºæ„é€ å™¨éƒ¨åˆ†
- âœ… **æ— ç ´åæ€§** - ä¸æ”¹å˜å…¶ä»–æ–¹æ³•çš„æ˜¾ç¤ºæ–¹å¼
- âœ… **é€‚ç”¨æ‰€æœ‰åœºæ™¯** - å¯¹æ‰€æœ‰ Python ç±»éƒ½ç”Ÿæ•ˆ

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹ä»£ç 
```python
from nb_ai_context import AiMdGenerator

(
    AiMdGenerator("output.md")
    .set_project_propery(
        project_name="my_project",
        project_root=r"D:\codes\my_project"
    )
    .clear_text()
    .merge_from_dir(
        relative_dir_name="src",
        as_title="æºä»£ç ",
        should_include_suffixes=[".py"],
        include_ast_metadata=True,  # å¼€å¯ AST å…ƒæ•°æ®æå–
    )
)
```

ç”Ÿæˆçš„ Markdown ä¸­ï¼Œæ¯ä¸ª Python ç±»çš„ `__init__` æ–¹æ³•éƒ½ä¼šè¢«ç‰¹åˆ«çªå‡ºæ˜¾ç¤ºã€‚

## ğŸ¯ å®é™…åº”ç”¨åœºæ™¯

### 1. API æ–‡æ¡£ç”Ÿæˆ
å¿«é€Ÿç”Ÿæˆç±»çš„æ„é€ å‡½æ•°æ–‡æ¡£ï¼Œæ–¹ä¾¿ç”¨æˆ·æŸ¥é˜…ã€‚

### 2. ä»£ç å®¡æŸ¥
å®¡æŸ¥è€…èƒ½å¿«é€Ÿäº†è§£ç±»çš„åˆå§‹åŒ–éœ€æ±‚å’Œä¾èµ–ã€‚

### 3. AI è¾…åŠ©ç¼–ç¨‹
AI èƒ½å‡†ç¡®ç†è§£å¦‚ä½•å®ä¾‹åŒ–ç±»ï¼Œç”Ÿæˆæ­£ç¡®çš„ä»£ç ã€‚

### 4. æ–°äººä¸Šæ‰‹
æ–°å›¢é˜Ÿæˆå‘˜èƒ½å¿«é€Ÿç†è§£é¡¹ç›®ä¸­å„ä¸ªç±»çš„ä½¿ç”¨æ–¹å¼ã€‚

### 5. é‡æ„å‚è€ƒ
é‡æ„æ—¶èƒ½æ¸…æ¥šçœ‹åˆ°ç±»çš„æ„é€ ä¾èµ–ï¼Œé¿å…é—æ¼ã€‚

## ğŸš€ ä¸‹ä¸€æ­¥è®¡åˆ’

å¯èƒ½çš„å¢å¼ºæ–¹å‘ï¼š
- [ ] æ”¯æŒæå– `@dataclass` çš„å­—æ®µä¿¡æ¯
- [ ] æ”¯æŒæå– `@attrs` è£…é¥°å™¨ç±»çš„å±æ€§
- [ ] æ”¯æŒæ˜¾ç¤º `__new__` æ–¹æ³•ï¼ˆå¦‚æœæœ‰ï¼‰
- [ ] æ”¯æŒæå–ç±»çš„ç»§æ‰¿é“¾ä¸­æ‰€æœ‰ `__init__` å‚æ•°

## ğŸ“ åé¦ˆ

å¦‚æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·è®¿é—®ï¼š
- GitHub Issues: https://github.com/ydf0509/nb_ai_context/issues

---

**nb_ai_context** - è®© AI çœŸæ­£ç†è§£ä½ çš„ä»£ç  ğŸš€
````

## tests/ai_docs/complete_docstring_extraction.md

````markdown
# å®Œæ•´æ–‡æ¡£å­—ç¬¦ä¸²æå–åŠŸèƒ½

## ğŸ“… æ›´æ–°æ—¶é—´
2025-11-21

## ğŸ¯ é—®é¢˜æè¿°

ä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼ŒAST å…ƒæ•°æ®æå–æ—¶å¯¹æ–‡æ¡£å­—ç¬¦ä¸²ï¼ˆdocstringï¼‰è¿›è¡Œäº†æˆªæ–­å¤„ç†ï¼š
- **ç±»çš„ docstring**ï¼šåªæ˜¾ç¤ºå‰ 3 è¡Œï¼Œåé¢ç”¨ `...` çœç•¥
- **`__init__` æ–¹æ³•çš„ docstring**ï¼šåªæ˜¾ç¤ºç¬¬ 1 è¡Œ
- **æ™®é€šæ–¹æ³•çš„ docstring**ï¼šåªæ˜¾ç¤ºç¬¬ 1 è¡Œ
- **é¡¶çº§å‡½æ•°çš„ docstring**ï¼šåªæ˜¾ç¤ºç¬¬ 1 è¡Œ

è¿™å¯¼è‡´å¾ˆå¤šé‡è¦çš„æ–‡æ¡£ä¿¡æ¯ä¸¢å¤±ï¼Œç‰¹åˆ«æ˜¯å¯¹äºåƒ funboost è¿™æ ·æœ‰è¯¦ç»†æ–‡æ¡£çš„é¡¹ç›®ã€‚

## âœ¨ è§£å†³æ–¹æ¡ˆ

ç°åœ¨æ‰€æœ‰æ–‡æ¡£å­—ç¬¦ä¸²éƒ½ä¼š**å®Œæ•´æ˜¾ç¤º**ï¼š

### 1. ç±»çš„ docstring - å®Œæ•´æ˜¾ç¤º

```python
# ä¿®æ”¹å‰
docstring_lines = cls["docstring"].split("\n")[:3]  # åªå–å‰3è¡Œ
if len(cls["docstring"].split("\n")) > 3:
    lines.append("...")

# ä¿®æ”¹å
docstring_lines = cls["docstring"].split("\n")  # æ˜¾ç¤ºæ‰€æœ‰è¡Œ
```

### 2. `__init__` æ–¹æ³•çš„ docstring - å®Œæ•´æ˜¾ç¤º

```python
# ä¿®æ”¹å‰
first_line = init_method["docstring"].split("\n")[0].strip()
if first_line:
    lines.append(f"  - *{first_line}*")

# ä¿®æ”¹å
if init_method["docstring"]:
    lines.append("  - **Docstring:**")
    lines.append("  ```")
    for doc_line in init_method["docstring"].split("\n"):
        lines.append(f"  {doc_line}")
    lines.append("  ```")
```

### 3. æ™®é€šæ–¹æ³•çš„ docstring - æ™ºèƒ½æ˜¾ç¤º

```python
# æ–°é€»è¾‘ï¼šæ ¹æ®è¡Œæ•°æ™ºèƒ½é€‰æ‹©æ ¼å¼
if method["docstring"]:
    docstring_lines = method["docstring"].split("\n")
    if len(docstring_lines) == 1:
        # å•è¡Œæ–‡æ¡£ï¼šç®€çŸ­æ ¼å¼
        lines.append(f"  - *{method['docstring'].strip()}*")
    else:
        # å¤šè¡Œæ–‡æ¡£ï¼šä»£ç å—æ ¼å¼
        lines.append("  - **Docstring:**")
        lines.append("  ```")
        for doc_line in docstring_lines:
            lines.append(f"  {doc_line}")
        lines.append("  ```")
```

### 4. é¡¶çº§å‡½æ•°çš„ docstring - æ™ºèƒ½æ˜¾ç¤º

ä¸æ™®é€šæ–¹æ³•ç›¸åŒçš„é€»è¾‘ã€‚

## ğŸ“Š æ•ˆæœå¯¹æ¯”

### ä¿®æ”¹å‰ âŒ

```markdown
**Docstring:**
```
funboostæå…¶é‡è§†ä»£ç èƒ½åœ¨pycharmä¸‹è‡ªåŠ¨è¡¥å…¨ã€‚å…ƒç¼–ç¨‹ç»å¸¸é€ æˆåœ¨pycharmä¸‹ä»£ç æ— æ³•è‡ªåŠ¨è¡¥å…¨æç¤ºï¼Œä¸»è¦æ˜¯å®ç°ä»£ç è¡¥å…¨éš¾ã€‚
è¿™ç§__call__å†™æ³•åœ¨pycahrmä¸‹ ä¸ä»…èƒ½è¡¥å…¨æ¶ˆè´¹å‡½æ•°çš„ push consumeç­‰æ–¹æ³•ï¼Œä¹Ÿèƒ½è¡¥å…¨å‡½æ•°æœ¬èº«çš„å…¥å‚ï¼Œä¸€ä¸¾ä¸¤å¾—ã€‚ä»£ç èƒ½è‡ªåŠ¨è¡¥å…¨å¾ˆé‡è¦ã€‚
...
```

**ğŸ”§ Constructor (`__init__`):**
- `def __init__(self, queue_name: typing.Union[BoosterParams, str] = None, **kwargs)`
  - *@boost è¿™æ˜¯funboostæ¡†æ¶æœ€é‡è¦çš„ä¸€ä¸ªå‡½æ•°ï¼Œå¿…é¡»çœ‹æ‡‚BoosterParamsé‡Œé¢çš„å…¥å‚æœ‰å“ªäº›ã€‚*
```

### ä¿®æ”¹å âœ…

```markdown
**Docstring:**
```
funboostæå…¶é‡è§†ä»£ç èƒ½åœ¨pycharmä¸‹è‡ªåŠ¨è¡¥å…¨ã€‚å…ƒç¼–ç¨‹ç»å¸¸é€ æˆåœ¨pycharmä¸‹ä»£ç æ— æ³•è‡ªåŠ¨è¡¥å…¨æç¤ºï¼Œä¸»è¦æ˜¯å®ç°ä»£ç è¡¥å…¨éš¾ã€‚
è¿™ç§__call__å†™æ³•åœ¨pycahrmä¸‹ ä¸ä»…èƒ½è¡¥å…¨æ¶ˆè´¹å‡½æ•°çš„ push consumeç­‰æ–¹æ³•ï¼Œä¹Ÿèƒ½è¡¥å…¨å‡½æ•°æœ¬èº«çš„å…¥å‚ï¼Œä¸€ä¸¾ä¸¤å¾—ã€‚ä»£ç èƒ½è‡ªåŠ¨è¡¥å…¨å¾ˆé‡è¦ã€‚
ä¸€ä¸ªå‡½æ•°funè¢« boostè£…é¥°å™¨è£…é¥°åï¼Œ isinstance(fun,Booster) ä¸ºTrue.

pydatinc pycharmç¼–ç¨‹ä»£ç è¡¥å…¨,è¯·å®‰è£… pydanticæ’ä»¶, åœ¨pycharmçš„  file -> settings -> Plugins -> è¾“å…¥ pydantic æœç´¢,ç‚¹å‡»å®‰è£… pydantic æ’ä»¶.

Booster æ˜¯æŠŠConsumer å’Œ Publisherçš„æ–¹æ³•é›†ä¸ºä¸€ä½“ã€‚
```

**ğŸ”§ Constructor (`__init__`):**
- `def __init__(self, queue_name: typing.Union[BoosterParams, str] = None, **kwargs)`
  - **Docstring:**
  ```
  @boost è¿™æ˜¯funboostæ¡†æ¶æœ€é‡è¦çš„ä¸€ä¸ªå‡½æ•°ï¼Œå¿…é¡»çœ‹æ‡‚BoosterParamsé‡Œé¢çš„å…¥å‚æœ‰å“ªäº›ã€‚
  pydatinc pycharmç¼–ç¨‹ä»£ç è¡¥å…¨,è¯·å®‰è£… pydanticæ’ä»¶, åœ¨pycharmçš„  file -> settings -> Plugins -> è¾“å…¥ pydantic æœç´¢,ç‚¹å‡»å®‰è£… pydantic æ’ä»¶.
  (é«˜ç‰ˆæœ¬çš„pycharm pydanticæ˜¯å†…ç½®æ”¯æŒä»£ç è¡¥å…¨çš„,ç”±æ­¤å¯è§,pydanticå¤ªå¥½äº†,pycharmå®˜æ–¹éƒ½æ¥æ”¯æŒ)
  
  å¼ºçƒˆå»ºè®®æ‰€æœ‰å…¥å‚æ”¾åœ¨ BoosterParams() ä¸­,ä¸è¦ç›´æ¥åœ¨BoosterParamsä¹‹å¤–ä¼ å‚.ç°åœ¨æ˜¯å…¼å®¹è€çš„ç›´æ¥åœ¨@boostä¸­ä¼ å‚æ–¹å¼.
  å»ºè®®ä¸è¦ç»™ç¬¬ä¸€ä¸ªå…¥å‚queue_nameä¼ é€’å­—ç¬¦ä¸²ï¼Œè€Œæ˜¯æ°¸è¿œä¼ é€’BoosterParamsç±»å‹ï¼Œ ä¾‹å¦‚ @boost(BoosterParams(queue_name='queue_test_f01', qps=0.2, ))
  
  ```python
  # @boost('queue_test_f01', qps=0.2, ) # è€çš„å…¥å‚æ–¹å¼
  @boost(BoosterParams(queue_name='queue_test_f01', qps=0.2, )) # æ–°çš„å…¥å‚æ–¹å¼
  def f(a, b):
      print(a + b)
  
  for i in range(10, 20):
      f.pub(dict(a=i, b=i * 2))
      f.push(i, i * 2)
  f.consume()
  ```
  
  @boost('queue_test_f01', qps=0.2, ) 
  @boost(BoosterParams(queue_name='queue_test_f01', qps=0.2, ))
  @Booster(BoosterParams(queue_name='queue_test_f01', qps=0.2, ))
  @BoosterParams(queue_name='queue_test_f01', qps=0.2, )
  ä»¥ä¸Š4ç§å†™æ³•ç­‰æ•ˆã€‚
  ```
  - **Parameters:**
    - `self`
    - `queue_name: typing.Union[BoosterParams, str] = None`
    - `**kwargs`
```

## ğŸ”§ æŠ€æœ¯å®ç°

### ä¿®æ”¹æ–‡ä»¶
- `nb_ai_context/ai_md_generator.py`

### ä¿®æ”¹çš„ä½ç½®

1. **ç±»çš„ docstring**ï¼ˆçº¦ 720-728 è¡Œï¼‰
   - ç§»é™¤äº† `[:3]` åˆ‡ç‰‡
   - ç§»é™¤äº† `...` çœç•¥æ ‡è®°

2. **`__init__` æ–¹æ³•çš„ docstring**ï¼ˆçº¦ 738-752 è¡Œï¼‰
   - ä»å•è¡Œæ˜¾ç¤ºæ”¹ä¸ºå®Œæ•´å¤šè¡Œä»£ç å—æ˜¾ç¤º
   - æ·»åŠ  "Docstring:" æ ‡é¢˜
   - ä¿æŒé€‚å½“çš„ç¼©è¿›

3. **æ™®é€šæ–¹æ³•çš„ docstring**ï¼ˆçº¦ 771-783 è¡Œï¼‰
   - æ·»åŠ æ™ºèƒ½åˆ¤æ–­é€»è¾‘
   - å•è¡Œï¼šç®€çŸ­æ ¼å¼ `*text*`
   - å¤šè¡Œï¼šä»£ç å—æ ¼å¼

4. **é¡¶çº§å‡½æ•°çš„ docstring**ï¼ˆçº¦ 819-833 è¡Œï¼‰
   - ä¸æ™®é€šæ–¹æ³•ç›¸åŒçš„æ™ºèƒ½åˆ¤æ–­é€»è¾‘

## âœ… ä¼˜åŠ¿

### 1. ä¿¡æ¯å®Œæ•´æ€§
- âœ… ä¸å†æˆªæ–­é‡è¦çš„æ–‡æ¡£ä¿¡æ¯
- âœ… å®Œæ•´ä¿ç•™ä½œè€…çš„æ„å›¾å’Œè¯´æ˜
- âœ… ç‰¹åˆ«é€‚åˆæœ‰è¯¦ç»†æ–‡æ¡£çš„é¡¹ç›®ï¼ˆå¦‚ funboostï¼‰

### 2. AI ç†è§£èƒ½åŠ›æå‡
- âœ… AI èƒ½è·å–å®Œæ•´çš„ä½¿ç”¨è¯´æ˜
- âœ… èƒ½çœ‹åˆ°å®Œæ•´çš„ç¤ºä¾‹ä»£ç 
- âœ… ç†è§£å¤šç§ä½¿ç”¨æ–¹å¼å’Œæ³¨æ„äº‹é¡¹

### 3. æ ¼å¼ä¼˜åŒ–
- âœ… å•è¡Œæ–‡æ¡£ï¼šä¿æŒç®€æ´ï¼Œç”¨æ–œä½“æ˜¾ç¤º
- âœ… å¤šè¡Œæ–‡æ¡£ï¼šä½¿ç”¨ä»£ç å—ï¼Œä¿æŒæ ¼å¼
- âœ… é€‚å½“çš„ç¼©è¿›ï¼Œä¿æŒå±‚æ¬¡ç»“æ„æ¸…æ™°

## ğŸ“ å®é™…æ¡ˆä¾‹

### æ¡ˆä¾‹ï¼šfunboost çš„ Booster ç±»

åŸå§‹ä»£ç ï¼š
```python
class Booster:
    """
    funboostæå…¶é‡è§†ä»£ç èƒ½åœ¨pycharmä¸‹è‡ªåŠ¨è¡¥å…¨ã€‚å…ƒç¼–ç¨‹ç»å¸¸é€ æˆåœ¨pycharmä¸‹ä»£ç æ— æ³•è‡ªåŠ¨è¡¥å…¨æç¤ºï¼Œä¸»è¦æ˜¯å®ç°ä»£ç è¡¥å…¨éš¾ã€‚
    è¿™ç§__call__å†™æ³•åœ¨pycahrmä¸‹ ä¸ä»…èƒ½è¡¥å…¨æ¶ˆè´¹å‡½æ•°çš„ push consumeç­‰æ–¹æ³•ï¼Œä¹Ÿèƒ½è¡¥å…¨å‡½æ•°æœ¬èº«çš„å…¥å‚ï¼Œä¸€ä¸¾ä¸¤å¾—ã€‚ä»£ç èƒ½è‡ªåŠ¨è¡¥å…¨å¾ˆé‡è¦ã€‚
    ä¸€ä¸ªå‡½æ•°funè¢« boostè£…é¥°å™¨è£…é¥°åï¼Œ isinstance(fun,Booster) ä¸ºTrue.

    pydatinc pycharmç¼–ç¨‹ä»£ç è¡¥å…¨,è¯·å®‰è£… pydanticæ’ä»¶, åœ¨pycharmçš„  file -> settings -> Plugins -> è¾“å…¥ pydantic æœç´¢,ç‚¹å‡»å®‰è£… pydantic æ’ä»¶.

    Booster æ˜¯æŠŠConsumer å’Œ Publisherçš„æ–¹æ³•é›†ä¸ºä¸€ä½“ã€‚
    """
    
    def __init__(self, queue_name: typing.Union[BoosterParams, str] = None, **kwargs):
        """
        @boost è¿™æ˜¯funboostæ¡†æ¶æœ€é‡è¦çš„ä¸€ä¸ªå‡½æ•°ï¼Œå¿…é¡»çœ‹æ‡‚BoosterParamsé‡Œé¢çš„å…¥å‚æœ‰å“ªäº›ã€‚
        pydatinc pycharmç¼–ç¨‹ä»£ç è¡¥å…¨,è¯·å®‰è£… pydanticæ’ä»¶...
        
        å¼ºçƒˆå»ºè®®æ‰€æœ‰å…¥å‚æ”¾åœ¨ BoosterParams() ä¸­...
        
        ```python
        # ç¤ºä¾‹ä»£ç 
        @boost(BoosterParams(queue_name='queue_test_f01', qps=0.2, ))
        def f(a, b):
            print(a + b)
        ```
        
        ä»¥ä¸Š4ç§å†™æ³•ç­‰æ•ˆã€‚
        """
        pass
```

ç°åœ¨ç”Ÿæˆçš„ AST å…ƒæ•°æ®ä¼š**å®Œæ•´æ˜¾ç¤º**ï¼š
- æ‰€æœ‰ 7 è¡Œçš„ç±»æ–‡æ¡£å­—ç¬¦ä¸²
- `__init__` æ–¹æ³•ä¸­åŒ…å«ç¤ºä¾‹ä»£ç çš„å®Œæ•´æ–‡æ¡£å­—ç¬¦ä¸²

## ğŸ¯ é€‚ç”¨åœºæ™¯

ç‰¹åˆ«é€‚åˆä»¥ä¸‹ç±»å‹çš„é¡¹ç›®ï¼š
1. **æ¡†æ¶ç±»é¡¹ç›®** - å¦‚ funboostã€FastAPI ç­‰ï¼Œéœ€è¦è¯¦ç»†çš„ä½¿ç”¨è¯´æ˜
2. **åº“é¡¹ç›®** - æœ‰è¯¦ç»†çš„ API æ–‡æ¡£å’Œç¤ºä¾‹
3. **æ•™å­¦é¡¹ç›®** - ä»£ç ä¸­åŒ…å«å¤§é‡æ³¨é‡Šå’Œè¯´æ˜
4. **ä¼ä¸šé¡¹ç›®** - æœ‰è§„èŒƒçš„æ–‡æ¡£å­—ç¬¦ä¸²æ ‡å‡†

## ğŸ”„ å…¼å®¹æ€§

- âœ… å®Œå…¨å‘åå…¼å®¹
- âœ… å•è¡Œæ–‡æ¡£å­—ç¬¦ä¸²ä¿æŒç®€æ´æ ¼å¼
- âœ… å¤šè¡Œæ–‡æ¡£å­—ç¬¦ä¸²ä½¿ç”¨ä»£ç å—æ ¼å¼
- âœ… ä¸å½±å“å…¶ä»–åŠŸèƒ½

## ğŸ’¡ æœ€ä½³å®è·µ

### ç¼–å†™æ–‡æ¡£å­—ç¬¦ä¸²æ—¶çš„å»ºè®®

1. **ç¬¬ä¸€è¡Œåº”è¯¥æ˜¯ç®€çŸ­çš„æ¦‚è¿°**
   ```python
   """ç®€çŸ­çš„åŠŸèƒ½æè¿°
   
   è¯¦ç»†çš„è¯´æ˜...
   """
   ```

2. **åŒ…å«ç¤ºä¾‹ä»£ç **
   ```python
   """åˆå§‹åŒ–é…ç½®
   
   Example:
       ```python
       config = Config(host="localhost", port=3306)
       ```
   """
   ```

3. **è¯´æ˜å‚æ•°å’Œè¿”å›å€¼**
   ```python
   """æ‰§è¡ŒæŸ¥è¯¢
   
   Args:
       query: SQL æŸ¥è¯¢è¯­å¥
       params: æŸ¥è¯¢å‚æ•°
       
   Returns:
       æŸ¥è¯¢ç»“æœåˆ—è¡¨
   """
   ```

ç°åœ¨è¿™äº›è¯¦ç»†çš„æ–‡æ¡£éƒ½ä¼šè¢«å®Œæ•´æå–åˆ° AI ä¸Šä¸‹æ–‡ä¸­ï¼

---

**nb_ai_context** - å®Œæ•´ã€å‡†ç¡®åœ°ä¸º AI æä¾›ä»£ç ä¸Šä¸‹æ–‡ ğŸš€
````

## tests/ai_docs/init_extraction_feature.md

````markdown
# __init__ æ–¹æ³•å‚æ•°æå–åŠŸèƒ½è¯´æ˜

## ğŸ¯ åŠŸèƒ½æè¿°

ç°åœ¨ `AiMdGenerator` åœ¨æå– Python ç±»çš„ AST å…ƒæ•°æ®æ—¶ï¼Œä¼š**å•ç‹¬çªå‡ºæ˜¾ç¤º**ç±»çš„ `__init__` æ„é€ æ–¹æ³•åŠå…¶æ‰€æœ‰å‚æ•°ä¿¡æ¯ã€‚

## âœ¨ ä¸ºä»€ä¹ˆè¿™å¾ˆé‡è¦ï¼Ÿ

ç±»çš„ `__init__` æ–¹æ³•å®šä¹‰äº†å¦‚ä½•åˆ›å»ºç±»çš„å®ä¾‹ï¼Œå…¶å‚æ•°åˆ—è¡¨æ˜¯ç†è§£å¦‚ä½•ä½¿ç”¨è¯¥ç±»çš„å…³é”®ï¼š

- âœ… çŸ¥é“éœ€è¦ä¼ é€’å“ªäº›å‚æ•°
- âœ… äº†è§£å‚æ•°çš„ç±»å‹æ³¨è§£
- âœ… æŸ¥çœ‹å“ªäº›å‚æ•°æœ‰é»˜è®¤å€¼
- âœ… å¿«é€Ÿç†è§£ç±»çš„åˆå§‹åŒ–é€»è¾‘

## ğŸ“Š ä¿®æ”¹å‰åå¯¹æ¯”

### ä¿®æ”¹å‰ âŒ

`__init__` æ–¹æ³•æ··åœ¨æ™®é€šçš„å…¬æœ‰æ–¹æ³•åˆ—è¡¨ä¸­ï¼Œä¸å¤Ÿçªå‡ºï¼š

```markdown
**Public Methods (5):**
- `def __init__(database_url: str, timeout: int = 30, max_connections: int = 10)`
- `def get_user(user_id: int) -> dict`
- `def create_user(name: str, email: str) -> bool`
- `def update_user(user_id: int, **kwargs) -> bool`
- `def delete_user(user_id: int) -> bool`
```

### ä¿®æ”¹å âœ…

`__init__` æ–¹æ³•è¢«å•ç‹¬æå–ï¼Œå¹¶è¯¦ç»†æ˜¾ç¤ºæ¯ä¸ªå‚æ•°ï¼š

```markdown
**ğŸ”§ Constructor (`__init__`):**
- `def __init__(database_url: str, timeout: int = 30, max_connections: int = 10, enable_cache: bool = True, allowed_domains: Optional[List[str]] = None, **kwargs)`
  - *åˆå§‹åŒ–ç”¨æˆ·æœåŠ¡*
  - **Parameters:**
    - `database_url: str`
    - `timeout: int = 30`
    - `max_connections: int = 10`
    - `enable_cache: bool = True`
    - `allowed_domains: Optional[List[str]] = None`
    - `**kwargs`

**Public Methods (4):**
- `def get_user(user_id: int) -> dict`
  - *è·å–ç”¨æˆ·ä¿¡æ¯*
- `def create_user(name: str, email: str) -> bool`
  - *åˆ›å»ºæ–°ç”¨æˆ·*
- `def update_user(user_id: int, **kwargs) -> bool`
  - *æ›´æ–°ç”¨æˆ·ä¿¡æ¯*
- `def delete_user(user_id: int) -> bool`
  - *åˆ é™¤ç”¨æˆ·*
```

## ğŸ”§ æŠ€æœ¯å®ç°

ä¿®æ”¹ä½ç½®ï¼š`nb_ai_context/ai_md_generator.py` çš„ `_format_py_metadata_as_markdown` æ–¹æ³•

### æ ¸å¿ƒé€»è¾‘

1. **æŸ¥æ‰¾ __init__ æ–¹æ³•**
   ```python
   init_method = None
   for method in cls["methods"]:
       if method["name"] == "__init__":
           init_method = method
           break
   ```

2. **å•ç‹¬æ˜¾ç¤ºæ„é€ å™¨**
   - ä½¿ç”¨ä¸“é—¨çš„æ ‡é¢˜ `ğŸ”§ Constructor (\`__init__\`):`
   - æ˜¾ç¤ºå®Œæ•´çš„æ–¹æ³•ç­¾å
   - æ˜¾ç¤ºæ–‡æ¡£å­—ç¬¦ä¸²
   - **é€ä¸ªåˆ—å‡ºæ¯ä¸ªå‚æ•°åŠå…¶ç±»å‹å’Œé»˜è®¤å€¼**

3. **ä»æ™®é€šæ–¹æ³•ä¸­æ’é™¤**
   ```python
   public_methods = [m for m in cls["methods"] if m["is_public"] and m["name"] != "__init__"]
   ```

## ğŸ“ å®Œæ•´ç¤ºä¾‹

å‡è®¾æœ‰ä»¥ä¸‹ Python ç±»ï¼š

```python
from typing import Optional, List

class UserService:
    """ç”¨æˆ·æœåŠ¡ç±»"""
    
    def __init__(
        self, 
        database_url: str,
        timeout: int = 30,
        max_connections: int = 10,
        enable_cache: bool = True,
        allowed_domains: Optional[List[str]] = None,
        **kwargs
    ):
        """åˆå§‹åŒ–ç”¨æˆ·æœåŠ¡
        
        Args:
            database_url: æ•°æ®åº“è¿æ¥URL
            timeout: è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
            max_connections: æœ€å¤§è¿æ¥æ•°
            enable_cache: æ˜¯å¦å¯ç”¨ç¼“å­˜
            allowed_domains: å…è®¸çš„åŸŸååˆ—è¡¨
        """
        self.database_url = database_url
        self.timeout = timeout
    
    def get_user(self, user_id: int) -> dict:
        """è·å–ç”¨æˆ·ä¿¡æ¯"""
        pass
    
    def create_user(self, name: str, email: str) -> bool:
        """åˆ›å»ºæ–°ç”¨æˆ·"""
        pass
```

### ç”Ÿæˆçš„ AST å…ƒæ•°æ® Markdown

```markdown
### ğŸ“„ Python File Metadata: `src/user_service.py`

#### ğŸ“¦ Imports
- `from typing import Optional, List`

#### ğŸ›ï¸ Classes (1)

##### ğŸ“Œ `class UserService`
*Line: 3*

**Docstring:**
```
ç”¨æˆ·æœåŠ¡ç±»
```

**ğŸ”§ Constructor (`__init__`):**
- `def __init__(database_url: str, timeout: int = 30, max_connections: int = 10, enable_cache: bool = True, allowed_domains: Optional[List[str]] = None, **kwargs)`
  - *åˆå§‹åŒ–ç”¨æˆ·æœåŠ¡*
  - **Parameters:**
    - `database_url: str`
    - `timeout: int = 30`
    - `max_connections: int = 10`
    - `enable_cache: bool = True`
    - `allowed_domains: Optional[List[str]] = None`
    - `**kwargs`

**Public Methods (2):**
- `def get_user(user_id: int) -> dict`
  - *è·å–ç”¨æˆ·ä¿¡æ¯*
- `def create_user(name: str, email: str) -> bool`
  - *åˆ›å»ºæ–°ç”¨æˆ·*
```

## âœ… ä¼˜åŠ¿æ€»ç»“

1. **æ›´æ¸…æ™°** - `__init__` ä½œä¸ºç±»çš„æ„é€ å™¨ï¼Œè¢«ç‰¹åˆ«çªå‡ºæ˜¾ç¤º
2. **æ›´è¯¦ç»†** - æ¯ä¸ªå‚æ•°å•ç‹¬ä¸€è¡Œï¼Œç±»å‹å’Œé»˜è®¤å€¼ä¸€ç›®äº†ç„¶
3. **æ›´æ˜“è¯»** - AI å’Œäººç±»éƒ½èƒ½å¿«é€Ÿç†è§£å¦‚ä½•å®ä¾‹åŒ–è¿™ä¸ªç±»
4. **æ›´ä¸“ä¸š** - ç¬¦åˆ API æ–‡æ¡£çš„æ ‡å‡†æ ¼å¼

## ğŸ¯ å¯¹ AI å¤§æ¨¡å‹çš„ä»·å€¼

å½“ AI çœ‹åˆ°è¿™æ ·çš„å…ƒæ•°æ®æ—¶ï¼Œå®ƒèƒ½ç«‹å³ç†è§£ï¼š

- è¿™ä¸ªç±»éœ€è¦ä»€ä¹ˆå‚æ•°æ‰èƒ½åˆ›å»ºå®ä¾‹
- å“ªäº›å‚æ•°æ˜¯å¿…éœ€çš„ï¼Œå“ªäº›æ˜¯å¯é€‰çš„
- å‚æ•°çš„ç±»å‹çº¦æŸæ˜¯ä»€ä¹ˆ
- æœ‰å“ªäº›é»˜è®¤é…ç½®

è¿™å¤§å¤§æå‡äº† AI ç”Ÿæˆæ­£ç¡®ä»£ç çš„èƒ½åŠ›ï¼

## ğŸ”„ å…¼å®¹æ€§

- âœ… å¦‚æœç±»æ²¡æœ‰ `__init__` æ–¹æ³•ï¼Œä¸ä¼šæ˜¾ç¤ºæ„é€ å™¨éƒ¨åˆ†
- âœ… ä¸å½±å“å…¶ä»–æ–¹æ³•çš„æ˜¾ç¤º
- âœ… å®Œå…¨å‘åå…¼å®¹
- âœ… æ”¯æŒæ‰€æœ‰ç±»å‹çš„å‚æ•°ï¼ˆä½ç½®å‚æ•°ã€å…³é”®å­—å‚æ•°ã€*argsã€**kwargsï¼‰
````

## tests/ai_docs/t.md

``````markdown
## 1 äºŒçº§åˆ«

aaa
`````md
# 1  ä¸€çº§åˆ«

å†…å®¹111

````python
print("hello")
````

## 1.2
å˜¿å˜¿
`````

<div >
# 1 2323
</div>
[nb_ai_context_all_docs_and_codes.md](../../markdown_gen_files_git_ignore/ai_md_files/nb_ai_context_all_docs_and_codes.md)


<project_context project_name="nb_ai_context">

    <project_summary>
        # markdown content namespace: nb_ai_context project summary
        - nb_ai_context is a powerful...
    </project_summary>[nb_ai_context_all_docs_and_codes.md](../../markdown_gen_files_git_ignore/ai_md_files/nb_ai_context_all_docs_and_codes.md)

    <core_metadata>
        ## ğŸ“‹ Core Source Files Metadata
        ...
    </core_metadata>

    <project_structure>
        ## File Tree
        ```
        â”œâ”€â”€ README.md
        â””â”€â”€ src/
        ```
        ## Included Files
        - README.md
        - src/main.py
    </project_structure>

    <repository_files>
        
        <div class="markdown-file" file_path="README.md">
            --- **start of file: README.md** ---
            # Title
            ...
            --- **end of file: README.md** ---
        </div>

        <file path="src/main.py">
            <ast_metadata>
                ### ğŸ“„ Python File Metadata...
                class AiMdGenerator...
            </ast_metadata>
            
            <content>
                --- **start of file: src/main.py** ---
                ```python
                import os
                ...
                ```
                --- **end of file: src/main.py** ---
            </content>
        </file>

    </repository_files>

</project_context>
``````

## tests/ai_docs/UPDATE_SUMMARY.md

````markdown
# nb_ai_context æ›´æ–°æ‘˜è¦

## ğŸ“… æ›´æ–°æ—¥æœŸ
2025-11-21

## ğŸ¯ æœ¬æ¬¡æ›´æ–°çš„ä¸¤ä¸ªé‡è¦åŠŸèƒ½

### åŠŸèƒ½ 1ï¸âƒ£ï¼šçªå‡ºæ˜¾ç¤ºç±»çš„ `__init__` æ„é€ æ–¹æ³• â­â­â­â­â­

#### é—®é¢˜
ä¹‹å‰ `__init__` æ–¹æ³•æ··åœ¨æ™®é€šå…¬æœ‰æ–¹æ³•åˆ—è¡¨ä¸­ï¼Œä¸å¤Ÿçªå‡ºã€‚

#### è§£å†³æ–¹æ¡ˆ
- âœ… `__init__` æ–¹æ³•è¢«å•ç‹¬æå–ï¼Œä½¿ç”¨ä¸“é—¨çš„æ ‡é¢˜ `ğŸ”§ Constructor (\`__init__\`):`
- âœ… æ˜¾ç¤ºå®Œæ•´çš„æ–¹æ³•ç­¾å
- âœ… æ˜¾ç¤ºå®Œæ•´çš„æ–‡æ¡£å­—ç¬¦ä¸²
- âœ… **é€ä¸ªåˆ—å‡ºæ¯ä¸ªå‚æ•°**ï¼ŒåŒ…æ‹¬ç±»å‹æ³¨è§£å’Œé»˜è®¤å€¼
- âœ… æ”¯æŒæ‰€æœ‰å‚æ•°ç±»å‹ï¼šä½ç½®å‚æ•°ã€å…³é”®å­—å‚æ•°ã€`*args`ã€`**kwargs`
- âœ… ä»å…¬æœ‰æ–¹æ³•åˆ—è¡¨ä¸­æ’é™¤ï¼Œé¿å…é‡å¤

#### æ•ˆæœ
```markdown
**ğŸ”§ Constructor (`__init__`):**
- `def __init__(database_url: str, timeout: int = 30, max_connections: int = 10, **kwargs)`
  - **Docstring:**
  ```
  åˆå§‹åŒ–æ•°æ®åº“æœåŠ¡
  
  Args:
      database_url: æ•°æ®åº“è¿æ¥URL
      timeout: è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
      max_connections: æœ€å¤§è¿æ¥æ•°
  ```
  - **Parameters:**
    - `database_url: str`
    - `timeout: int = 30`
    - `max_connections: int = 10`
    - `**kwargs`

**Public Methods (4):**  ğŸ‘ˆ æ³¨æ„ï¼š__init__ å·²è¢«æ’é™¤ï¼Œæ•°é‡å‡å°‘äº†
- `def get_user(user_id: int) -> dict`
- ...
```

---

### åŠŸèƒ½ 2ï¸âƒ£ï¼šå®Œæ•´æ˜¾ç¤ºæ–‡æ¡£å­—ç¬¦ä¸² â­â­â­â­â­

#### é—®é¢˜
ä¹‹å‰ç‰ˆæœ¬å¯¹æ–‡æ¡£å­—ç¬¦ä¸²è¿›è¡Œäº†æˆªæ–­ï¼š
- ç±»çš„ docstringï¼šåªæ˜¾ç¤ºå‰ 3 è¡Œ
- `__init__` æ–¹æ³•ï¼šåªæ˜¾ç¤ºç¬¬ 1 è¡Œ
- æ™®é€šæ–¹æ³•ï¼šåªæ˜¾ç¤ºç¬¬ 1 è¡Œ
- é¡¶çº§å‡½æ•°ï¼šåªæ˜¾ç¤ºç¬¬ 1 è¡Œ

è¿™å¯¼è‡´**å¤§é‡é‡è¦æ–‡æ¡£ä¿¡æ¯ä¸¢å¤±**ï¼

#### è§£å†³æ–¹æ¡ˆ

##### 1. ç±»çš„ docstring - **å®Œæ•´æ˜¾ç¤º**
```python
# ä¹‹å‰ï¼šåªæ˜¾ç¤ºå‰3è¡Œ
docstring_lines = cls["docstring"].split("\n")[:3]

# ç°åœ¨ï¼šæ˜¾ç¤ºæ‰€æœ‰è¡Œ
docstring_lines = cls["docstring"].split("\n")
```

##### 2. `__init__` æ–¹æ³•çš„ docstring - **å®Œæ•´æ˜¾ç¤º**
```markdown
**ğŸ”§ Constructor (`__init__`):**
- `def __init__(...)`
  - **Docstring:**
  ```
  å®Œæ•´çš„æ–‡æ¡£å­—ç¬¦ä¸²
  åŒ…æ‹¬æ‰€æœ‰è¡Œ
  åŒ…æ‹¬ç¤ºä¾‹ä»£ç 
  åŒ…æ‹¬æ³¨æ„äº‹é¡¹
  ```
  - **Parameters:**
    - ...
```

##### 3. æ™®é€šæ–¹æ³•çš„ docstring - **æ™ºèƒ½æ˜¾ç¤º**
- å•è¡Œæ–‡æ¡£ï¼šä¿æŒç®€æ´ `*ç®€çŸ­æè¿°*`
- å¤šè¡Œæ–‡æ¡£ï¼šä½¿ç”¨ä»£ç å—æ ¼å¼ï¼Œå®Œæ•´æ˜¾ç¤º

##### 4. é¡¶çº§å‡½æ•°çš„ docstring - **æ™ºèƒ½æ˜¾ç¤º**
- ä¸æ™®é€šæ–¹æ³•ç›¸åŒçš„é€»è¾‘

#### æ•ˆæœå¯¹æ¯”

**ä¿®æ”¹å‰** âŒ
```markdown
**Docstring:**
```
funboostæå…¶é‡è§†ä»£ç èƒ½åœ¨pycharmä¸‹è‡ªåŠ¨è¡¥å…¨ã€‚
è¿™ç§__call__å†™æ³•åœ¨pycahrmä¸‹ ä¸ä»…èƒ½è¡¥å…¨æ¶ˆè´¹å‡½æ•°çš„ push consumeç­‰æ–¹æ³•...
...  ğŸ‘ˆ åé¢çš„é‡è¦ä¿¡æ¯éƒ½è¢«æˆªæ–­äº†ï¼
```

**ğŸ”§ Constructor (`__init__`):**
- `def __init__(...)`
  - *@boost è¿™æ˜¯funboostæ¡†æ¶æœ€é‡è¦çš„ä¸€ä¸ªå‡½æ•°*  ğŸ‘ˆ åªæœ‰ç¬¬ä¸€è¡Œ
```

**ä¿®æ”¹å** âœ…
```markdown
**Docstring:**
```
funboostæå…¶é‡è§†ä»£ç èƒ½åœ¨pycharmä¸‹è‡ªåŠ¨è¡¥å…¨ã€‚å…ƒç¼–ç¨‹ç»å¸¸é€ æˆåœ¨pycharmä¸‹ä»£ç æ— æ³•è‡ªåŠ¨è¡¥å…¨æç¤ºï¼Œä¸»è¦æ˜¯å®ç°ä»£ç è¡¥å…¨éš¾ã€‚
è¿™ç§__call__å†™æ³•åœ¨pycahrmä¸‹ ä¸ä»…èƒ½è¡¥å…¨æ¶ˆè´¹å‡½æ•°çš„ push consumeç­‰æ–¹æ³•ï¼Œä¹Ÿèƒ½è¡¥å…¨å‡½æ•°æœ¬èº«çš„å…¥å‚ï¼Œä¸€ä¸¾ä¸¤å¾—ã€‚ä»£ç èƒ½è‡ªåŠ¨è¡¥å…¨å¾ˆé‡è¦ã€‚
ä¸€ä¸ªå‡½æ•°funè¢« boostè£…é¥°å™¨è£…é¥°åï¼Œ isinstance(fun,Booster) ä¸ºTrue.

pydatinc pycharmç¼–ç¨‹ä»£ç è¡¥å…¨,è¯·å®‰è£… pydanticæ’ä»¶, åœ¨pycharmçš„  file -> settings -> Plugins -> è¾“å…¥ pydantic æœç´¢,ç‚¹å‡»å®‰è£… pydantic æ’ä»¶.

Booster æ˜¯æŠŠConsumer å’Œ Publisherçš„æ–¹æ³•é›†ä¸ºä¸€ä½“ã€‚
```
ğŸ‘† æ‰€æœ‰ä¿¡æ¯éƒ½å®Œæ•´ä¿ç•™ï¼

**ğŸ”§ Constructor (`__init__`):**
- `def __init__(queue_name: typing.Union[BoosterParams, str] = None, **kwargs)`
  - **Docstring:**
  ```
  @boost è¿™æ˜¯funboostæ¡†æ¶æœ€é‡è¦çš„ä¸€ä¸ªå‡½æ•°ï¼Œå¿…é¡»çœ‹æ‡‚BoosterParamsé‡Œé¢çš„å…¥å‚æœ‰å“ªäº›ã€‚
  pydatinc pycharmç¼–ç¨‹ä»£ç è¡¥å…¨,è¯·å®‰è£… pydanticæ’ä»¶...
  
  å¼ºçƒˆå»ºè®®æ‰€æœ‰å…¥å‚æ”¾åœ¨ BoosterParams() ä¸­...
  
  ```python
  # ç¤ºä¾‹ä»£ç 
  @boost(BoosterParams(queue_name='queue_test_f01', qps=0.2, ))
  def f(a, b):
      print(a + b)
  ```
  
  ä»¥ä¸Š4ç§å†™æ³•ç­‰æ•ˆã€‚
  ```
  ğŸ‘† åŒ…æ‹¬ç¤ºä¾‹ä»£ç åœ¨å†…çš„æ‰€æœ‰æ–‡æ¡£éƒ½å®Œæ•´æ˜¾ç¤ºï¼
  - **Parameters:**
    - `queue_name: typing.Union[BoosterParams, str] = None`
    - `**kwargs`
```

---

## ğŸ¯ ä¸ºä»€ä¹ˆè¿™ä¸¤ä¸ªåŠŸèƒ½éå¸¸é‡è¦ï¼Ÿ

### å¯¹å¼€å‘è€…çš„ä»·å€¼
1. **å¿«é€Ÿç†è§£ç±»çš„ä½¿ç”¨æ–¹å¼** - `__init__` å‚æ•°ä¸€ç›®äº†ç„¶
2. **å®Œæ•´çš„æ–‡æ¡£ä¿¡æ¯** - ä¸å†é”™è¿‡é‡è¦çš„ä½¿ç”¨è¯´æ˜å’Œç¤ºä¾‹
3. **æ›´å¥½çš„ä»£ç å®¡æŸ¥** - å®Œæ•´çš„ä¸Šä¸‹æ–‡ä¿¡æ¯
4. **æ–°äººå‹å¥½** - è¯¦ç»†çš„æ–‡æ¡£å¸®åŠ©å¿«é€Ÿä¸Šæ‰‹

### å¯¹ AI å¤§æ¨¡å‹çš„ä»·å€¼
1. **å‡†ç¡®çš„ä»£ç ç”Ÿæˆ** - çŸ¥é“å¦‚ä½•æ­£ç¡®å®ä¾‹åŒ–ç±»
2. **å‡å°‘å¹»è§‰** - å®Œæ•´çš„æ–‡æ¡£ä¿¡æ¯å‡å°‘ AI çš„çŒœæµ‹
3. **ç†è§£é¡¹ç›®æ¶æ„** - ä»æ„é€ å‡½æ•°å‚æ•°ç†è§£ç±»çš„ä¾èµ–å…³ç³»
4. **å®Œæ•´çš„ç¤ºä¾‹ä»£ç ** - å­¦ä¹ é¡¹ç›®çš„æœ€ä½³å®è·µ

### ç‰¹åˆ«é€‚åˆçš„é¡¹ç›®ç±»å‹
- âœ… **æ¡†æ¶ç±»é¡¹ç›®**ï¼šå¦‚ funboostã€FastAPI ç­‰
- âœ… **åº“é¡¹ç›®**ï¼šæœ‰è¯¦ç»†çš„ API æ–‡æ¡£
- âœ… **æ•™å­¦é¡¹ç›®**ï¼šä»£ç ä¸­åŒ…å«å¤§é‡æ³¨é‡Šå’Œè¯´æ˜
- âœ… **ä¼ä¸šé¡¹ç›®**ï¼šæœ‰è§„èŒƒçš„æ–‡æ¡£å­—ç¬¦ä¸²æ ‡å‡†

---

## ğŸ”§ æŠ€æœ¯å®ç°

### ä¿®æ”¹æ–‡ä»¶
`nb_ai_context/ai_md_generator.py`

### ä¿®æ”¹çš„æ–¹æ³•
`_format_py_metadata_as_markdown()`

### ä¿®æ”¹çš„è¡Œæ•°åŒºé—´
- 720-726 è¡Œï¼šç±»çš„ docstring
- 735-756 è¡Œï¼š`__init__` æ–¹æ³•çš„æå–å’Œæ˜¾ç¤º
- 759 è¡Œï¼šä»å…¬æœ‰æ–¹æ³•ä¸­æ’é™¤ `__init__`
- 773-785 è¡Œï¼šæ™®é€šæ–¹æ³•çš„ docstring
- 819-833 è¡Œï¼šé¡¶çº§å‡½æ•°çš„ docstring

---

## âœ… å…¼å®¹æ€§ä¿è¯

- âœ… **å®Œå…¨å‘åå…¼å®¹** - ä¸å½±å“ç°æœ‰åŠŸèƒ½
- âœ… **ä¼˜é›…é™çº§** - å¦‚æœç±»æ²¡æœ‰ `__init__`ï¼Œä¸æ˜¾ç¤ºæ„é€ å™¨éƒ¨åˆ†
- âœ… **æ™ºèƒ½æ ¼å¼åŒ–** - å•è¡Œ/å¤šè¡Œæ–‡æ¡£è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„æ˜¾ç¤ºæ ¼å¼
- âœ… **æ— ç ´åæ€§** - ä¸æ”¹å˜å…¶ä»–éƒ¨åˆ†çš„è¡Œä¸º

---

## ğŸ“Š å®é™…åº”ç”¨åœºæ™¯

### åœºæ™¯ 1ï¼šç†è§£æ¡†æ¶çš„æ ¸å¿ƒç±»
```python
# funboost çš„ Booster ç±»
# ç°åœ¨èƒ½çœ‹åˆ°å®Œæ•´çš„ 7 è¡Œç±»æ–‡æ¡£ + __init__ çš„è¯¦ç»†ä½¿ç”¨è¯´æ˜ï¼ˆåŒ…æ‹¬4ç§ç­‰æ•ˆå†™æ³•ï¼‰
```

### åœºæ™¯ 2ï¼šå­¦ä¹ æ­£ç¡®çš„ä½¿ç”¨æ–¹å¼
```python
# ä» __init__ å‚æ•°åˆ—è¡¨çœ‹å‡ºï¼š
# - å“ªäº›å‚æ•°æ˜¯å¿…éœ€çš„
# - å“ªäº›å‚æ•°æœ‰é»˜è®¤å€¼
# - å‚æ•°çš„ç±»å‹çº¦æŸ
# - ä»æ–‡æ¡£å­—ç¬¦ä¸²çœ‹åˆ°ç¤ºä¾‹ä»£ç 
```

### åœºæ™¯ 3ï¼šAI ä»£ç ç”Ÿæˆ
```python
# AI ç°åœ¨èƒ½çœ‹åˆ°å®Œæ•´ä¿¡æ¯ï¼š
# - æ„é€ å‡½æ•°çš„æ‰€æœ‰å‚æ•°
# - æ¯ä¸ªå‚æ•°çš„ç±»å‹å’Œé»˜è®¤å€¼
# - è¯¦ç»†çš„ä½¿ç”¨è¯´æ˜å’Œç¤ºä¾‹
# â†’ ç”Ÿæˆçš„ä»£ç æ›´å‡†ç¡®ï¼
```

---

## ğŸš€ ä½¿ç”¨æ–¹å¼ä¸å˜

```python
from nb_ai_context import AiMdGenerator

(
    AiMdGenerator("output.md")
    .set_project_propery(
        project_name="my_project",
        project_root=r"D:\codes\my_project"
    )
    .clear_text()
    .merge_from_dir(
        relative_dir_name="src",
        as_title="æºä»£ç ",
        should_include_suffixes=[".py"],
        include_ast_metadata=True,  # å¼€å¯ AST å…ƒæ•°æ®æå–
    )
)
```

ç”Ÿæˆçš„ Markdown æ–‡ä»¶ä¸­ï¼Œæ¯ä¸ªç±»çš„ `__init__` æ–¹æ³•éƒ½ä¼šè¢«çªå‡ºæ˜¾ç¤ºï¼Œæ‰€æœ‰æ–‡æ¡£å­—ç¬¦ä¸²éƒ½ä¼šå®Œæ•´ä¿ç•™ï¼

---

## ğŸ“ ç›¸å…³æ–‡æ¡£

- `tests/ai_docs/init_extraction_feature.md` - __init__ æå–åŠŸèƒ½è¯¦ç»†è¯´æ˜
- `tests/ai_docs/CHANGELOG_init_extraction.md` - __init__ åŠŸèƒ½æ›´æ–°æ—¥å¿—
- `tests/ai_docs/complete_docstring_extraction.md` - å®Œæ•´æ–‡æ¡£å­—ç¬¦ä¸²æå–è¯´æ˜
- `tests/ai_codes/demo_init_extraction.py` - æ¼”ç¤ºç¤ºä¾‹ä»£ç 

---

**nb_ai_context** - è®© AI è·å¾—å®Œæ•´ã€å‡†ç¡®çš„ä»£ç ä¸Šä¸‹æ–‡ ğŸš€

ç°åœ¨æ”¯æŒï¼š
- âœ… çªå‡ºæ˜¾ç¤º `__init__` æ„é€ æ–¹æ³•
- âœ… å®Œæ•´æ˜¾ç¤ºæ‰€æœ‰æ–‡æ¡£å­—ç¬¦ä¸²
- âœ… æ™ºèƒ½æ ¼å¼åŒ–è¾“å‡º
- âœ… å®Œç¾æ”¯æŒå¤æ‚é¡¹ç›®ï¼ˆå¦‚ funboostï¼‰
````

## Statistics

- Total Files: 20
- Total Characters: 239953
- Total Tokens: 0
